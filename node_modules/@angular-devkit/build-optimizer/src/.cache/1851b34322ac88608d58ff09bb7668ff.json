{"remainingRequest":"C:\\Users\\Public\\restaurant-Tablet_UI_updated\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--8-1!C:\\Users\\Public\\restaurant-Tablet_UI_updated\\node_modules\\pusher-js\\dist\\web\\pusher.js","dependencies":[{"path":"C:\\Users\\Public\\restaurant-Tablet_UI_updated\\node_modules\\pusher-js\\dist\\web\\pusher.js","mtime":1609273596389},{"path":"C:\\Users\\Public\\restaurant-Tablet_UI_updated\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609273575432},{"path":"C:\\Users\\Public\\restaurant-Tablet_UI_updated\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1609273553988}],"contextDependencies":[],"result":["/*!\r\n * Pusher JavaScript Library v4.4.0\r\n * https://pusher.com/\r\n *\r\n * Copyright 2017, Pusher\r\n * Released under the MIT licence.\r\n */\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n    if (typeof exports === 'object' && typeof module === 'object')\r\n        module.exports = factory();\r\n    else if (typeof define === 'function' && define.amd)\r\n        define([], factory);\r\n    else if (typeof exports === 'object')\r\n        exports[\"Pusher\"] = factory();\r\n    else\r\n        root[\"Pusher\"] = factory();\r\n})(this, function () {\r\n    return /******/ (function (modules) {\r\n        /******/ // The module cache\r\n        /******/ var installedModules = {};\r\n        /******/ // The require function\r\n        /******/ function __webpack_require__(moduleId) {\r\n            /******/ // Check if module is in cache\r\n            /******/ if (installedModules[moduleId])\r\n                /******/ return installedModules[moduleId].exports;\r\n            /******/ // Create a new module (and put it into the cache)\r\n            /******/ var module = installedModules[moduleId] = {\r\n                /******/ exports: {},\r\n                /******/ id: moduleId,\r\n                /******/ loaded: false\r\n                /******/ \r\n            };\r\n            /******/ // Execute the module function\r\n            /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n            /******/ // Flag the module as loaded\r\n            /******/ module.loaded = true;\r\n            /******/ // Return the exports of the module\r\n            /******/ return module.exports;\r\n            /******/ \r\n        }\r\n        /******/ // expose the modules object (__webpack_modules__)\r\n        /******/ __webpack_require__.m = modules;\r\n        /******/ // expose the module cache\r\n        /******/ __webpack_require__.c = installedModules;\r\n        /******/ // __webpack_public_path__\r\n        /******/ __webpack_require__.p = \"\";\r\n        /******/ // Load entry module and return exports\r\n        /******/ return __webpack_require__(0);\r\n        /******/ \r\n    })([\r\n        /* 0 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var pusher_1 = __webpack_require__(1);\r\n            module.exports = pusher_1[\"default\"];\r\n            /***/ \r\n        }),\r\n        /* 1 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var runtime_1 = __webpack_require__(2);\r\n            var Collections = __webpack_require__(9);\r\n            var dispatcher_1 = __webpack_require__(24);\r\n            var timeline_1 = __webpack_require__(39);\r\n            var level_1 = __webpack_require__(40);\r\n            var StrategyBuilder = __webpack_require__(41);\r\n            var timers_1 = __webpack_require__(12);\r\n            var defaults_1 = __webpack_require__(5);\r\n            var DefaultConfig = __webpack_require__(71);\r\n            var logger_1 = __webpack_require__(8);\r\n            var factory_1 = __webpack_require__(43);\r\n            var url_store_1 = __webpack_require__(14);\r\n            var Pusher = (function () {\r\n                function Pusher(app_key, options) {\r\n                    var _this = this;\r\n                    checkAppKey(app_key);\r\n                    options = options || {};\r\n                    if (!options.cluster && !(options.wsHost || options.httpHost)) {\r\n                        var suffix = url_store_1[\"default\"].buildLogSuffix(\"javascriptQuickStart\");\r\n                        logger_1[\"default\"].warn(\"You should always specify a cluster when connecting. \" + suffix);\r\n                    }\r\n                    this.key = app_key;\r\n                    this.config = Collections.extend(DefaultConfig.getGlobalConfig(), options.cluster ? DefaultConfig.getClusterConfig(options.cluster) : {}, options);\r\n                    this.channels = factory_1[\"default\"].createChannels();\r\n                    this.global_emitter = new dispatcher_1[\"default\"]();\r\n                    this.sessionID = Math.floor(Math.random() * 1000000000);\r\n                    this.timeline = new timeline_1[\"default\"](this.key, this.sessionID, {\r\n                        cluster: this.config.cluster,\r\n                        features: Pusher.getClientFeatures(),\r\n                        params: this.config.timelineParams || {},\r\n                        limit: 50,\r\n                        level: level_1[\"default\"].INFO,\r\n                        version: defaults_1[\"default\"].VERSION\r\n                    });\r\n                    if (!this.config.disableStats) {\r\n                        this.timelineSender = factory_1[\"default\"].createTimelineSender(this.timeline, {\r\n                            host: this.config.statsHost,\r\n                            path: \"/timeline/v2/\" + runtime_1[\"default\"].TimelineTransport.name\r\n                        });\r\n                    }\r\n                    var getStrategy = function (options) {\r\n                        var config = Collections.extend({}, _this.config, options);\r\n                        return StrategyBuilder.build(runtime_1[\"default\"].getDefaultStrategy(config), config);\r\n                    };\r\n                    this.connection = factory_1[\"default\"].createConnectionManager(this.key, Collections.extend({ getStrategy: getStrategy,\r\n                        timeline: this.timeline,\r\n                        activityTimeout: this.config.activity_timeout,\r\n                        pongTimeout: this.config.pong_timeout,\r\n                        unavailableTimeout: this.config.unavailable_timeout\r\n                    }, this.config, { useTLS: this.shouldUseTLS() }));\r\n                    this.connection.bind('connected', function () {\r\n                        _this.subscribeAll();\r\n                        if (_this.timelineSender) {\r\n                            _this.timelineSender.send(_this.connection.isUsingTLS());\r\n                        }\r\n                    });\r\n                    this.connection.bind('message', function (event) {\r\n                        var eventName = event.event;\r\n                        var internal = (eventName.indexOf('pusher_internal:') === 0);\r\n                        if (event.channel) {\r\n                            var channel = _this.channel(event.channel);\r\n                            if (channel) {\r\n                                channel.handleEvent(event);\r\n                            }\r\n                        }\r\n                        if (!internal) {\r\n                            _this.global_emitter.emit(event.event, event.data);\r\n                        }\r\n                    });\r\n                    this.connection.bind('connecting', function () {\r\n                        _this.channels.disconnect();\r\n                    });\r\n                    this.connection.bind('disconnected', function () {\r\n                        _this.channels.disconnect();\r\n                    });\r\n                    this.connection.bind('error', function (err) {\r\n                        logger_1[\"default\"].warn('Error', err);\r\n                    });\r\n                    Pusher.instances.push(this);\r\n                    this.timeline.info({ instances: Pusher.instances.length });\r\n                    if (Pusher.isReady) {\r\n                        this.connect();\r\n                    }\r\n                }\r\n                Pusher.ready = function () {\r\n                    Pusher.isReady = true;\r\n                    for (var i = 0, l = Pusher.instances.length; i < l; i++) {\r\n                        Pusher.instances[i].connect();\r\n                    }\r\n                };\r\n                Pusher.log = function (message) {\r\n                    if (Pusher.logToConsole && (window).console && (window).console.log) {\r\n                        (window).console.log(message);\r\n                    }\r\n                };\r\n                Pusher.getClientFeatures = function () {\r\n                    return Collections.keys(Collections.filterObject({ \"ws\": runtime_1[\"default\"].Transports.ws }, function (t) { return t.isSupported({}); }));\r\n                };\r\n                Pusher.prototype.channel = function (name) {\r\n                    return this.channels.find(name);\r\n                };\r\n                Pusher.prototype.allChannels = function () {\r\n                    return this.channels.all();\r\n                };\r\n                Pusher.prototype.connect = function () {\r\n                    this.connection.connect();\r\n                    if (this.timelineSender) {\r\n                        if (!this.timelineSenderTimer) {\r\n                            var usingTLS = this.connection.isUsingTLS();\r\n                            var timelineSender = this.timelineSender;\r\n                            this.timelineSenderTimer = new timers_1.PeriodicTimer(60000, function () {\r\n                                timelineSender.send(usingTLS);\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n                Pusher.prototype.disconnect = function () {\r\n                    this.connection.disconnect();\r\n                    if (this.timelineSenderTimer) {\r\n                        this.timelineSenderTimer.ensureAborted();\r\n                        this.timelineSenderTimer = null;\r\n                    }\r\n                };\r\n                Pusher.prototype.bind = function (event_name, callback, context) {\r\n                    this.global_emitter.bind(event_name, callback, context);\r\n                    return this;\r\n                };\r\n                Pusher.prototype.unbind = function (event_name, callback, context) {\r\n                    this.global_emitter.unbind(event_name, callback, context);\r\n                    return this;\r\n                };\r\n                Pusher.prototype.bind_global = function (callback) {\r\n                    this.global_emitter.bind_global(callback);\r\n                    return this;\r\n                };\r\n                Pusher.prototype.unbind_global = function (callback) {\r\n                    this.global_emitter.unbind_global(callback);\r\n                    return this;\r\n                };\r\n                Pusher.prototype.unbind_all = function (callback) {\r\n                    this.global_emitter.unbind_all();\r\n                    return this;\r\n                };\r\n                Pusher.prototype.subscribeAll = function () {\r\n                    var channelName;\r\n                    for (channelName in this.channels.channels) {\r\n                        if (this.channels.channels.hasOwnProperty(channelName)) {\r\n                            this.subscribe(channelName);\r\n                        }\r\n                    }\r\n                };\r\n                Pusher.prototype.subscribe = function (channel_name) {\r\n                    var channel = this.channels.add(channel_name, this);\r\n                    if (channel.subscriptionPending && channel.subscriptionCancelled) {\r\n                        channel.reinstateSubscription();\r\n                    }\r\n                    else if (!channel.subscriptionPending && this.connection.state === \"connected\") {\r\n                        channel.subscribe();\r\n                    }\r\n                    return channel;\r\n                };\r\n                Pusher.prototype.unsubscribe = function (channel_name) {\r\n                    var channel = this.channels.find(channel_name);\r\n                    if (channel && channel.subscriptionPending) {\r\n                        channel.cancelSubscription();\r\n                    }\r\n                    else {\r\n                        channel = this.channels.remove(channel_name);\r\n                        if (channel && this.connection.state === \"connected\") {\r\n                            channel.unsubscribe();\r\n                        }\r\n                    }\r\n                };\r\n                Pusher.prototype.send_event = function (event_name, data, channel) {\r\n                    return this.connection.send_event(event_name, data, channel);\r\n                };\r\n                Pusher.prototype.shouldUseTLS = function () {\r\n                    if (runtime_1[\"default\"].getProtocol() === \"https:\") {\r\n                        return true;\r\n                    }\r\n                    else if (this.config.forceTLS === true) {\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        return Boolean(this.config.encrypted);\r\n                    }\r\n                };\r\n                Pusher.instances = [];\r\n                Pusher.isReady = false;\r\n                Pusher.logToConsole = false;\r\n                Pusher.Runtime = runtime_1[\"default\"];\r\n                Pusher.ScriptReceivers = runtime_1[\"default\"].ScriptReceivers;\r\n                Pusher.DependenciesReceivers = runtime_1[\"default\"].DependenciesReceivers;\r\n                Pusher.auth_callbacks = runtime_1[\"default\"].auth_callbacks;\r\n                return Pusher;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Pusher;\r\n            function checkAppKey(key) {\r\n                if (key === null || key === undefined) {\r\n                    throw \"You must pass your app key when you instantiate Pusher.\";\r\n                }\r\n            }\r\n            runtime_1[\"default\"].setup(Pusher);\r\n            /***/ \r\n        }),\r\n        /* 2 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var dependencies_1 = __webpack_require__(3);\r\n            var xhr_auth_1 = __webpack_require__(7);\r\n            var jsonp_auth_1 = __webpack_require__(15);\r\n            var script_request_1 = __webpack_require__(16);\r\n            var jsonp_request_1 = __webpack_require__(17);\r\n            var script_receiver_factory_1 = __webpack_require__(4);\r\n            var jsonp_timeline_1 = __webpack_require__(18);\r\n            var transports_1 = __webpack_require__(19);\r\n            var net_info_1 = __webpack_require__(26);\r\n            var default_strategy_1 = __webpack_require__(27);\r\n            var transport_connection_initializer_1 = __webpack_require__(28);\r\n            var http_1 = __webpack_require__(29);\r\n            var Runtime = {\r\n                nextAuthCallbackID: 1,\r\n                auth_callbacks: {},\r\n                ScriptReceivers: script_receiver_factory_1.ScriptReceivers,\r\n                DependenciesReceivers: dependencies_1.DependenciesReceivers,\r\n                getDefaultStrategy: default_strategy_1[\"default\"],\r\n                Transports: transports_1[\"default\"],\r\n                transportConnectionInitializer: transport_connection_initializer_1[\"default\"],\r\n                HTTPFactory: http_1[\"default\"],\r\n                TimelineTransport: jsonp_timeline_1[\"default\"],\r\n                getXHRAPI: function () {\r\n                    return window.XMLHttpRequest;\r\n                },\r\n                getWebSocketAPI: function () {\r\n                    return window.WebSocket || window.MozWebSocket;\r\n                },\r\n                setup: function (PusherClass) {\r\n                    var _this = this;\r\n                    window.Pusher = PusherClass;\r\n                    var initializeOnDocumentBody = function () {\r\n                        _this.onDocumentBody(PusherClass.ready);\r\n                    };\r\n                    if (!window.JSON) {\r\n                        dependencies_1.Dependencies.load(\"json2\", {}, initializeOnDocumentBody);\r\n                    }\r\n                    else {\r\n                        initializeOnDocumentBody();\r\n                    }\r\n                },\r\n                getDocument: function () {\r\n                    return document;\r\n                },\r\n                getProtocol: function () {\r\n                    return this.getDocument().location.protocol;\r\n                },\r\n                getAuthorizers: function () {\r\n                    return { ajax: xhr_auth_1[\"default\"], jsonp: jsonp_auth_1[\"default\"] };\r\n                },\r\n                onDocumentBody: function (callback) {\r\n                    var _this = this;\r\n                    if (document.body) {\r\n                        callback();\r\n                    }\r\n                    else {\r\n                        setTimeout(function () {\r\n                            _this.onDocumentBody(callback);\r\n                        }, 0);\r\n                    }\r\n                },\r\n                createJSONPRequest: function (url, data) {\r\n                    return new jsonp_request_1[\"default\"](url, data);\r\n                },\r\n                createScriptRequest: function (src) {\r\n                    return new script_request_1[\"default\"](src);\r\n                },\r\n                getLocalStorage: function () {\r\n                    try {\r\n                        return window.localStorage;\r\n                    }\r\n                    catch (e) {\r\n                        return undefined;\r\n                    }\r\n                },\r\n                createXHR: function () {\r\n                    if (this.getXHRAPI()) {\r\n                        return this.createXMLHttpRequest();\r\n                    }\r\n                    else {\r\n                        return this.createMicrosoftXHR();\r\n                    }\r\n                },\r\n                createXMLHttpRequest: function () {\r\n                    var Constructor = this.getXHRAPI();\r\n                    return new Constructor();\r\n                },\r\n                createMicrosoftXHR: function () {\r\n                    return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n                },\r\n                getNetwork: function () {\r\n                    return net_info_1.Network;\r\n                },\r\n                createWebSocket: function (url) {\r\n                    var Constructor = this.getWebSocketAPI();\r\n                    return new Constructor(url);\r\n                },\r\n                createSocketRequest: function (method, url) {\r\n                    if (this.isXHRSupported()) {\r\n                        return this.HTTPFactory.createXHR(method, url);\r\n                    }\r\n                    else if (this.isXDRSupported(url.indexOf(\"https:\") === 0)) {\r\n                        return this.HTTPFactory.createXDR(method, url);\r\n                    }\r\n                    else {\r\n                        throw \"Cross-origin HTTP requests are not supported\";\r\n                    }\r\n                },\r\n                isXHRSupported: function () {\r\n                    var Constructor = this.getXHRAPI();\r\n                    return Boolean(Constructor) && (new Constructor()).withCredentials !== undefined;\r\n                },\r\n                isXDRSupported: function (useTLS) {\r\n                    var protocol = useTLS ? \"https:\" : \"http:\";\r\n                    var documentProtocol = this.getProtocol();\r\n                    return Boolean((window['XDomainRequest'])) && documentProtocol === protocol;\r\n                },\r\n                addUnloadListener: function (listener) {\r\n                    if (window.addEventListener !== undefined) {\r\n                        window.addEventListener(\"unload\", listener, false);\r\n                    }\r\n                    else if (window.attachEvent !== undefined) {\r\n                        window.attachEvent(\"onunload\", listener);\r\n                    }\r\n                },\r\n                removeUnloadListener: function (listener) {\r\n                    if (window.addEventListener !== undefined) {\r\n                        window.removeEventListener(\"unload\", listener, false);\r\n                    }\r\n                    else if (window.detachEvent !== undefined) {\r\n                        window.detachEvent(\"onunload\", listener);\r\n                    }\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Runtime;\r\n            /***/ \r\n        }),\r\n        /* 3 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var script_receiver_factory_1 = __webpack_require__(4);\r\n            var defaults_1 = __webpack_require__(5);\r\n            var dependency_loader_1 = __webpack_require__(6);\r\n            exports.DependenciesReceivers = new script_receiver_factory_1.ScriptReceiverFactory(\"_pusher_dependencies\", \"Pusher.DependenciesReceivers\");\r\n            exports.Dependencies = new dependency_loader_1[\"default\"]({\r\n                cdn_http: defaults_1[\"default\"].cdn_http,\r\n                cdn_https: defaults_1[\"default\"].cdn_https,\r\n                version: defaults_1[\"default\"].VERSION,\r\n                suffix: defaults_1[\"default\"].dependency_suffix,\r\n                receivers: exports.DependenciesReceivers\r\n            });\r\n            /***/ \r\n        }),\r\n        /* 4 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var ScriptReceiverFactory = (function () {\r\n                function ScriptReceiverFactory(prefix, name) {\r\n                    this.lastId = 0;\r\n                    this.prefix = prefix;\r\n                    this.name = name;\r\n                }\r\n                ScriptReceiverFactory.prototype.create = function (callback) {\r\n                    this.lastId++;\r\n                    var number = this.lastId;\r\n                    var id = this.prefix + number;\r\n                    var name = this.name + \"[\" + number + \"]\";\r\n                    var called = false;\r\n                    var callbackWrapper = function () {\r\n                        if (!called) {\r\n                            callback.apply(null, arguments);\r\n                            called = true;\r\n                        }\r\n                    };\r\n                    this[number] = callbackWrapper;\r\n                    return { number: number, id: id, name: name, callback: callbackWrapper };\r\n                };\r\n                ScriptReceiverFactory.prototype.remove = function (receiver) {\r\n                    delete this[receiver.number];\r\n                };\r\n                return ScriptReceiverFactory;\r\n            }());\r\n            exports.ScriptReceiverFactory = ScriptReceiverFactory;\r\n            exports.ScriptReceivers = new ScriptReceiverFactory(\"_pusher_script_\", \"Pusher.ScriptReceivers\");\r\n            /***/ \r\n        }),\r\n        /* 5 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var Defaults = {\r\n                VERSION: \"4.4.0\",\r\n                PROTOCOL: 7,\r\n                host: 'ws.pusherapp.com',\r\n                ws_port: 80,\r\n                wss_port: 443,\r\n                ws_path: '',\r\n                sockjs_host: 'sockjs.pusher.com',\r\n                sockjs_http_port: 80,\r\n                sockjs_https_port: 443,\r\n                sockjs_path: \"/pusher\",\r\n                stats_host: 'stats.pusher.com',\r\n                channel_auth_endpoint: '/pusher/auth',\r\n                channel_auth_transport: 'ajax',\r\n                activity_timeout: 120000,\r\n                pong_timeout: 30000,\r\n                unavailable_timeout: 10000,\r\n                cdn_http: 'http://js.pusher.com',\r\n                cdn_https: 'https://js.pusher.com',\r\n                dependency_suffix: ''\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Defaults;\r\n            /***/ \r\n        }),\r\n        /* 6 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var script_receiver_factory_1 = __webpack_require__(4);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var DependencyLoader = (function () {\r\n                function DependencyLoader(options) {\r\n                    this.options = options;\r\n                    this.receivers = options.receivers || script_receiver_factory_1.ScriptReceivers;\r\n                    this.loading = {};\r\n                }\r\n                DependencyLoader.prototype.load = function (name, options, callback) {\r\n                    var self = this;\r\n                    if (self.loading[name] && self.loading[name].length > 0) {\r\n                        self.loading[name].push(callback);\r\n                    }\r\n                    else {\r\n                        self.loading[name] = [callback];\r\n                        var request = runtime_1[\"default\"].createScriptRequest(self.getPath(name, options));\r\n                        var receiver = self.receivers.create(function (error) {\r\n                            self.receivers.remove(receiver);\r\n                            if (self.loading[name]) {\r\n                                var callbacks = self.loading[name];\r\n                                delete self.loading[name];\r\n                                var successCallback = function (wasSuccessful) {\r\n                                    if (!wasSuccessful) {\r\n                                        request.cleanup();\r\n                                    }\r\n                                };\r\n                                for (var i = 0; i < callbacks.length; i++) {\r\n                                    callbacks[i](error, successCallback);\r\n                                }\r\n                            }\r\n                        });\r\n                        request.send(receiver);\r\n                    }\r\n                };\r\n                DependencyLoader.prototype.getRoot = function (options) {\r\n                    var cdn;\r\n                    var protocol = runtime_1[\"default\"].getDocument().location.protocol;\r\n                    if ((options && options.useTLS) || protocol === \"https:\") {\r\n                        cdn = this.options.cdn_https;\r\n                    }\r\n                    else {\r\n                        cdn = this.options.cdn_http;\r\n                    }\r\n                    return cdn.replace(/\\/*$/, \"\") + \"/\" + this.options.version;\r\n                };\r\n                DependencyLoader.prototype.getPath = function (name, options) {\r\n                    return this.getRoot(options) + '/' + name + this.options.suffix + '.js';\r\n                };\r\n                ;\r\n                return DependencyLoader;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = DependencyLoader;\r\n            /***/ \r\n        }),\r\n        /* 7 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var logger_1 = __webpack_require__(8);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var url_store_1 = __webpack_require__(14);\r\n            var ajax = function (context, socketId, callback) {\r\n                var self = this, xhr;\r\n                xhr = runtime_1[\"default\"].createXHR();\r\n                xhr.open(\"POST\", self.options.authEndpoint, true);\r\n                xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n                for (var headerName in this.authOptions.headers) {\r\n                    xhr.setRequestHeader(headerName, this.authOptions.headers[headerName]);\r\n                }\r\n                xhr.onreadystatechange = function () {\r\n                    if (xhr.readyState === 4) {\r\n                        if (xhr.status === 200) {\r\n                            var data, parsed = false;\r\n                            try {\r\n                                data = JSON.parse(xhr.responseText);\r\n                                parsed = true;\r\n                            }\r\n                            catch (e) {\r\n                                callback(true, 'JSON returned from webapp was invalid, yet status code was 200. Data was: ' + xhr.responseText);\r\n                            }\r\n                            if (parsed) {\r\n                                callback(false, data);\r\n                            }\r\n                        }\r\n                        else {\r\n                            var suffix = url_store_1[\"default\"].buildLogSuffix(\"authenticationEndpoint\");\r\n                            logger_1[\"default\"].warn((\"Couldn't retrieve authentication info. \" + xhr.status) +\r\n                                (\"Clients must be authenticated to join private or presence channels. \" + suffix));\r\n                            callback(true, xhr.status);\r\n                        }\r\n                    }\r\n                };\r\n                xhr.send(this.composeQuery(socketId));\r\n                return xhr;\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = ajax;\r\n            /***/ \r\n        }),\r\n        /* 8 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var collections_1 = __webpack_require__(9);\r\n            var pusher_1 = __webpack_require__(1);\r\n            var Logger = {\r\n                debug: function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i - 0] = arguments[_i];\r\n                    }\r\n                    if (!pusher_1[\"default\"].log) {\r\n                        return;\r\n                    }\r\n                    pusher_1[\"default\"].log(collections_1.stringify.apply(this, arguments));\r\n                },\r\n                warn: function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i - 0] = arguments[_i];\r\n                    }\r\n                    var message = collections_1.stringify.apply(this, arguments);\r\n                    if (pusher_1[\"default\"].log) {\r\n                        pusher_1[\"default\"].log(message);\r\n                    }\r\n                    else if ((window).console) {\r\n                        if ((window).console.warn) {\r\n                            (window).console.warn(message);\r\n                        }\r\n                        else if ((window).console.log) {\r\n                            (window).console.log(message);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Logger;\r\n            /***/ \r\n        }),\r\n        /* 9 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var base64_1 = __webpack_require__(10);\r\n            var util_1 = __webpack_require__(11);\r\n            function extend(target) {\r\n                var sources = [];\r\n                for (var _i = 1; _i < arguments.length; _i++) {\r\n                    sources[_i - 1] = arguments[_i];\r\n                }\r\n                for (var i = 0; i < sources.length; i++) {\r\n                    var extensions = sources[i];\r\n                    for (var property in extensions) {\r\n                        if (extensions[property] && extensions[property].constructor &&\r\n                            extensions[property].constructor === Object) {\r\n                            target[property] = extend(target[property] || {}, extensions[property]);\r\n                        }\r\n                        else {\r\n                            target[property] = extensions[property];\r\n                        }\r\n                    }\r\n                }\r\n                return target;\r\n            }\r\n            exports.extend = extend;\r\n            function stringify() {\r\n                var m = [\"Pusher\"];\r\n                for (var i = 0; i < arguments.length; i++) {\r\n                    if (typeof arguments[i] === \"string\") {\r\n                        m.push(arguments[i]);\r\n                    }\r\n                    else {\r\n                        m.push(safeJSONStringify(arguments[i]));\r\n                    }\r\n                }\r\n                return m.join(\" : \");\r\n            }\r\n            exports.stringify = stringify;\r\n            function arrayIndexOf(array, item) {\r\n                var nativeIndexOf = Array.prototype.indexOf;\r\n                if (array === null) {\r\n                    return -1;\r\n                }\r\n                if (nativeIndexOf && array.indexOf === nativeIndexOf) {\r\n                    return array.indexOf(item);\r\n                }\r\n                for (var i = 0, l = array.length; i < l; i++) {\r\n                    if (array[i] === item) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            }\r\n            exports.arrayIndexOf = arrayIndexOf;\r\n            function objectApply(object, f) {\r\n                for (var key in object) {\r\n                    if (Object.prototype.hasOwnProperty.call(object, key)) {\r\n                        f(object[key], key, object);\r\n                    }\r\n                }\r\n            }\r\n            exports.objectApply = objectApply;\r\n            function keys(object) {\r\n                var keys = [];\r\n                objectApply(object, function (_, key) {\r\n                    keys.push(key);\r\n                });\r\n                return keys;\r\n            }\r\n            exports.keys = keys;\r\n            function values(object) {\r\n                var values = [];\r\n                objectApply(object, function (value) {\r\n                    values.push(value);\r\n                });\r\n                return values;\r\n            }\r\n            exports.values = values;\r\n            function apply(array, f, context) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    f.call(context || (window), array[i], i, array);\r\n                }\r\n            }\r\n            exports.apply = apply;\r\n            function map(array, f) {\r\n                var result = [];\r\n                for (var i = 0; i < array.length; i++) {\r\n                    result.push(f(array[i], i, array, result));\r\n                }\r\n                return result;\r\n            }\r\n            exports.map = map;\r\n            function mapObject(object, f) {\r\n                var result = {};\r\n                objectApply(object, function (value, key) {\r\n                    result[key] = f(value);\r\n                });\r\n                return result;\r\n            }\r\n            exports.mapObject = mapObject;\r\n            function filter(array, test) {\r\n                test = test || function (value) { return !!value; };\r\n                var result = [];\r\n                for (var i = 0; i < array.length; i++) {\r\n                    if (test(array[i], i, array, result)) {\r\n                        result.push(array[i]);\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n            exports.filter = filter;\r\n            function filterObject(object, test) {\r\n                var result = {};\r\n                objectApply(object, function (value, key) {\r\n                    if ((test && test(value, key, object, result)) || Boolean(value)) {\r\n                        result[key] = value;\r\n                    }\r\n                });\r\n                return result;\r\n            }\r\n            exports.filterObject = filterObject;\r\n            function flatten(object) {\r\n                var result = [];\r\n                objectApply(object, function (value, key) {\r\n                    result.push([key, value]);\r\n                });\r\n                return result;\r\n            }\r\n            exports.flatten = flatten;\r\n            function any(array, test) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    if (test(array[i], i, array)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            exports.any = any;\r\n            function all(array, test) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    if (!test(array[i], i, array)) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n            exports.all = all;\r\n            function encodeParamsObject(data) {\r\n                return mapObject(data, function (value) {\r\n                    if (typeof value === \"object\") {\r\n                        value = safeJSONStringify(value);\r\n                    }\r\n                    return encodeURIComponent(base64_1[\"default\"](value.toString()));\r\n                });\r\n            }\r\n            exports.encodeParamsObject = encodeParamsObject;\r\n            function buildQueryString(data) {\r\n                var params = filterObject(data, function (value) {\r\n                    return value !== undefined;\r\n                });\r\n                var query = map(flatten(encodeParamsObject(params)), util_1[\"default\"].method(\"join\", \"=\")).join(\"&\");\r\n                return query;\r\n            }\r\n            exports.buildQueryString = buildQueryString;\r\n            function decycleObject(object) {\r\n                var objects = [], paths = [];\r\n                return (function derez(value, path) {\r\n                    var i, name, nu;\r\n                    switch (typeof value) {\r\n                        case 'object':\r\n                            if (!value) {\r\n                                return null;\r\n                            }\r\n                            for (i = 0; i < objects.length; i += 1) {\r\n                                if (objects[i] === value) {\r\n                                    return { $ref: paths[i] };\r\n                                }\r\n                            }\r\n                            objects.push(value);\r\n                            paths.push(path);\r\n                            if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n                                nu = [];\r\n                                for (i = 0; i < value.length; i += 1) {\r\n                                    nu[i] = derez(value[i], path + '[' + i + ']');\r\n                                }\r\n                            }\r\n                            else {\r\n                                nu = {};\r\n                                for (name in value) {\r\n                                    if (Object.prototype.hasOwnProperty.call(value, name)) {\r\n                                        nu[name] = derez(value[name], path + '[' + JSON.stringify(name) + ']');\r\n                                    }\r\n                                }\r\n                            }\r\n                            return nu;\r\n                        case 'number':\r\n                        case 'string':\r\n                        case 'boolean':\r\n                            return value;\r\n                    }\r\n                }(object, '$'));\r\n            }\r\n            exports.decycleObject = decycleObject;\r\n            function safeJSONStringify(source) {\r\n                try {\r\n                    return JSON.stringify(source);\r\n                }\r\n                catch (e) {\r\n                    return JSON.stringify(decycleObject(source));\r\n                }\r\n            }\r\n            exports.safeJSONStringify = safeJSONStringify;\r\n            /***/ \r\n        }),\r\n        /* 10 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            function encode(s) {\r\n                return btoa(utob(s));\r\n            }\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = encode;\r\n            var fromCharCode = String.fromCharCode;\r\n            var b64chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n            var b64tab = {};\r\n            for (var i = 0, l = b64chars.length; i < l; i++) {\r\n                b64tab[b64chars.charAt(i)] = i;\r\n            }\r\n            var cb_utob = function (c) {\r\n                var cc = c.charCodeAt(0);\r\n                return cc < 0x80 ? c\r\n                    : cc < 0x800 ? fromCharCode(0xc0 | (cc >>> 6)) +\r\n                        fromCharCode(0x80 | (cc & 0x3f))\r\n                        : fromCharCode(0xe0 | ((cc >>> 12) & 0x0f)) +\r\n                            fromCharCode(0x80 | ((cc >>> 6) & 0x3f)) +\r\n                            fromCharCode(0x80 | (cc & 0x3f));\r\n            };\r\n            var utob = function (u) {\r\n                return u.replace(/[^\\x00-\\x7F]/g, cb_utob);\r\n            };\r\n            var cb_encode = function (ccc) {\r\n                var padlen = [0, 2, 1][ccc.length % 3];\r\n                var ord = ccc.charCodeAt(0) << 16\r\n                    | ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8)\r\n                    | ((ccc.length > 2 ? ccc.charCodeAt(2) : 0));\r\n                var chars = [\r\n                    b64chars.charAt(ord >>> 18),\r\n                    b64chars.charAt((ord >>> 12) & 63),\r\n                    padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),\r\n                    padlen >= 1 ? '=' : b64chars.charAt(ord & 63)\r\n                ];\r\n                return chars.join('');\r\n            };\r\n            var btoa = (window).btoa || function (b) {\r\n                return b.replace(/[\\s\\S]{1,3}/g, cb_encode);\r\n            };\r\n            /***/ \r\n        }),\r\n        /* 11 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var timers_1 = __webpack_require__(12);\r\n            var Util = {\r\n                now: function () {\r\n                    if (Date.now) {\r\n                        return Date.now();\r\n                    }\r\n                    else {\r\n                        return new Date().valueOf();\r\n                    }\r\n                },\r\n                defer: function (callback) {\r\n                    return new timers_1.OneOffTimer(0, callback);\r\n                },\r\n                method: function (name) {\r\n                    var args = [];\r\n                    for (var _i = 1; _i < arguments.length; _i++) {\r\n                        args[_i - 1] = arguments[_i];\r\n                    }\r\n                    var boundArguments = Array.prototype.slice.call(arguments, 1);\r\n                    return function (object) {\r\n                        return object[name].apply(object, boundArguments.concat(arguments));\r\n                    };\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Util;\r\n            /***/ \r\n        }),\r\n        /* 12 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var abstract_timer_1 = __webpack_require__(13);\r\n            function clearTimeout(timer) {\r\n                (window).clearTimeout(timer);\r\n            }\r\n            function clearInterval(timer) {\r\n                (window).clearInterval(timer);\r\n            }\r\n            var OneOffTimer = (function (_super) {\r\n                __extends(OneOffTimer, _super);\r\n                function OneOffTimer(delay, callback) {\r\n                    _super.call(this, setTimeout, clearTimeout, delay, function (timer) {\r\n                        callback();\r\n                        return null;\r\n                    });\r\n                }\r\n                return OneOffTimer;\r\n            }(abstract_timer_1[\"default\"]));\r\n            exports.OneOffTimer = OneOffTimer;\r\n            var PeriodicTimer = (function (_super) {\r\n                __extends(PeriodicTimer, _super);\r\n                function PeriodicTimer(delay, callback) {\r\n                    _super.call(this, setInterval, clearInterval, delay, function (timer) {\r\n                        callback();\r\n                        return timer;\r\n                    });\r\n                }\r\n                return PeriodicTimer;\r\n            }(abstract_timer_1[\"default\"]));\r\n            exports.PeriodicTimer = PeriodicTimer;\r\n            /***/ \r\n        }),\r\n        /* 13 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var Timer = (function () {\r\n                function Timer(set, clear, delay, callback) {\r\n                    var _this = this;\r\n                    this.clear = clear;\r\n                    this.timer = set(function () {\r\n                        if (_this.timer) {\r\n                            _this.timer = callback(_this.timer);\r\n                        }\r\n                    }, delay);\r\n                }\r\n                Timer.prototype.isRunning = function () {\r\n                    return this.timer !== null;\r\n                };\r\n                Timer.prototype.ensureAborted = function () {\r\n                    if (this.timer) {\r\n                        this.clear(this.timer);\r\n                        this.timer = null;\r\n                    }\r\n                };\r\n                return Timer;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Timer;\r\n            /***/ \r\n        }),\r\n        /* 14 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var urlStore = {\r\n                baseUrl: \"https://pusher.com\",\r\n                urls: {\r\n                    authenticationEndpoint: {\r\n                        path: \"/docs/authenticating_users\"\r\n                    },\r\n                    javascriptQuickStart: {\r\n                        path: \"/docs/javascript_quick_start\"\r\n                    },\r\n                    triggeringClientEvents: {\r\n                        path: \"/docs/client_api_guide/client_events#trigger-events\"\r\n                    }\r\n                }\r\n            };\r\n            var buildLogSuffix = function (key) {\r\n                var urlPrefix = \"See:\";\r\n                var urlObj = urlStore.urls[key];\r\n                if (!urlObj)\r\n                    return \"\";\r\n                var url;\r\n                if (urlObj.fullUrl) {\r\n                    url = urlObj.fullUrl;\r\n                }\r\n                else if (urlObj.path) {\r\n                    url = urlStore.baseUrl + urlObj.path;\r\n                }\r\n                if (!url)\r\n                    return \"\";\r\n                return urlPrefix + \" \" + url;\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = { buildLogSuffix: buildLogSuffix };\r\n            /***/ \r\n        }),\r\n        /* 15 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var logger_1 = __webpack_require__(8);\r\n            var jsonp = function (context, socketId, callback) {\r\n                if (this.authOptions.headers !== undefined) {\r\n                    logger_1[\"default\"].warn(\"Warn\", \"To send headers with the auth request, you must use AJAX, rather than JSONP.\");\r\n                }\r\n                var callbackName = context.nextAuthCallbackID.toString();\r\n                context.nextAuthCallbackID++;\r\n                var document = context.getDocument();\r\n                var script = document.createElement(\"script\");\r\n                context.auth_callbacks[callbackName] = function (data) {\r\n                    callback(false, data);\r\n                };\r\n                var callback_name = \"Pusher.auth_callbacks['\" + callbackName + \"']\";\r\n                script.src = this.options.authEndpoint +\r\n                    '?callback=' +\r\n                    encodeURIComponent(callback_name) +\r\n                    '&' +\r\n                    this.composeQuery(socketId);\r\n                var head = document.getElementsByTagName(\"head\")[0] || document.documentElement;\r\n                head.insertBefore(script, head.firstChild);\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = jsonp;\r\n            /***/ \r\n        }),\r\n        /* 16 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var ScriptRequest = (function () {\r\n                function ScriptRequest(src) {\r\n                    this.src = src;\r\n                }\r\n                ScriptRequest.prototype.send = function (receiver) {\r\n                    var self = this;\r\n                    var errorString = \"Error loading \" + self.src;\r\n                    self.script = document.createElement(\"script\");\r\n                    self.script.id = receiver.id;\r\n                    self.script.src = self.src;\r\n                    self.script.type = \"text/javascript\";\r\n                    self.script.charset = \"UTF-8\";\r\n                    if (self.script.addEventListener) {\r\n                        self.script.onerror = function () {\r\n                            receiver.callback(errorString);\r\n                        };\r\n                        self.script.onload = function () {\r\n                            receiver.callback(null);\r\n                        };\r\n                    }\r\n                    else {\r\n                        self.script.onreadystatechange = function () {\r\n                            if (self.script.readyState === 'loaded' ||\r\n                                self.script.readyState === 'complete') {\r\n                                receiver.callback(null);\r\n                            }\r\n                        };\r\n                    }\r\n                    if (self.script.async === undefined && document.attachEvent &&\r\n                        /opera/i.test(navigator.userAgent)) {\r\n                        self.errorScript = document.createElement(\"script\");\r\n                        self.errorScript.id = receiver.id + \"_error\";\r\n                        self.errorScript.text = receiver.name + \"('\" + errorString + \"');\";\r\n                        self.script.async = self.errorScript.async = false;\r\n                    }\r\n                    else {\r\n                        self.script.async = true;\r\n                    }\r\n                    var head = document.getElementsByTagName('head')[0];\r\n                    head.insertBefore(self.script, head.firstChild);\r\n                    if (self.errorScript) {\r\n                        head.insertBefore(self.errorScript, self.script.nextSibling);\r\n                    }\r\n                };\r\n                ScriptRequest.prototype.cleanup = function () {\r\n                    if (this.script) {\r\n                        this.script.onload = this.script.onerror = null;\r\n                        this.script.onreadystatechange = null;\r\n                    }\r\n                    if (this.script && this.script.parentNode) {\r\n                        this.script.parentNode.removeChild(this.script);\r\n                    }\r\n                    if (this.errorScript && this.errorScript.parentNode) {\r\n                        this.errorScript.parentNode.removeChild(this.errorScript);\r\n                    }\r\n                    this.script = null;\r\n                    this.errorScript = null;\r\n                };\r\n                return ScriptRequest;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = ScriptRequest;\r\n            /***/ \r\n        }),\r\n        /* 17 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var JSONPRequest = (function () {\r\n                function JSONPRequest(url, data) {\r\n                    this.url = url;\r\n                    this.data = data;\r\n                }\r\n                JSONPRequest.prototype.send = function (receiver) {\r\n                    if (this.request) {\r\n                        return;\r\n                    }\r\n                    var query = Collections.buildQueryString(this.data);\r\n                    var url = this.url + \"/\" + receiver.number + \"?\" + query;\r\n                    this.request = runtime_1[\"default\"].createScriptRequest(url);\r\n                    this.request.send(receiver);\r\n                };\r\n                JSONPRequest.prototype.cleanup = function () {\r\n                    if (this.request) {\r\n                        this.request.cleanup();\r\n                    }\r\n                };\r\n                return JSONPRequest;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = JSONPRequest;\r\n            /***/ \r\n        }),\r\n        /* 18 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var runtime_1 = __webpack_require__(2);\r\n            var script_receiver_factory_1 = __webpack_require__(4);\r\n            var getAgent = function (sender, useTLS) {\r\n                return function (data, callback) {\r\n                    var scheme = \"http\" + (useTLS ? \"s\" : \"\") + \"://\";\r\n                    var url = scheme + (sender.host || sender.options.host) + sender.options.path;\r\n                    var request = runtime_1[\"default\"].createJSONPRequest(url, data);\r\n                    var receiver = runtime_1[\"default\"].ScriptReceivers.create(function (error, result) {\r\n                        script_receiver_factory_1.ScriptReceivers.remove(receiver);\r\n                        request.cleanup();\r\n                        if (result && result.host) {\r\n                            sender.host = result.host;\r\n                        }\r\n                        if (callback) {\r\n                            callback(error, result);\r\n                        }\r\n                    });\r\n                    request.send(receiver);\r\n                };\r\n            };\r\n            var jsonp = {\r\n                name: 'jsonp',\r\n                getAgent: getAgent\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = jsonp;\r\n            /***/ \r\n        }),\r\n        /* 19 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var transports_1 = __webpack_require__(20);\r\n            var transport_1 = __webpack_require__(22);\r\n            var URLSchemes = __webpack_require__(21);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var dependencies_1 = __webpack_require__(3);\r\n            var Collections = __webpack_require__(9);\r\n            var SockJSTransport = new transport_1[\"default\"]({\r\n                file: \"sockjs\",\r\n                urls: URLSchemes.sockjs,\r\n                handlesActivityChecks: true,\r\n                supportsPing: false,\r\n                isSupported: function () {\r\n                    return true;\r\n                },\r\n                isInitialized: function () {\r\n                    return window.SockJS !== undefined;\r\n                },\r\n                getSocket: function (url, options) {\r\n                    return new window.SockJS(url, null, {\r\n                        js_path: dependencies_1.Dependencies.getPath(\"sockjs\", {\r\n                            useTLS: options.useTLS\r\n                        }),\r\n                        ignore_null_origin: options.ignoreNullOrigin\r\n                    });\r\n                },\r\n                beforeOpen: function (socket, path) {\r\n                    socket.send(JSON.stringify({\r\n                        path: path\r\n                    }));\r\n                }\r\n            });\r\n            var xdrConfiguration = {\r\n                isSupported: function (environment) {\r\n                    var yes = runtime_1[\"default\"].isXDRSupported(environment.useTLS);\r\n                    return yes;\r\n                }\r\n            };\r\n            var XDRStreamingTransport = new transport_1[\"default\"](Collections.extend({}, transports_1.streamingConfiguration, xdrConfiguration));\r\n            var XDRPollingTransport = new transport_1[\"default\"](Collections.extend({}, transports_1.pollingConfiguration, xdrConfiguration));\r\n            transports_1[\"default\"].xdr_streaming = XDRStreamingTransport;\r\n            transports_1[\"default\"].xdr_polling = XDRPollingTransport;\r\n            transports_1[\"default\"].sockjs = SockJSTransport;\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = transports_1[\"default\"];\r\n            /***/ \r\n        }),\r\n        /* 20 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var URLSchemes = __webpack_require__(21);\r\n            var transport_1 = __webpack_require__(22);\r\n            var Collections = __webpack_require__(9);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var WSTransport = new transport_1[\"default\"]({\r\n                urls: URLSchemes.ws,\r\n                handlesActivityChecks: false,\r\n                supportsPing: false,\r\n                isInitialized: function () {\r\n                    return Boolean(runtime_1[\"default\"].getWebSocketAPI());\r\n                },\r\n                isSupported: function () {\r\n                    return Boolean(runtime_1[\"default\"].getWebSocketAPI());\r\n                },\r\n                getSocket: function (url) {\r\n                    return runtime_1[\"default\"].createWebSocket(url);\r\n                }\r\n            });\r\n            var httpConfiguration = {\r\n                urls: URLSchemes.http,\r\n                handlesActivityChecks: false,\r\n                supportsPing: true,\r\n                isInitialized: function () {\r\n                    return true;\r\n                }\r\n            };\r\n            exports.streamingConfiguration = Collections.extend({ getSocket: function (url) {\r\n                    return runtime_1[\"default\"].HTTPFactory.createStreamingSocket(url);\r\n                }\r\n            }, httpConfiguration);\r\n            exports.pollingConfiguration = Collections.extend({ getSocket: function (url) {\r\n                    return runtime_1[\"default\"].HTTPFactory.createPollingSocket(url);\r\n                }\r\n            }, httpConfiguration);\r\n            var xhrConfiguration = {\r\n                isSupported: function () {\r\n                    return runtime_1[\"default\"].isXHRSupported();\r\n                }\r\n            };\r\n            var XHRStreamingTransport = new transport_1[\"default\"](Collections.extend({}, exports.streamingConfiguration, xhrConfiguration));\r\n            var XHRPollingTransport = new transport_1[\"default\"](Collections.extend({}, exports.pollingConfiguration, xhrConfiguration));\r\n            var Transports = {\r\n                ws: WSTransport,\r\n                xhr_streaming: XHRStreamingTransport,\r\n                xhr_polling: XHRPollingTransport\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Transports;\r\n            /***/ \r\n        }),\r\n        /* 21 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var defaults_1 = __webpack_require__(5);\r\n            function getGenericURL(baseScheme, params, path) {\r\n                var scheme = baseScheme + (params.useTLS ? \"s\" : \"\");\r\n                var host = params.useTLS ? params.hostTLS : params.hostNonTLS;\r\n                return scheme + \"://\" + host + path;\r\n            }\r\n            function getGenericPath(key, queryString) {\r\n                var path = \"/app/\" + key;\r\n                var query = \"?protocol=\" + defaults_1[\"default\"].PROTOCOL +\r\n                    \"&client=js\" +\r\n                    \"&version=\" + defaults_1[\"default\"].VERSION +\r\n                    (queryString ? (\"&\" + queryString) : \"\");\r\n                return path + query;\r\n            }\r\n            exports.ws = {\r\n                getInitial: function (key, params) {\r\n                    var path = (params.httpPath || \"\") + getGenericPath(key, \"flash=false\");\r\n                    return getGenericURL(\"ws\", params, path);\r\n                }\r\n            };\r\n            exports.http = {\r\n                getInitial: function (key, params) {\r\n                    var path = (params.httpPath || \"/pusher\") + getGenericPath(key);\r\n                    return getGenericURL(\"http\", params, path);\r\n                }\r\n            };\r\n            exports.sockjs = {\r\n                getInitial: function (key, params) {\r\n                    return getGenericURL(\"http\", params, params.httpPath || \"/pusher\");\r\n                },\r\n                getPath: function (key, params) {\r\n                    return getGenericPath(key);\r\n                }\r\n            };\r\n            /***/ \r\n        }),\r\n        /* 22 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var transport_connection_1 = __webpack_require__(23);\r\n            var Transport = (function () {\r\n                function Transport(hooks) {\r\n                    this.hooks = hooks;\r\n                }\r\n                Transport.prototype.isSupported = function (environment) {\r\n                    return this.hooks.isSupported(environment);\r\n                };\r\n                Transport.prototype.createConnection = function (name, priority, key, options) {\r\n                    return new transport_connection_1[\"default\"](this.hooks, name, priority, key, options);\r\n                };\r\n                return Transport;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Transport;\r\n            /***/ \r\n        }),\r\n        /* 23 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var util_1 = __webpack_require__(11);\r\n            var Collections = __webpack_require__(9);\r\n            var dispatcher_1 = __webpack_require__(24);\r\n            var logger_1 = __webpack_require__(8);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var TransportConnection = (function (_super) {\r\n                __extends(TransportConnection, _super);\r\n                function TransportConnection(hooks, name, priority, key, options) {\r\n                    _super.call(this);\r\n                    this.initialize = runtime_1[\"default\"].transportConnectionInitializer;\r\n                    this.hooks = hooks;\r\n                    this.name = name;\r\n                    this.priority = priority;\r\n                    this.key = key;\r\n                    this.options = options;\r\n                    this.state = \"new\";\r\n                    this.timeline = options.timeline;\r\n                    this.activityTimeout = options.activityTimeout;\r\n                    this.id = this.timeline.generateUniqueID();\r\n                }\r\n                TransportConnection.prototype.handlesActivityChecks = function () {\r\n                    return Boolean(this.hooks.handlesActivityChecks);\r\n                };\r\n                TransportConnection.prototype.supportsPing = function () {\r\n                    return Boolean(this.hooks.supportsPing);\r\n                };\r\n                TransportConnection.prototype.connect = function () {\r\n                    var _this = this;\r\n                    if (this.socket || this.state !== \"initialized\") {\r\n                        return false;\r\n                    }\r\n                    var url = this.hooks.urls.getInitial(this.key, this.options);\r\n                    try {\r\n                        this.socket = this.hooks.getSocket(url, this.options);\r\n                    }\r\n                    catch (e) {\r\n                        util_1[\"default\"].defer(function () {\r\n                            _this.onError(e);\r\n                            _this.changeState(\"closed\");\r\n                        });\r\n                        return false;\r\n                    }\r\n                    this.bindListeners();\r\n                    logger_1[\"default\"].debug(\"Connecting\", { transport: this.name, url: url });\r\n                    this.changeState(\"connecting\");\r\n                    return true;\r\n                };\r\n                TransportConnection.prototype.close = function () {\r\n                    if (this.socket) {\r\n                        this.socket.close();\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                };\r\n                TransportConnection.prototype.send = function (data) {\r\n                    var _this = this;\r\n                    if (this.state === \"open\") {\r\n                        util_1[\"default\"].defer(function () {\r\n                            if (_this.socket) {\r\n                                _this.socket.send(data);\r\n                            }\r\n                        });\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                };\r\n                TransportConnection.prototype.ping = function () {\r\n                    if (this.state === \"open\" && this.supportsPing()) {\r\n                        this.socket.ping();\r\n                    }\r\n                };\r\n                TransportConnection.prototype.onOpen = function () {\r\n                    if (this.hooks.beforeOpen) {\r\n                        this.hooks.beforeOpen(this.socket, this.hooks.urls.getPath(this.key, this.options));\r\n                    }\r\n                    this.changeState(\"open\");\r\n                    this.socket.onopen = undefined;\r\n                };\r\n                TransportConnection.prototype.onError = function (error) {\r\n                    this.emit(\"error\", { type: 'WebSocketError', error: error });\r\n                    this.timeline.error(this.buildTimelineMessage({ error: error.toString() }));\r\n                };\r\n                TransportConnection.prototype.onClose = function (closeEvent) {\r\n                    if (closeEvent) {\r\n                        this.changeState(\"closed\", {\r\n                            code: closeEvent.code,\r\n                            reason: closeEvent.reason,\r\n                            wasClean: closeEvent.wasClean\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.changeState(\"closed\");\r\n                    }\r\n                    this.unbindListeners();\r\n                    this.socket = undefined;\r\n                };\r\n                TransportConnection.prototype.onMessage = function (message) {\r\n                    this.emit(\"message\", message);\r\n                };\r\n                TransportConnection.prototype.onActivity = function () {\r\n                    this.emit(\"activity\");\r\n                };\r\n                TransportConnection.prototype.bindListeners = function () {\r\n                    var _this = this;\r\n                    this.socket.onopen = function () {\r\n                        _this.onOpen();\r\n                    };\r\n                    this.socket.onerror = function (error) {\r\n                        _this.onError(error);\r\n                    };\r\n                    this.socket.onclose = function (closeEvent) {\r\n                        _this.onClose(closeEvent);\r\n                    };\r\n                    this.socket.onmessage = function (message) {\r\n                        _this.onMessage(message);\r\n                    };\r\n                    if (this.supportsPing()) {\r\n                        this.socket.onactivity = function () { _this.onActivity(); };\r\n                    }\r\n                };\r\n                TransportConnection.prototype.unbindListeners = function () {\r\n                    if (this.socket) {\r\n                        this.socket.onopen = undefined;\r\n                        this.socket.onerror = undefined;\r\n                        this.socket.onclose = undefined;\r\n                        this.socket.onmessage = undefined;\r\n                        if (this.supportsPing()) {\r\n                            this.socket.onactivity = undefined;\r\n                        }\r\n                    }\r\n                };\r\n                TransportConnection.prototype.changeState = function (state, params) {\r\n                    this.state = state;\r\n                    this.timeline.info(this.buildTimelineMessage({\r\n                        state: state,\r\n                        params: params\r\n                    }));\r\n                    this.emit(state, params);\r\n                };\r\n                TransportConnection.prototype.buildTimelineMessage = function (message) {\r\n                    return Collections.extend({ cid: this.id }, message);\r\n                };\r\n                return TransportConnection;\r\n            }(dispatcher_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = TransportConnection;\r\n            /***/ \r\n        }),\r\n        /* 24 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var callback_registry_1 = __webpack_require__(25);\r\n            var Dispatcher = (function () {\r\n                function Dispatcher(failThrough) {\r\n                    this.callbacks = new callback_registry_1[\"default\"]();\r\n                    this.global_callbacks = [];\r\n                    this.failThrough = failThrough;\r\n                }\r\n                Dispatcher.prototype.bind = function (eventName, callback, context) {\r\n                    this.callbacks.add(eventName, callback, context);\r\n                    return this;\r\n                };\r\n                Dispatcher.prototype.bind_global = function (callback) {\r\n                    this.global_callbacks.push(callback);\r\n                    return this;\r\n                };\r\n                Dispatcher.prototype.unbind = function (eventName, callback, context) {\r\n                    this.callbacks.remove(eventName, callback, context);\r\n                    return this;\r\n                };\r\n                Dispatcher.prototype.unbind_global = function (callback) {\r\n                    if (!callback) {\r\n                        this.global_callbacks = [];\r\n                        return this;\r\n                    }\r\n                    this.global_callbacks = Collections.filter(this.global_callbacks || [], function (c) { return c !== callback; });\r\n                    return this;\r\n                };\r\n                Dispatcher.prototype.unbind_all = function () {\r\n                    this.unbind();\r\n                    this.unbind_global();\r\n                    return this;\r\n                };\r\n                Dispatcher.prototype.emit = function (eventName, data, metadata) {\r\n                    for (var i = 0; i < this.global_callbacks.length; i++) {\r\n                        this.global_callbacks[i](eventName, data);\r\n                    }\r\n                    var callbacks = this.callbacks.get(eventName);\r\n                    var args = [];\r\n                    if (metadata) {\r\n                        args.push(data, metadata);\r\n                    }\r\n                    else if (data) {\r\n                        args.push(data);\r\n                    }\r\n                    if (callbacks && callbacks.length > 0) {\r\n                        for (var i = 0; i < callbacks.length; i++) {\r\n                            callbacks[i].fn.apply(callbacks[i].context || (window), args);\r\n                        }\r\n                    }\r\n                    else if (this.failThrough) {\r\n                        this.failThrough(eventName, data);\r\n                    }\r\n                    return this;\r\n                };\r\n                return Dispatcher;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Dispatcher;\r\n            /***/ \r\n        }),\r\n        /* 25 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var CallbackRegistry = (function () {\r\n                function CallbackRegistry() {\r\n                    this._callbacks = {};\r\n                }\r\n                CallbackRegistry.prototype.get = function (name) {\r\n                    return this._callbacks[prefix(name)];\r\n                };\r\n                CallbackRegistry.prototype.add = function (name, callback, context) {\r\n                    var prefixedEventName = prefix(name);\r\n                    this._callbacks[prefixedEventName] = this._callbacks[prefixedEventName] || [];\r\n                    this._callbacks[prefixedEventName].push({\r\n                        fn: callback,\r\n                        context: context\r\n                    });\r\n                };\r\n                CallbackRegistry.prototype.remove = function (name, callback, context) {\r\n                    if (!name && !callback && !context) {\r\n                        this._callbacks = {};\r\n                        return;\r\n                    }\r\n                    var names = name ? [prefix(name)] : Collections.keys(this._callbacks);\r\n                    if (callback || context) {\r\n                        this.removeCallback(names, callback, context);\r\n                    }\r\n                    else {\r\n                        this.removeAllCallbacks(names);\r\n                    }\r\n                };\r\n                CallbackRegistry.prototype.removeCallback = function (names, callback, context) {\r\n                    Collections.apply(names, function (name) {\r\n                        this._callbacks[name] = Collections.filter(this._callbacks[name] || [], function (binding) {\r\n                            return (callback && callback !== binding.fn) ||\r\n                                (context && context !== binding.context);\r\n                        });\r\n                        if (this._callbacks[name].length === 0) {\r\n                            delete this._callbacks[name];\r\n                        }\r\n                    }, this);\r\n                };\r\n                CallbackRegistry.prototype.removeAllCallbacks = function (names) {\r\n                    Collections.apply(names, function (name) {\r\n                        delete this._callbacks[name];\r\n                    }, this);\r\n                };\r\n                return CallbackRegistry;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = CallbackRegistry;\r\n            function prefix(name) {\r\n                return \"_\" + name;\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 26 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var dispatcher_1 = __webpack_require__(24);\r\n            var NetInfo = (function (_super) {\r\n                __extends(NetInfo, _super);\r\n                function NetInfo() {\r\n                    _super.call(this);\r\n                    var self = this;\r\n                    if (window.addEventListener !== undefined) {\r\n                        window.addEventListener(\"online\", function () {\r\n                            self.emit('online');\r\n                        }, false);\r\n                        window.addEventListener(\"offline\", function () {\r\n                            self.emit('offline');\r\n                        }, false);\r\n                    }\r\n                }\r\n                NetInfo.prototype.isOnline = function () {\r\n                    if (window.navigator.onLine === undefined) {\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        return window.navigator.onLine;\r\n                    }\r\n                };\r\n                return NetInfo;\r\n            }(dispatcher_1[\"default\"]));\r\n            exports.NetInfo = NetInfo;\r\n            exports.Network = new NetInfo();\r\n            /***/ \r\n        }),\r\n        /* 27 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var getDefaultStrategy = function (config) {\r\n                var wsStrategy;\r\n                if (config.useTLS) {\r\n                    wsStrategy = [\r\n                        \":best_connected_ever\",\r\n                        \":ws_loop\",\r\n                        [\":delayed\", 2000, [\":http_fallback_loop\"]]\r\n                    ];\r\n                }\r\n                else {\r\n                    wsStrategy = [\r\n                        \":best_connected_ever\",\r\n                        \":ws_loop\",\r\n                        [\":delayed\", 2000, [\":wss_loop\"]],\r\n                        [\":delayed\", 5000, [\":http_fallback_loop\"]]\r\n                    ];\r\n                }\r\n                return [\r\n                    [\":def\", \"ws_options\", {\r\n                            hostNonTLS: config.wsHost + \":\" + config.wsPort,\r\n                            hostTLS: config.wsHost + \":\" + config.wssPort,\r\n                            httpPath: config.wsPath\r\n                        }],\r\n                    [\":def\", \"wss_options\", [\":extend\", \":ws_options\", {\r\n                                useTLS: true\r\n                            }]],\r\n                    [\":def\", \"sockjs_options\", {\r\n                            hostNonTLS: config.httpHost + \":\" + config.httpPort,\r\n                            hostTLS: config.httpHost + \":\" + config.httpsPort,\r\n                            httpPath: config.httpPath\r\n                        }],\r\n                    [\":def\", \"timeouts\", {\r\n                            loop: true,\r\n                            timeout: 15000,\r\n                            timeoutLimit: 60000\r\n                        }],\r\n                    [\":def\", \"ws_manager\", [\":transport_manager\", {\r\n                                lives: 2,\r\n                                minPingDelay: 10000,\r\n                                maxPingDelay: config.activity_timeout\r\n                            }]],\r\n                    [\":def\", \"streaming_manager\", [\":transport_manager\", {\r\n                                lives: 2,\r\n                                minPingDelay: 10000,\r\n                                maxPingDelay: config.activity_timeout\r\n                            }]],\r\n                    [\":def_transport\", \"ws\", \"ws\", 3, \":ws_options\", \":ws_manager\"],\r\n                    [\":def_transport\", \"wss\", \"ws\", 3, \":wss_options\", \":ws_manager\"],\r\n                    [\":def_transport\", \"sockjs\", \"sockjs\", 1, \":sockjs_options\"],\r\n                    [\":def_transport\", \"xhr_streaming\", \"xhr_streaming\", 1, \":sockjs_options\", \":streaming_manager\"],\r\n                    [\":def_transport\", \"xdr_streaming\", \"xdr_streaming\", 1, \":sockjs_options\", \":streaming_manager\"],\r\n                    [\":def_transport\", \"xhr_polling\", \"xhr_polling\", 1, \":sockjs_options\"],\r\n                    [\":def_transport\", \"xdr_polling\", \"xdr_polling\", 1, \":sockjs_options\"],\r\n                    [\":def\", \"ws_loop\", [\":sequential\", \":timeouts\", \":ws\"]],\r\n                    [\":def\", \"wss_loop\", [\":sequential\", \":timeouts\", \":wss\"]],\r\n                    [\":def\", \"sockjs_loop\", [\":sequential\", \":timeouts\", \":sockjs\"]],\r\n                    [\":def\", \"streaming_loop\", [\":sequential\", \":timeouts\",\r\n                            [\":if\", [\":is_supported\", \":xhr_streaming\"],\r\n                                \":xhr_streaming\",\r\n                                \":xdr_streaming\"\r\n                            ]\r\n                        ]],\r\n                    [\":def\", \"polling_loop\", [\":sequential\", \":timeouts\",\r\n                            [\":if\", [\":is_supported\", \":xhr_polling\"],\r\n                                \":xhr_polling\",\r\n                                \":xdr_polling\"\r\n                            ]\r\n                        ]],\r\n                    [\":def\", \"http_loop\", [\":if\", [\":is_supported\", \":streaming_loop\"], [\r\n                                \":best_connected_ever\",\r\n                                \":streaming_loop\",\r\n                                [\":delayed\", 4000, [\":polling_loop\"]]\r\n                            ], [\r\n                                \":polling_loop\"\r\n                            ]]],\r\n                    [\":def\", \"http_fallback_loop\",\r\n                        [\":if\", [\":is_supported\", \":http_loop\"], [\r\n                                \":http_loop\"\r\n                            ], [\r\n                                \":sockjs_loop\"\r\n                            ]]\r\n                    ],\r\n                    [\":def\", \"strategy\",\r\n                        [\":cached\", 1800000,\r\n                            [\":first_connected\",\r\n                                [\":if\", [\":is_supported\", \":ws\"],\r\n                                    wsStrategy,\r\n                                    \":http_fallback_loop\"\r\n                                ]\r\n                            ]\r\n                        ]\r\n                    ]\r\n                ];\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = getDefaultStrategy;\r\n            /***/ \r\n        }),\r\n        /* 28 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var dependencies_1 = __webpack_require__(3);\r\n            function default_1() {\r\n                var self = this;\r\n                self.timeline.info(self.buildTimelineMessage({\r\n                    transport: self.name + (self.options.useTLS ? \"s\" : \"\")\r\n                }));\r\n                if (self.hooks.isInitialized()) {\r\n                    self.changeState(\"initialized\");\r\n                }\r\n                else if (self.hooks.file) {\r\n                    self.changeState(\"initializing\");\r\n                    dependencies_1.Dependencies.load(self.hooks.file, { useTLS: self.options.useTLS }, function (error, callback) {\r\n                        if (self.hooks.isInitialized()) {\r\n                            self.changeState(\"initialized\");\r\n                            callback(true);\r\n                        }\r\n                        else {\r\n                            if (error) {\r\n                                self.onError(error);\r\n                            }\r\n                            self.onClose();\r\n                            callback(false);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    self.onClose();\r\n                }\r\n            }\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = default_1;\r\n            /***/ \r\n        }),\r\n        /* 29 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var http_xdomain_request_1 = __webpack_require__(30);\r\n            var http_1 = __webpack_require__(32);\r\n            http_1[\"default\"].createXDR = function (method, url) {\r\n                return this.createRequest(http_xdomain_request_1[\"default\"], method, url);\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = http_1[\"default\"];\r\n            /***/ \r\n        }),\r\n        /* 30 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Errors = __webpack_require__(31);\r\n            var hooks = {\r\n                getRequest: function (socket) {\r\n                    var xdr = new window.XDomainRequest();\r\n                    xdr.ontimeout = function () {\r\n                        socket.emit(\"error\", new Errors.RequestTimedOut());\r\n                        socket.close();\r\n                    };\r\n                    xdr.onerror = function (e) {\r\n                        socket.emit(\"error\", e);\r\n                        socket.close();\r\n                    };\r\n                    xdr.onprogress = function () {\r\n                        if (xdr.responseText && xdr.responseText.length > 0) {\r\n                            socket.onChunk(200, xdr.responseText);\r\n                        }\r\n                    };\r\n                    xdr.onload = function () {\r\n                        if (xdr.responseText && xdr.responseText.length > 0) {\r\n                            socket.onChunk(200, xdr.responseText);\r\n                        }\r\n                        socket.emit(\"finished\", 200);\r\n                        socket.close();\r\n                    };\r\n                    return xdr;\r\n                },\r\n                abortRequest: function (xdr) {\r\n                    xdr.ontimeout = xdr.onerror = xdr.onprogress = xdr.onload = null;\r\n                    xdr.abort();\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = hooks;\r\n            /***/ \r\n        }),\r\n        /* 31 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var BadEventName = (function (_super) {\r\n                __extends(BadEventName, _super);\r\n                function BadEventName() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                return BadEventName;\r\n            }(Error));\r\n            exports.BadEventName = BadEventName;\r\n            var RequestTimedOut = (function (_super) {\r\n                __extends(RequestTimedOut, _super);\r\n                function RequestTimedOut() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                return RequestTimedOut;\r\n            }(Error));\r\n            exports.RequestTimedOut = RequestTimedOut;\r\n            var TransportPriorityTooLow = (function (_super) {\r\n                __extends(TransportPriorityTooLow, _super);\r\n                function TransportPriorityTooLow() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                return TransportPriorityTooLow;\r\n            }(Error));\r\n            exports.TransportPriorityTooLow = TransportPriorityTooLow;\r\n            var TransportClosed = (function (_super) {\r\n                __extends(TransportClosed, _super);\r\n                function TransportClosed() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                return TransportClosed;\r\n            }(Error));\r\n            exports.TransportClosed = TransportClosed;\r\n            var UnsupportedFeature = (function (_super) {\r\n                __extends(UnsupportedFeature, _super);\r\n                function UnsupportedFeature() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                return UnsupportedFeature;\r\n            }(Error));\r\n            exports.UnsupportedFeature = UnsupportedFeature;\r\n            var UnsupportedTransport = (function (_super) {\r\n                __extends(UnsupportedTransport, _super);\r\n                function UnsupportedTransport() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                return UnsupportedTransport;\r\n            }(Error));\r\n            exports.UnsupportedTransport = UnsupportedTransport;\r\n            var UnsupportedStrategy = (function (_super) {\r\n                __extends(UnsupportedStrategy, _super);\r\n                function UnsupportedStrategy() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                return UnsupportedStrategy;\r\n            }(Error));\r\n            exports.UnsupportedStrategy = UnsupportedStrategy;\r\n            /***/ \r\n        }),\r\n        /* 32 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var http_request_1 = __webpack_require__(33);\r\n            var http_socket_1 = __webpack_require__(34);\r\n            var http_streaming_socket_1 = __webpack_require__(36);\r\n            var http_polling_socket_1 = __webpack_require__(37);\r\n            var http_xhr_request_1 = __webpack_require__(38);\r\n            var HTTP = {\r\n                createStreamingSocket: function (url) {\r\n                    return this.createSocket(http_streaming_socket_1[\"default\"], url);\r\n                },\r\n                createPollingSocket: function (url) {\r\n                    return this.createSocket(http_polling_socket_1[\"default\"], url);\r\n                },\r\n                createSocket: function (hooks, url) {\r\n                    return new http_socket_1[\"default\"](hooks, url);\r\n                },\r\n                createXHR: function (method, url) {\r\n                    return this.createRequest(http_xhr_request_1[\"default\"], method, url);\r\n                },\r\n                createRequest: function (hooks, method, url) {\r\n                    return new http_request_1[\"default\"](hooks, method, url);\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = HTTP;\r\n            /***/ \r\n        }),\r\n        /* 33 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var runtime_1 = __webpack_require__(2);\r\n            var dispatcher_1 = __webpack_require__(24);\r\n            var MAX_BUFFER_LENGTH = 256 * 1024;\r\n            var HTTPRequest = (function (_super) {\r\n                __extends(HTTPRequest, _super);\r\n                function HTTPRequest(hooks, method, url) {\r\n                    _super.call(this);\r\n                    this.hooks = hooks;\r\n                    this.method = method;\r\n                    this.url = url;\r\n                }\r\n                HTTPRequest.prototype.start = function (payload) {\r\n                    var _this = this;\r\n                    this.position = 0;\r\n                    this.xhr = this.hooks.getRequest(this);\r\n                    this.unloader = function () {\r\n                        _this.close();\r\n                    };\r\n                    runtime_1[\"default\"].addUnloadListener(this.unloader);\r\n                    this.xhr.open(this.method, this.url, true);\r\n                    if (this.xhr.setRequestHeader) {\r\n                        this.xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n                    }\r\n                    this.xhr.send(payload);\r\n                };\r\n                HTTPRequest.prototype.close = function () {\r\n                    if (this.unloader) {\r\n                        runtime_1[\"default\"].removeUnloadListener(this.unloader);\r\n                        this.unloader = null;\r\n                    }\r\n                    if (this.xhr) {\r\n                        this.hooks.abortRequest(this.xhr);\r\n                        this.xhr = null;\r\n                    }\r\n                };\r\n                HTTPRequest.prototype.onChunk = function (status, data) {\r\n                    while (true) {\r\n                        var chunk = this.advanceBuffer(data);\r\n                        if (chunk) {\r\n                            this.emit(\"chunk\", { status: status, data: chunk });\r\n                        }\r\n                        else {\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (this.isBufferTooLong(data)) {\r\n                        this.emit(\"buffer_too_long\");\r\n                    }\r\n                };\r\n                HTTPRequest.prototype.advanceBuffer = function (buffer) {\r\n                    var unreadData = buffer.slice(this.position);\r\n                    var endOfLinePosition = unreadData.indexOf(\"\\n\");\r\n                    if (endOfLinePosition !== -1) {\r\n                        this.position += endOfLinePosition + 1;\r\n                        return unreadData.slice(0, endOfLinePosition);\r\n                    }\r\n                    else {\r\n                        return null;\r\n                    }\r\n                };\r\n                HTTPRequest.prototype.isBufferTooLong = function (buffer) {\r\n                    return this.position === buffer.length && buffer.length > MAX_BUFFER_LENGTH;\r\n                };\r\n                return HTTPRequest;\r\n            }(dispatcher_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = HTTPRequest;\r\n            /***/ \r\n        }),\r\n        /* 34 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var state_1 = __webpack_require__(35);\r\n            var util_1 = __webpack_require__(11);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var autoIncrement = 1;\r\n            var HTTPSocket = (function () {\r\n                function HTTPSocket(hooks, url) {\r\n                    this.hooks = hooks;\r\n                    this.session = randomNumber(1000) + \"/\" + randomString(8);\r\n                    this.location = getLocation(url);\r\n                    this.readyState = state_1[\"default\"].CONNECTING;\r\n                    this.openStream();\r\n                }\r\n                HTTPSocket.prototype.send = function (payload) {\r\n                    return this.sendRaw(JSON.stringify([payload]));\r\n                };\r\n                HTTPSocket.prototype.ping = function () {\r\n                    this.hooks.sendHeartbeat(this);\r\n                };\r\n                HTTPSocket.prototype.close = function (code, reason) {\r\n                    this.onClose(code, reason, true);\r\n                };\r\n                HTTPSocket.prototype.sendRaw = function (payload) {\r\n                    if (this.readyState === state_1[\"default\"].OPEN) {\r\n                        try {\r\n                            runtime_1[\"default\"].createSocketRequest(\"POST\", getUniqueURL(getSendURL(this.location, this.session))).start(payload);\r\n                            return true;\r\n                        }\r\n                        catch (e) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.reconnect = function () {\r\n                    this.closeStream();\r\n                    this.openStream();\r\n                };\r\n                ;\r\n                HTTPSocket.prototype.onClose = function (code, reason, wasClean) {\r\n                    this.closeStream();\r\n                    this.readyState = state_1[\"default\"].CLOSED;\r\n                    if (this.onclose) {\r\n                        this.onclose({\r\n                            code: code,\r\n                            reason: reason,\r\n                            wasClean: wasClean\r\n                        });\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.onChunk = function (chunk) {\r\n                    if (chunk.status !== 200) {\r\n                        return;\r\n                    }\r\n                    if (this.readyState === state_1[\"default\"].OPEN) {\r\n                        this.onActivity();\r\n                    }\r\n                    var payload;\r\n                    var type = chunk.data.slice(0, 1);\r\n                    switch (type) {\r\n                        case 'o':\r\n                            payload = JSON.parse(chunk.data.slice(1) || '{}');\r\n                            this.onOpen(payload);\r\n                            break;\r\n                        case 'a':\r\n                            payload = JSON.parse(chunk.data.slice(1) || '[]');\r\n                            for (var i = 0; i < payload.length; i++) {\r\n                                this.onEvent(payload[i]);\r\n                            }\r\n                            break;\r\n                        case 'm':\r\n                            payload = JSON.parse(chunk.data.slice(1) || 'null');\r\n                            this.onEvent(payload);\r\n                            break;\r\n                        case 'h':\r\n                            this.hooks.onHeartbeat(this);\r\n                            break;\r\n                        case 'c':\r\n                            payload = JSON.parse(chunk.data.slice(1) || '[]');\r\n                            this.onClose(payload[0], payload[1], true);\r\n                            break;\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.onOpen = function (options) {\r\n                    if (this.readyState === state_1[\"default\"].CONNECTING) {\r\n                        if (options && options.hostname) {\r\n                            this.location.base = replaceHost(this.location.base, options.hostname);\r\n                        }\r\n                        this.readyState = state_1[\"default\"].OPEN;\r\n                        if (this.onopen) {\r\n                            this.onopen();\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.onClose(1006, \"Server lost session\", true);\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.onEvent = function (event) {\r\n                    if (this.readyState === state_1[\"default\"].OPEN && this.onmessage) {\r\n                        this.onmessage({ data: event });\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.onActivity = function () {\r\n                    if (this.onactivity) {\r\n                        this.onactivity();\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.onError = function (error) {\r\n                    if (this.onerror) {\r\n                        this.onerror(error);\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.openStream = function () {\r\n                    var _this = this;\r\n                    this.stream = runtime_1[\"default\"].createSocketRequest(\"POST\", getUniqueURL(this.hooks.getReceiveURL(this.location, this.session)));\r\n                    this.stream.bind(\"chunk\", function (chunk) {\r\n                        _this.onChunk(chunk);\r\n                    });\r\n                    this.stream.bind(\"finished\", function (status) {\r\n                        _this.hooks.onFinished(_this, status);\r\n                    });\r\n                    this.stream.bind(\"buffer_too_long\", function () {\r\n                        _this.reconnect();\r\n                    });\r\n                    try {\r\n                        this.stream.start();\r\n                    }\r\n                    catch (error) {\r\n                        util_1[\"default\"].defer(function () {\r\n                            _this.onError(error);\r\n                            _this.onClose(1006, \"Could not start streaming\", false);\r\n                        });\r\n                    }\r\n                };\r\n                HTTPSocket.prototype.closeStream = function () {\r\n                    if (this.stream) {\r\n                        this.stream.unbind_all();\r\n                        this.stream.close();\r\n                        this.stream = null;\r\n                    }\r\n                };\r\n                return HTTPSocket;\r\n            }());\r\n            function getLocation(url) {\r\n                var parts = /([^\\?]*)\\/*(\\??.*)/.exec(url);\r\n                return {\r\n                    base: parts[1],\r\n                    queryString: parts[2]\r\n                };\r\n            }\r\n            function getSendURL(url, session) {\r\n                return url.base + \"/\" + session + \"/xhr_send\";\r\n            }\r\n            function getUniqueURL(url) {\r\n                var separator = (url.indexOf('?') === -1) ? \"?\" : \"&\";\r\n                return url + separator + \"t=\" + (+new Date()) + \"&n=\" + autoIncrement++;\r\n            }\r\n            function replaceHost(url, hostname) {\r\n                var urlParts = /(https?:\\/\\/)([^\\/:]+)((\\/|:)?.*)/.exec(url);\r\n                return urlParts[1] + hostname + urlParts[3];\r\n            }\r\n            function randomNumber(max) {\r\n                return Math.floor(Math.random() * max);\r\n            }\r\n            function randomString(length) {\r\n                var result = [];\r\n                for (var i = 0; i < length; i++) {\r\n                    result.push(randomNumber(32).toString(32));\r\n                }\r\n                return result.join('');\r\n            }\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = HTTPSocket;\r\n            /***/ \r\n        }),\r\n        /* 35 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var State = /*@__PURE__*/ (function (State) {\r\n                State[State[\"CONNECTING\"] = 0] = \"CONNECTING\";\r\n                State[State[\"OPEN\"] = 1] = \"OPEN\";\r\n                State[State[\"CLOSED\"] = 3] = \"CLOSED\";\r\n                return State;\r\n            })({});\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = State;\r\n            /***/ \r\n        }),\r\n        /* 36 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var hooks = {\r\n                getReceiveURL: function (url, session) {\r\n                    return url.base + \"/\" + session + \"/xhr_streaming\" + url.queryString;\r\n                },\r\n                onHeartbeat: function (socket) {\r\n                    socket.sendRaw(\"[]\");\r\n                },\r\n                sendHeartbeat: function (socket) {\r\n                    socket.sendRaw(\"[]\");\r\n                },\r\n                onFinished: function (socket, status) {\r\n                    socket.onClose(1006, \"Connection interrupted (\" + status + \")\", false);\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = hooks;\r\n            /***/ \r\n        }),\r\n        /* 37 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var hooks = {\r\n                getReceiveURL: function (url, session) {\r\n                    return url.base + \"/\" + session + \"/xhr\" + url.queryString;\r\n                },\r\n                onHeartbeat: function () {\r\n                },\r\n                sendHeartbeat: function (socket) {\r\n                    socket.sendRaw(\"[]\");\r\n                },\r\n                onFinished: function (socket, status) {\r\n                    if (status === 200) {\r\n                        socket.reconnect();\r\n                    }\r\n                    else {\r\n                        socket.onClose(1006, \"Connection interrupted (\" + status + \")\", false);\r\n                    }\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = hooks;\r\n            /***/ \r\n        }),\r\n        /* 38 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var runtime_1 = __webpack_require__(2);\r\n            var hooks = {\r\n                getRequest: function (socket) {\r\n                    var Constructor = runtime_1[\"default\"].getXHRAPI();\r\n                    var xhr = new Constructor();\r\n                    xhr.onreadystatechange = xhr.onprogress = function () {\r\n                        switch (xhr.readyState) {\r\n                            case 3:\r\n                                if (xhr.responseText && xhr.responseText.length > 0) {\r\n                                    socket.onChunk(xhr.status, xhr.responseText);\r\n                                }\r\n                                break;\r\n                            case 4:\r\n                                if (xhr.responseText && xhr.responseText.length > 0) {\r\n                                    socket.onChunk(xhr.status, xhr.responseText);\r\n                                }\r\n                                socket.emit(\"finished\", xhr.status);\r\n                                socket.close();\r\n                                break;\r\n                        }\r\n                    };\r\n                    return xhr;\r\n                },\r\n                abortRequest: function (xhr) {\r\n                    xhr.onreadystatechange = null;\r\n                    xhr.abort();\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = hooks;\r\n            /***/ \r\n        }),\r\n        /* 39 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var util_1 = __webpack_require__(11);\r\n            var level_1 = __webpack_require__(40);\r\n            var Timeline = (function () {\r\n                function Timeline(key, session, options) {\r\n                    this.key = key;\r\n                    this.session = session;\r\n                    this.events = [];\r\n                    this.options = options || {};\r\n                    this.sent = 0;\r\n                    this.uniqueID = 0;\r\n                }\r\n                Timeline.prototype.log = function (level, event) {\r\n                    if (level <= this.options.level) {\r\n                        this.events.push(Collections.extend({}, event, { timestamp: util_1[\"default\"].now() }));\r\n                        if (this.options.limit && this.events.length > this.options.limit) {\r\n                            this.events.shift();\r\n                        }\r\n                    }\r\n                };\r\n                Timeline.prototype.error = function (event) {\r\n                    this.log(level_1[\"default\"].ERROR, event);\r\n                };\r\n                Timeline.prototype.info = function (event) {\r\n                    this.log(level_1[\"default\"].INFO, event);\r\n                };\r\n                Timeline.prototype.debug = function (event) {\r\n                    this.log(level_1[\"default\"].DEBUG, event);\r\n                };\r\n                Timeline.prototype.isEmpty = function () {\r\n                    return this.events.length === 0;\r\n                };\r\n                Timeline.prototype.send = function (sendfn, callback) {\r\n                    var _this = this;\r\n                    var data = Collections.extend({\r\n                        session: this.session,\r\n                        bundle: this.sent + 1,\r\n                        key: this.key,\r\n                        lib: \"js\",\r\n                        version: this.options.version,\r\n                        cluster: this.options.cluster,\r\n                        features: this.options.features,\r\n                        timeline: this.events\r\n                    }, this.options.params);\r\n                    this.events = [];\r\n                    sendfn(data, function (error, result) {\r\n                        if (!error) {\r\n                            _this.sent++;\r\n                        }\r\n                        if (callback) {\r\n                            callback(error, result);\r\n                        }\r\n                    });\r\n                    return true;\r\n                };\r\n                Timeline.prototype.generateUniqueID = function () {\r\n                    this.uniqueID++;\r\n                    return this.uniqueID;\r\n                };\r\n                return Timeline;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Timeline;\r\n            /***/ \r\n        }),\r\n        /* 40 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var TimelineLevel = /*@__PURE__*/ (function (TimelineLevel) {\r\n                TimelineLevel[TimelineLevel[\"ERROR\"] = 3] = \"ERROR\";\r\n                TimelineLevel[TimelineLevel[\"INFO\"] = 6] = \"INFO\";\r\n                TimelineLevel[TimelineLevel[\"DEBUG\"] = 7] = \"DEBUG\";\r\n                return TimelineLevel;\r\n            })({});\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = TimelineLevel;\r\n            /***/ \r\n        }),\r\n        /* 41 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var util_1 = __webpack_require__(11);\r\n            var transport_manager_1 = __webpack_require__(42);\r\n            var Errors = __webpack_require__(31);\r\n            var transport_strategy_1 = __webpack_require__(64);\r\n            var sequential_strategy_1 = __webpack_require__(65);\r\n            var best_connected_ever_strategy_1 = __webpack_require__(66);\r\n            var cached_strategy_1 = __webpack_require__(67);\r\n            var delayed_strategy_1 = __webpack_require__(68);\r\n            var if_strategy_1 = __webpack_require__(69);\r\n            var first_connected_strategy_1 = __webpack_require__(70);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var Transports = runtime_1[\"default\"].Transports;\r\n            exports.build = function (scheme, options) {\r\n                var context = Collections.extend({}, globalContext, options);\r\n                return evaluate(scheme, context)[1].strategy;\r\n            };\r\n            var UnsupportedStrategy = {\r\n                isSupported: function () {\r\n                    return false;\r\n                },\r\n                connect: function (_, callback) {\r\n                    var deferred = util_1[\"default\"].defer(function () {\r\n                        callback(new Errors.UnsupportedStrategy());\r\n                    });\r\n                    return {\r\n                        abort: function () {\r\n                            deferred.ensureAborted();\r\n                        },\r\n                        forceMinPriority: function () { }\r\n                    };\r\n                }\r\n            };\r\n            function returnWithOriginalContext(f) {\r\n                return function (context) {\r\n                    return [f.apply(this, arguments), context];\r\n                };\r\n            }\r\n            var globalContext = {\r\n                extend: function (context, first, second) {\r\n                    return [Collections.extend({}, first, second), context];\r\n                },\r\n                def: function (context, name, value) {\r\n                    if (context[name] !== undefined) {\r\n                        throw \"Redefining symbol \" + name;\r\n                    }\r\n                    context[name] = value;\r\n                    return [undefined, context];\r\n                },\r\n                def_transport: function (context, name, type, priority, options, manager) {\r\n                    var transportClass = Transports[type];\r\n                    if (!transportClass) {\r\n                        throw new Errors.UnsupportedTransport(type);\r\n                    }\r\n                    var enabled = (!context.enabledTransports ||\r\n                        Collections.arrayIndexOf(context.enabledTransports, name) !== -1) &&\r\n                        (!context.disabledTransports ||\r\n                            Collections.arrayIndexOf(context.disabledTransports, name) === -1);\r\n                    var transport;\r\n                    if (enabled) {\r\n                        transport = new transport_strategy_1[\"default\"](name, priority, manager ? manager.getAssistant(transportClass) : transportClass, Collections.extend({\r\n                            key: context.key,\r\n                            useTLS: context.useTLS,\r\n                            timeline: context.timeline,\r\n                            ignoreNullOrigin: context.ignoreNullOrigin\r\n                        }, options));\r\n                    }\r\n                    else {\r\n                        transport = UnsupportedStrategy;\r\n                    }\r\n                    var newContext = context.def(context, name, transport)[1];\r\n                    newContext.Transports = context.Transports || {};\r\n                    newContext.Transports[name] = transport;\r\n                    return [undefined, newContext];\r\n                },\r\n                transport_manager: returnWithOriginalContext(function (_, options) {\r\n                    return new transport_manager_1[\"default\"](options);\r\n                }),\r\n                sequential: returnWithOriginalContext(function (_, options) {\r\n                    var strategies = Array.prototype.slice.call(arguments, 2);\r\n                    return new sequential_strategy_1[\"default\"](strategies, options);\r\n                }),\r\n                cached: returnWithOriginalContext(function (context, ttl, strategy) {\r\n                    return new cached_strategy_1[\"default\"](strategy, context.Transports, {\r\n                        ttl: ttl,\r\n                        timeline: context.timeline,\r\n                        useTLS: context.useTLS\r\n                    });\r\n                }),\r\n                first_connected: returnWithOriginalContext(function (_, strategy) {\r\n                    return new first_connected_strategy_1[\"default\"](strategy);\r\n                }),\r\n                best_connected_ever: returnWithOriginalContext(function () {\r\n                    var strategies = Array.prototype.slice.call(arguments, 1);\r\n                    return new best_connected_ever_strategy_1[\"default\"](strategies);\r\n                }),\r\n                delayed: returnWithOriginalContext(function (_, delay, strategy) {\r\n                    return new delayed_strategy_1[\"default\"](strategy, { delay: delay });\r\n                }),\r\n                \"if\": returnWithOriginalContext(function (_, test, trueBranch, falseBranch) {\r\n                    return new if_strategy_1[\"default\"](test, trueBranch, falseBranch);\r\n                }),\r\n                is_supported: returnWithOriginalContext(function (_, strategy) {\r\n                    return function () {\r\n                        return strategy.isSupported();\r\n                    };\r\n                })\r\n            };\r\n            function isSymbol(expression) {\r\n                return (typeof expression === \"string\") && expression.charAt(0) === \":\";\r\n            }\r\n            function getSymbolValue(expression, context) {\r\n                return context[expression.slice(1)];\r\n            }\r\n            function evaluateListOfExpressions(expressions, context) {\r\n                if (expressions.length === 0) {\r\n                    return [[], context];\r\n                }\r\n                var head = evaluate(expressions[0], context);\r\n                var tail = evaluateListOfExpressions(expressions.slice(1), head[1]);\r\n                return [[head[0]].concat(tail[0]), tail[1]];\r\n            }\r\n            function evaluateString(expression, context) {\r\n                if (!isSymbol(expression)) {\r\n                    return [expression, context];\r\n                }\r\n                var value = getSymbolValue(expression, context);\r\n                if (value === undefined) {\r\n                    throw \"Undefined symbol \" + expression;\r\n                }\r\n                return [value, context];\r\n            }\r\n            function evaluateArray(expression, context) {\r\n                if (isSymbol(expression[0])) {\r\n                    var f = getSymbolValue(expression[0], context);\r\n                    if (expression.length > 1) {\r\n                        if (typeof f !== \"function\") {\r\n                            throw \"Calling non-function \" + expression[0];\r\n                        }\r\n                        var args = [Collections.extend({}, context)].concat(Collections.map(expression.slice(1), function (arg) {\r\n                            return evaluate(arg, Collections.extend({}, context))[0];\r\n                        }));\r\n                        return f.apply(this, args);\r\n                    }\r\n                    else {\r\n                        return [f, context];\r\n                    }\r\n                }\r\n                else {\r\n                    return evaluateListOfExpressions(expression, context);\r\n                }\r\n            }\r\n            function evaluate(expression, context) {\r\n                if (typeof expression === \"string\") {\r\n                    return evaluateString(expression, context);\r\n                }\r\n                else if (typeof expression === \"object\") {\r\n                    if (expression instanceof Array && expression.length > 0) {\r\n                        return evaluateArray(expression, context);\r\n                    }\r\n                }\r\n                return [expression, context];\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 42 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var factory_1 = __webpack_require__(43);\r\n            var TransportManager = (function () {\r\n                function TransportManager(options) {\r\n                    this.options = options || {};\r\n                    this.livesLeft = this.options.lives || Infinity;\r\n                }\r\n                TransportManager.prototype.getAssistant = function (transport) {\r\n                    return factory_1[\"default\"].createAssistantToTheTransportManager(this, transport, {\r\n                        minPingDelay: this.options.minPingDelay,\r\n                        maxPingDelay: this.options.maxPingDelay\r\n                    });\r\n                };\r\n                TransportManager.prototype.isAlive = function () {\r\n                    return this.livesLeft > 0;\r\n                };\r\n                TransportManager.prototype.reportDeath = function () {\r\n                    this.livesLeft -= 1;\r\n                };\r\n                return TransportManager;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = TransportManager;\r\n            /***/ \r\n        }),\r\n        /* 43 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var assistant_to_the_transport_manager_1 = __webpack_require__(44);\r\n            var handshake_1 = __webpack_require__(45);\r\n            var pusher_authorizer_1 = __webpack_require__(48);\r\n            var timeline_sender_1 = __webpack_require__(49);\r\n            var presence_channel_1 = __webpack_require__(50);\r\n            var private_channel_1 = __webpack_require__(51);\r\n            var encrypted_channel_1 = __webpack_require__(54);\r\n            var channel_1 = __webpack_require__(52);\r\n            var connection_manager_1 = __webpack_require__(62);\r\n            var channels_1 = __webpack_require__(63);\r\n            var Factory = {\r\n                createChannels: function () {\r\n                    return new channels_1[\"default\"]();\r\n                },\r\n                createConnectionManager: function (key, options) {\r\n                    return new connection_manager_1[\"default\"](key, options);\r\n                },\r\n                createChannel: function (name, pusher) {\r\n                    return new channel_1[\"default\"](name, pusher);\r\n                },\r\n                createPrivateChannel: function (name, pusher) {\r\n                    return new private_channel_1[\"default\"](name, pusher);\r\n                },\r\n                createPresenceChannel: function (name, pusher) {\r\n                    return new presence_channel_1[\"default\"](name, pusher);\r\n                },\r\n                createEncryptedChannel: function (name, pusher) {\r\n                    return new encrypted_channel_1[\"default\"](name, pusher);\r\n                },\r\n                createTimelineSender: function (timeline, options) {\r\n                    return new timeline_sender_1[\"default\"](timeline, options);\r\n                },\r\n                createAuthorizer: function (channel, options) {\r\n                    if (options.authorizer) {\r\n                        return options.authorizer(channel, options);\r\n                    }\r\n                    return new pusher_authorizer_1[\"default\"](channel, options);\r\n                },\r\n                createHandshake: function (transport, callback) {\r\n                    return new handshake_1[\"default\"](transport, callback);\r\n                },\r\n                createAssistantToTheTransportManager: function (manager, transport, options) {\r\n                    return new assistant_to_the_transport_manager_1[\"default\"](manager, transport, options);\r\n                }\r\n            };\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Factory;\r\n            /***/ \r\n        }),\r\n        /* 44 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var util_1 = __webpack_require__(11);\r\n            var Collections = __webpack_require__(9);\r\n            var AssistantToTheTransportManager = (function () {\r\n                function AssistantToTheTransportManager(manager, transport, options) {\r\n                    this.manager = manager;\r\n                    this.transport = transport;\r\n                    this.minPingDelay = options.minPingDelay;\r\n                    this.maxPingDelay = options.maxPingDelay;\r\n                    this.pingDelay = undefined;\r\n                }\r\n                AssistantToTheTransportManager.prototype.createConnection = function (name, priority, key, options) {\r\n                    var _this = this;\r\n                    options = Collections.extend({}, options, {\r\n                        activityTimeout: this.pingDelay\r\n                    });\r\n                    var connection = this.transport.createConnection(name, priority, key, options);\r\n                    var openTimestamp = null;\r\n                    var onOpen = function () {\r\n                        connection.unbind(\"open\", onOpen);\r\n                        connection.bind(\"closed\", onClosed);\r\n                        openTimestamp = util_1[\"default\"].now();\r\n                    };\r\n                    var onClosed = function (closeEvent) {\r\n                        connection.unbind(\"closed\", onClosed);\r\n                        if (closeEvent.code === 1002 || closeEvent.code === 1003) {\r\n                            _this.manager.reportDeath();\r\n                        }\r\n                        else if (!closeEvent.wasClean && openTimestamp) {\r\n                            var lifespan = util_1[\"default\"].now() - openTimestamp;\r\n                            if (lifespan < 2 * _this.maxPingDelay) {\r\n                                _this.manager.reportDeath();\r\n                                _this.pingDelay = Math.max(lifespan / 2, _this.minPingDelay);\r\n                            }\r\n                        }\r\n                    };\r\n                    connection.bind(\"open\", onOpen);\r\n                    return connection;\r\n                };\r\n                AssistantToTheTransportManager.prototype.isSupported = function (environment) {\r\n                    return this.manager.isAlive() && this.transport.isSupported(environment);\r\n                };\r\n                return AssistantToTheTransportManager;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = AssistantToTheTransportManager;\r\n            /***/ \r\n        }),\r\n        /* 45 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var Protocol = __webpack_require__(46);\r\n            var connection_1 = __webpack_require__(47);\r\n            var Handshake = (function () {\r\n                function Handshake(transport, callback) {\r\n                    this.transport = transport;\r\n                    this.callback = callback;\r\n                    this.bindListeners();\r\n                }\r\n                Handshake.prototype.close = function () {\r\n                    this.unbindListeners();\r\n                    this.transport.close();\r\n                };\r\n                Handshake.prototype.bindListeners = function () {\r\n                    var _this = this;\r\n                    this.onMessage = function (m) {\r\n                        _this.unbindListeners();\r\n                        var result;\r\n                        try {\r\n                            result = Protocol.processHandshake(m);\r\n                        }\r\n                        catch (e) {\r\n                            _this.finish(\"error\", { error: e });\r\n                            _this.transport.close();\r\n                            return;\r\n                        }\r\n                        if (result.action === \"connected\") {\r\n                            _this.finish(\"connected\", {\r\n                                connection: new connection_1[\"default\"](result.id, _this.transport),\r\n                                activityTimeout: result.activityTimeout\r\n                            });\r\n                        }\r\n                        else {\r\n                            _this.finish(result.action, { error: result.error });\r\n                            _this.transport.close();\r\n                        }\r\n                    };\r\n                    this.onClosed = function (closeEvent) {\r\n                        _this.unbindListeners();\r\n                        var action = Protocol.getCloseAction(closeEvent) || \"backoff\";\r\n                        var error = Protocol.getCloseError(closeEvent);\r\n                        _this.finish(action, { error: error });\r\n                    };\r\n                    this.transport.bind(\"message\", this.onMessage);\r\n                    this.transport.bind(\"closed\", this.onClosed);\r\n                };\r\n                Handshake.prototype.unbindListeners = function () {\r\n                    this.transport.unbind(\"message\", this.onMessage);\r\n                    this.transport.unbind(\"closed\", this.onClosed);\r\n                };\r\n                Handshake.prototype.finish = function (action, params) {\r\n                    this.callback(Collections.extend({ transport: this.transport, action: action }, params));\r\n                };\r\n                return Handshake;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Handshake;\r\n            /***/ \r\n        }),\r\n        /* 46 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            exports.decodeMessage = function (messageEvent) {\r\n                try {\r\n                    var messageData = JSON.parse(messageEvent.data);\r\n                    var pusherEventData = messageData.data;\r\n                    if (typeof pusherEventData === 'string') {\r\n                        try {\r\n                            pusherEventData = JSON.parse(messageData.data);\r\n                        }\r\n                        catch (e) { }\r\n                    }\r\n                    var pusherEvent = {\r\n                        event: messageData.event,\r\n                        channel: messageData.channel,\r\n                        data: pusherEventData\r\n                    };\r\n                    if (messageData.user_id) {\r\n                        pusherEvent.user_id = messageData.user_id;\r\n                    }\r\n                    return pusherEvent;\r\n                }\r\n                catch (e) {\r\n                    throw { type: 'MessageParseError', error: e, data: messageEvent.data };\r\n                }\r\n            };\r\n            exports.encodeMessage = function (event) {\r\n                return JSON.stringify(event);\r\n            };\r\n            exports.processHandshake = function (messageEvent) {\r\n                var message = exports.decodeMessage(messageEvent);\r\n                if (message.event === \"pusher:connection_established\") {\r\n                    if (!message.data.activity_timeout) {\r\n                        throw \"No activity timeout specified in handshake\";\r\n                    }\r\n                    return {\r\n                        action: \"connected\",\r\n                        id: message.data.socket_id,\r\n                        activityTimeout: message.data.activity_timeout * 1000\r\n                    };\r\n                }\r\n                else if (message.event === \"pusher:error\") {\r\n                    return {\r\n                        action: this.getCloseAction(message.data),\r\n                        error: this.getCloseError(message.data)\r\n                    };\r\n                }\r\n                else {\r\n                    throw \"Invalid handshake\";\r\n                }\r\n            };\r\n            exports.getCloseAction = function (closeEvent) {\r\n                if (closeEvent.code < 4000) {\r\n                    if (closeEvent.code >= 1002 && closeEvent.code <= 1004) {\r\n                        return \"backoff\";\r\n                    }\r\n                    else {\r\n                        return null;\r\n                    }\r\n                }\r\n                else if (closeEvent.code === 4000) {\r\n                    return \"tls_only\";\r\n                }\r\n                else if (closeEvent.code < 4100) {\r\n                    return \"refused\";\r\n                }\r\n                else if (closeEvent.code < 4200) {\r\n                    return \"backoff\";\r\n                }\r\n                else if (closeEvent.code < 4300) {\r\n                    return \"retry\";\r\n                }\r\n                else {\r\n                    return \"refused\";\r\n                }\r\n            };\r\n            exports.getCloseError = function (closeEvent) {\r\n                if (closeEvent.code !== 1000 && closeEvent.code !== 1001) {\r\n                    return {\r\n                        type: 'PusherError',\r\n                        data: {\r\n                            code: closeEvent.code,\r\n                            message: closeEvent.reason || closeEvent.message\r\n                        }\r\n                    };\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            };\r\n            /***/ \r\n        }),\r\n        /* 47 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var Collections = __webpack_require__(9);\r\n            var dispatcher_1 = __webpack_require__(24);\r\n            var Protocol = __webpack_require__(46);\r\n            var logger_1 = __webpack_require__(8);\r\n            var Connection = (function (_super) {\r\n                __extends(Connection, _super);\r\n                function Connection(id, transport) {\r\n                    _super.call(this);\r\n                    this.id = id;\r\n                    this.transport = transport;\r\n                    this.activityTimeout = transport.activityTimeout;\r\n                    this.bindListeners();\r\n                }\r\n                Connection.prototype.handlesActivityChecks = function () {\r\n                    return this.transport.handlesActivityChecks();\r\n                };\r\n                Connection.prototype.send = function (data) {\r\n                    return this.transport.send(data);\r\n                };\r\n                Connection.prototype.send_event = function (name, data, channel) {\r\n                    var event = { event: name, data: data };\r\n                    if (channel) {\r\n                        event.channel = channel;\r\n                    }\r\n                    logger_1[\"default\"].debug('Event sent', event);\r\n                    return this.send(Protocol.encodeMessage(event));\r\n                };\r\n                Connection.prototype.ping = function () {\r\n                    if (this.transport.supportsPing()) {\r\n                        this.transport.ping();\r\n                    }\r\n                    else {\r\n                        this.send_event('pusher:ping', {});\r\n                    }\r\n                };\r\n                Connection.prototype.close = function () {\r\n                    this.transport.close();\r\n                };\r\n                Connection.prototype.bindListeners = function () {\r\n                    var _this = this;\r\n                    var listeners = {\r\n                        message: function (messageEvent) {\r\n                            var pusherEvent;\r\n                            try {\r\n                                pusherEvent = Protocol.decodeMessage(messageEvent);\r\n                            }\r\n                            catch (e) {\r\n                                _this.emit('error', {\r\n                                    type: 'MessageParseError',\r\n                                    error: e,\r\n                                    data: messageEvent.data\r\n                                });\r\n                            }\r\n                            if (pusherEvent !== undefined) {\r\n                                logger_1[\"default\"].debug('Event recd', pusherEvent);\r\n                                switch (pusherEvent.event) {\r\n                                    case 'pusher:error':\r\n                                        _this.emit('error', { type: 'PusherError', data: pusherEvent.data });\r\n                                        break;\r\n                                    case 'pusher:ping':\r\n                                        _this.emit(\"ping\");\r\n                                        break;\r\n                                    case 'pusher:pong':\r\n                                        _this.emit(\"pong\");\r\n                                        break;\r\n                                }\r\n                                _this.emit('message', pusherEvent);\r\n                            }\r\n                        },\r\n                        activity: function () {\r\n                            _this.emit(\"activity\");\r\n                        },\r\n                        error: function (error) {\r\n                            _this.emit(\"error\", { type: \"WebSocketError\", error: error });\r\n                        },\r\n                        closed: function (closeEvent) {\r\n                            unbindListeners();\r\n                            if (closeEvent && closeEvent.code) {\r\n                                _this.handleCloseEvent(closeEvent);\r\n                            }\r\n                            _this.transport = null;\r\n                            _this.emit(\"closed\");\r\n                        }\r\n                    };\r\n                    var unbindListeners = function () {\r\n                        Collections.objectApply(listeners, function (listener, event) {\r\n                            _this.transport.unbind(event, listener);\r\n                        });\r\n                    };\r\n                    Collections.objectApply(listeners, function (listener, event) {\r\n                        _this.transport.bind(event, listener);\r\n                    });\r\n                };\r\n                Connection.prototype.handleCloseEvent = function (closeEvent) {\r\n                    var action = Protocol.getCloseAction(closeEvent);\r\n                    var error = Protocol.getCloseError(closeEvent);\r\n                    if (error) {\r\n                        this.emit('error', error);\r\n                    }\r\n                    if (action) {\r\n                        this.emit(action, { action: action, error: error });\r\n                    }\r\n                };\r\n                return Connection;\r\n            }(dispatcher_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Connection;\r\n            /***/ \r\n        }),\r\n        /* 48 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var runtime_1 = __webpack_require__(2);\r\n            var PusherAuthorizer = (function () {\r\n                function PusherAuthorizer(channel, options) {\r\n                    this.channel = channel;\r\n                    var authTransport = options.authTransport;\r\n                    if (typeof runtime_1[\"default\"].getAuthorizers()[authTransport] === \"undefined\") {\r\n                        throw \"'\" + authTransport + \"' is not a recognized auth transport\";\r\n                    }\r\n                    this.type = authTransport;\r\n                    this.options = options;\r\n                    this.authOptions = (options || {}).auth || {};\r\n                }\r\n                PusherAuthorizer.prototype.composeQuery = function (socketId) {\r\n                    var query = 'socket_id=' + encodeURIComponent(socketId) +\r\n                        '&channel_name=' + encodeURIComponent(this.channel.name);\r\n                    for (var i in this.authOptions.params) {\r\n                        query += \"&\" + encodeURIComponent(i) + \"=\" + encodeURIComponent(this.authOptions.params[i]);\r\n                    }\r\n                    return query;\r\n                };\r\n                PusherAuthorizer.prototype.authorize = function (socketId, callback) {\r\n                    PusherAuthorizer.authorizers = PusherAuthorizer.authorizers || runtime_1[\"default\"].getAuthorizers();\r\n                    return PusherAuthorizer.authorizers[this.type].call(this, runtime_1[\"default\"], socketId, callback);\r\n                };\r\n                return PusherAuthorizer;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = PusherAuthorizer;\r\n            /***/ \r\n        }),\r\n        /* 49 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var runtime_1 = __webpack_require__(2);\r\n            var TimelineSender = (function () {\r\n                function TimelineSender(timeline, options) {\r\n                    this.timeline = timeline;\r\n                    this.options = options || {};\r\n                }\r\n                TimelineSender.prototype.send = function (useTLS, callback) {\r\n                    if (this.timeline.isEmpty()) {\r\n                        return;\r\n                    }\r\n                    this.timeline.send(runtime_1[\"default\"].TimelineTransport.getAgent(this, useTLS), callback);\r\n                };\r\n                return TimelineSender;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = TimelineSender;\r\n            /***/ \r\n        }),\r\n        /* 50 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var private_channel_1 = __webpack_require__(51);\r\n            var logger_1 = __webpack_require__(8);\r\n            var members_1 = __webpack_require__(53);\r\n            var url_store_1 = __webpack_require__(14);\r\n            var PresenceChannel = (function (_super) {\r\n                __extends(PresenceChannel, _super);\r\n                function PresenceChannel(name, pusher) {\r\n                    _super.call(this, name, pusher);\r\n                    this.members = new members_1[\"default\"]();\r\n                }\r\n                PresenceChannel.prototype.authorize = function (socketId, callback) {\r\n                    var _this = this;\r\n                    _super.prototype.authorize.call(this, socketId, function (error, authData) {\r\n                        if (!error) {\r\n                            if (authData.channel_data === undefined) {\r\n                                var suffix = url_store_1[\"default\"].buildLogSuffix(\"authenticationEndpoint\");\r\n                                logger_1[\"default\"].warn((\"Invalid auth response for channel '\" + _this.name + \"',\") +\r\n                                    (\"expected 'channel_data' field. \" + suffix));\r\n                                callback(\"Invalid auth response\");\r\n                                return;\r\n                            }\r\n                            var channelData = JSON.parse(authData.channel_data);\r\n                            _this.members.setMyID(channelData.user_id);\r\n                        }\r\n                        callback(error, authData);\r\n                    });\r\n                };\r\n                PresenceChannel.prototype.handleEvent = function (event) {\r\n                    var eventName = event.event;\r\n                    if (eventName.indexOf(\"pusher_internal:\") === 0) {\r\n                        this.handleInternalEvent(event);\r\n                    }\r\n                    else {\r\n                        var data = event.data;\r\n                        var metadata = {};\r\n                        if (event.user_id) {\r\n                            metadata.user_id = event.user_id;\r\n                        }\r\n                        this.emit(eventName, data, metadata);\r\n                    }\r\n                };\r\n                PresenceChannel.prototype.handleInternalEvent = function (event) {\r\n                    var eventName = event.event;\r\n                    var data = event.data;\r\n                    switch (eventName) {\r\n                        case \"pusher_internal:subscription_succeeded\":\r\n                            this.handleSubscriptionSucceededEvent(event);\r\n                            break;\r\n                        case \"pusher_internal:member_added\":\r\n                            var addedMember = this.members.addMember(data);\r\n                            this.emit('pusher:member_added', addedMember);\r\n                            break;\r\n                        case \"pusher_internal:member_removed\":\r\n                            var removedMember = this.members.removeMember(data);\r\n                            if (removedMember) {\r\n                                this.emit('pusher:member_removed', removedMember);\r\n                            }\r\n                            break;\r\n                    }\r\n                };\r\n                PresenceChannel.prototype.handleSubscriptionSucceededEvent = function (event) {\r\n                    this.subscriptionPending = false;\r\n                    this.subscribed = true;\r\n                    if (this.subscriptionCancelled) {\r\n                        this.pusher.unsubscribe(this.name);\r\n                    }\r\n                    else {\r\n                        this.members.onSubscription(event.data);\r\n                        this.emit(\"pusher:subscription_succeeded\", this.members);\r\n                    }\r\n                };\r\n                PresenceChannel.prototype.disconnect = function () {\r\n                    this.members.reset();\r\n                    _super.prototype.disconnect.call(this);\r\n                };\r\n                return PresenceChannel;\r\n            }(private_channel_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = PresenceChannel;\r\n            /***/ \r\n        }),\r\n        /* 51 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var factory_1 = __webpack_require__(43);\r\n            var channel_1 = __webpack_require__(52);\r\n            var PrivateChannel = (function (_super) {\r\n                __extends(PrivateChannel, _super);\r\n                function PrivateChannel() {\r\n                    _super.apply(this, arguments);\r\n                }\r\n                PrivateChannel.prototype.authorize = function (socketId, callback) {\r\n                    var authorizer = factory_1[\"default\"].createAuthorizer(this, this.pusher.config);\r\n                    return authorizer.authorize(socketId, callback);\r\n                };\r\n                return PrivateChannel;\r\n            }(channel_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = PrivateChannel;\r\n            /***/ \r\n        }),\r\n        /* 52 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var dispatcher_1 = __webpack_require__(24);\r\n            var Errors = __webpack_require__(31);\r\n            var logger_1 = __webpack_require__(8);\r\n            var url_store_1 = __webpack_require__(14);\r\n            var Channel = (function (_super) {\r\n                __extends(Channel, _super);\r\n                function Channel(name, pusher) {\r\n                    _super.call(this, function (event, data) {\r\n                        logger_1[\"default\"].debug('No callbacks on ' + name + ' for ' + event);\r\n                    });\r\n                    this.name = name;\r\n                    this.pusher = pusher;\r\n                    this.subscribed = false;\r\n                    this.subscriptionPending = false;\r\n                    this.subscriptionCancelled = false;\r\n                }\r\n                Channel.prototype.authorize = function (socketId, callback) {\r\n                    return callback(false, {});\r\n                };\r\n                Channel.prototype.trigger = function (event, data) {\r\n                    if (event.indexOf(\"client-\") !== 0) {\r\n                        throw new Errors.BadEventName(\"Event '\" + event + \"' does not start with 'client-'\");\r\n                    }\r\n                    if (!this.subscribed) {\r\n                        var suffix = url_store_1[\"default\"].buildLogSuffix(\"triggeringClientEvents\");\r\n                        logger_1[\"default\"].warn(\"Client event triggered before channel 'subscription_succeeded' event . \" + suffix);\r\n                    }\r\n                    return this.pusher.send_event(event, data, this.name);\r\n                };\r\n                Channel.prototype.disconnect = function () {\r\n                    this.subscribed = false;\r\n                    this.subscriptionPending = false;\r\n                };\r\n                Channel.prototype.handleEvent = function (event) {\r\n                    var eventName = event.event;\r\n                    var data = event.data;\r\n                    if (eventName === \"pusher_internal:subscription_succeeded\") {\r\n                        this.handleSubscriptionSucceededEvent(event);\r\n                    }\r\n                    else if (eventName.indexOf(\"pusher_internal:\") !== 0) {\r\n                        var metadata = {};\r\n                        this.emit(eventName, data, metadata);\r\n                    }\r\n                };\r\n                Channel.prototype.handleSubscriptionSucceededEvent = function (event) {\r\n                    this.subscriptionPending = false;\r\n                    this.subscribed = true;\r\n                    if (this.subscriptionCancelled) {\r\n                        this.pusher.unsubscribe(this.name);\r\n                    }\r\n                    else {\r\n                        this.emit(\"pusher:subscription_succeeded\", event.data);\r\n                    }\r\n                };\r\n                Channel.prototype.subscribe = function () {\r\n                    var _this = this;\r\n                    if (this.subscribed) {\r\n                        return;\r\n                    }\r\n                    this.subscriptionPending = true;\r\n                    this.subscriptionCancelled = false;\r\n                    this.authorize(this.pusher.connection.socket_id, function (error, data) {\r\n                        if (error) {\r\n                            _this.emit('pusher:subscription_error', data);\r\n                        }\r\n                        else {\r\n                            _this.pusher.send_event('pusher:subscribe', {\r\n                                auth: data.auth,\r\n                                channel_data: data.channel_data,\r\n                                channel: _this.name\r\n                            });\r\n                        }\r\n                    });\r\n                };\r\n                Channel.prototype.unsubscribe = function () {\r\n                    this.subscribed = false;\r\n                    this.pusher.send_event('pusher:unsubscribe', {\r\n                        channel: this.name\r\n                    });\r\n                };\r\n                Channel.prototype.cancelSubscription = function () {\r\n                    this.subscriptionCancelled = true;\r\n                };\r\n                Channel.prototype.reinstateSubscription = function () {\r\n                    this.subscriptionCancelled = false;\r\n                };\r\n                return Channel;\r\n            }(dispatcher_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Channel;\r\n            /***/ \r\n        }),\r\n        /* 53 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var Members = (function () {\r\n                function Members() {\r\n                    this.reset();\r\n                }\r\n                Members.prototype.get = function (id) {\r\n                    if (Object.prototype.hasOwnProperty.call(this.members, id)) {\r\n                        return {\r\n                            id: id,\r\n                            info: this.members[id]\r\n                        };\r\n                    }\r\n                    else {\r\n                        return null;\r\n                    }\r\n                };\r\n                Members.prototype.each = function (callback) {\r\n                    var _this = this;\r\n                    Collections.objectApply(this.members, function (member, id) {\r\n                        callback(_this.get(id));\r\n                    });\r\n                };\r\n                Members.prototype.setMyID = function (id) {\r\n                    this.myID = id;\r\n                };\r\n                Members.prototype.onSubscription = function (subscriptionData) {\r\n                    this.members = subscriptionData.presence.hash;\r\n                    this.count = subscriptionData.presence.count;\r\n                    this.me = this.get(this.myID);\r\n                };\r\n                Members.prototype.addMember = function (memberData) {\r\n                    if (this.get(memberData.user_id) === null) {\r\n                        this.count++;\r\n                    }\r\n                    this.members[memberData.user_id] = memberData.user_info;\r\n                    return this.get(memberData.user_id);\r\n                };\r\n                Members.prototype.removeMember = function (memberData) {\r\n                    var member = this.get(memberData.user_id);\r\n                    if (member) {\r\n                        delete this.members[memberData.user_id];\r\n                        this.count--;\r\n                    }\r\n                    return member;\r\n                };\r\n                Members.prototype.reset = function () {\r\n                    this.members = {};\r\n                    this.count = 0;\r\n                    this.myID = null;\r\n                    this.me = null;\r\n                };\r\n                return Members;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Members;\r\n            /***/ \r\n        }),\r\n        /* 54 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var private_channel_1 = __webpack_require__(51);\r\n            var Errors = __webpack_require__(31);\r\n            var logger_1 = __webpack_require__(8);\r\n            var tweetnacl_1 = __webpack_require__(55);\r\n            var tweetnacl_util_1 = __webpack_require__(57);\r\n            var EncryptedChannel = (function (_super) {\r\n                __extends(EncryptedChannel, _super);\r\n                function EncryptedChannel() {\r\n                    _super.apply(this, arguments);\r\n                    this.key = null;\r\n                }\r\n                EncryptedChannel.prototype.authorize = function (socketId, callback) {\r\n                    var _this = this;\r\n                    _super.prototype.authorize.call(this, socketId, function (error, authData) {\r\n                        if (error) {\r\n                            callback(true, authData);\r\n                            return;\r\n                        }\r\n                        var sharedSecret = authData[\"shared_secret\"];\r\n                        if (!sharedSecret) {\r\n                            var errorMsg = \"No shared_secret key in auth payload for encrypted channel: \" + _this.name;\r\n                            callback(true, errorMsg);\r\n                            logger_1[\"default\"].warn(\"Error: \" + errorMsg);\r\n                            return;\r\n                        }\r\n                        _this.key = tweetnacl_util_1.decodeBase64(sharedSecret);\r\n                        delete authData[\"shared_secret\"];\r\n                        callback(false, authData);\r\n                    });\r\n                };\r\n                EncryptedChannel.prototype.trigger = function (event, data) {\r\n                    throw new Errors.UnsupportedFeature('Client events are not currently supported for encrypted channels');\r\n                };\r\n                EncryptedChannel.prototype.handleEvent = function (event) {\r\n                    var eventName = event.event;\r\n                    var data = event.data;\r\n                    if (eventName.indexOf(\"pusher_internal:\") === 0 || eventName.indexOf(\"pusher:\") === 0) {\r\n                        _super.prototype.handleEvent.call(this, event);\r\n                        return;\r\n                    }\r\n                    this.handleEncryptedEvent(eventName, data);\r\n                };\r\n                EncryptedChannel.prototype.handleEncryptedEvent = function (event, data) {\r\n                    var _this = this;\r\n                    if (!this.key) {\r\n                        logger_1[\"default\"].debug('Received encrypted event before key has been retrieved from the authEndpoint');\r\n                        return;\r\n                    }\r\n                    if (!data.ciphertext || !data.nonce) {\r\n                        logger_1[\"default\"].warn('Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: ' + data);\r\n                        return;\r\n                    }\r\n                    var cipherText = tweetnacl_util_1.decodeBase64(data.ciphertext);\r\n                    if (cipherText.length < tweetnacl_1.secretbox.overheadLength) {\r\n                        logger_1[\"default\"].warn(\"Expected encrypted event ciphertext length to be \" + tweetnacl_1.secretbox.overheadLength + \", got: \" + cipherText.length);\r\n                        return;\r\n                    }\r\n                    var nonce = tweetnacl_util_1.decodeBase64(data.nonce);\r\n                    if (nonce.length < tweetnacl_1.secretbox.nonceLength) {\r\n                        logger_1[\"default\"].warn(\"Expected encrypted event nonce length to be \" + tweetnacl_1.secretbox.nonceLength + \", got: \" + nonce.length);\r\n                        return;\r\n                    }\r\n                    var bytes = tweetnacl_1.secretbox.open(cipherText, nonce, this.key);\r\n                    if (bytes === null) {\r\n                        logger_1[\"default\"].debug('Failed to decrypted an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint...');\r\n                        this.authorize(this.pusher.connection.socket_id, function (error, authData) {\r\n                            if (error) {\r\n                                logger_1[\"default\"].warn(\"Failed to make a request to the authEndpoint: \" + authData + \". Unable to fetch new key, so dropping encrypted event\");\r\n                                return;\r\n                            }\r\n                            bytes = tweetnacl_1.secretbox.open(cipherText, nonce, _this.key);\r\n                            if (bytes === null) {\r\n                                logger_1[\"default\"].warn(\"Failed to decrypt event with new key. Dropping encrypted event\");\r\n                                return;\r\n                            }\r\n                            _this.emitJSON(event, tweetnacl_util_1.encodeUTF8(bytes));\r\n                            return;\r\n                        });\r\n                        return;\r\n                    }\r\n                    this.emitJSON(event, tweetnacl_util_1.encodeUTF8(bytes));\r\n                };\r\n                EncryptedChannel.prototype.emitJSON = function (eventName, data) {\r\n                    try {\r\n                        this.emit(eventName, JSON.parse(data));\r\n                    }\r\n                    catch (e) {\r\n                        this.emit(eventName, data);\r\n                    }\r\n                    return this;\r\n                };\r\n                return EncryptedChannel;\r\n            }(private_channel_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = EncryptedChannel;\r\n            /***/ \r\n        }),\r\n        /* 55 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            (function (nacl) {\r\n                'use strict';\r\n                // Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\r\n                // Public domain.\r\n                //\r\n                // Implementation derived from TweetNaCl version 20140427.\r\n                // See for details: http://tweetnacl.cr.yp.to/\r\n                var gf = function (init) {\r\n                    var i, r = new Float64Array(16);\r\n                    if (init)\r\n                        for (i = 0; i < init.length; i++)\r\n                            r[i] = init[i];\r\n                    return r;\r\n                };\r\n                //  Pluggable, initialized in high-level API below.\r\n                var randombytes = function ( /* x, n */) { throw new Error('no PRNG'); };\r\n                var _0 = new Uint8Array(16);\r\n                var _9 = new Uint8Array(32);\r\n                _9[0] = 9;\r\n                var gf0 = gf(), gf1 = gf([1]), _121665 = gf([0xdb41, 1]), D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]), D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]), X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]), Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]), I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\r\n                function ts64(x, i, h, l) {\r\n                    x[i] = (h >> 24) & 0xff;\r\n                    x[i + 1] = (h >> 16) & 0xff;\r\n                    x[i + 2] = (h >> 8) & 0xff;\r\n                    x[i + 3] = h & 0xff;\r\n                    x[i + 4] = (l >> 24) & 0xff;\r\n                    x[i + 5] = (l >> 16) & 0xff;\r\n                    x[i + 6] = (l >> 8) & 0xff;\r\n                    x[i + 7] = l & 0xff;\r\n                }\r\n                function vn(x, xi, y, yi, n) {\r\n                    var i, d = 0;\r\n                    for (i = 0; i < n; i++)\r\n                        d |= x[xi + i] ^ y[yi + i];\r\n                    return (1 & ((d - 1) >>> 8)) - 1;\r\n                }\r\n                function crypto_verify_16(x, xi, y, yi) {\r\n                    return vn(x, xi, y, yi, 16);\r\n                }\r\n                function crypto_verify_32(x, xi, y, yi) {\r\n                    return vn(x, xi, y, yi, 32);\r\n                }\r\n                function core_salsa20(o, p, k, c) {\r\n                    var j0 = c[0] & 0xff | (c[1] & 0xff) << 8 | (c[2] & 0xff) << 16 | (c[3] & 0xff) << 24, j1 = k[0] & 0xff | (k[1] & 0xff) << 8 | (k[2] & 0xff) << 16 | (k[3] & 0xff) << 24, j2 = k[4] & 0xff | (k[5] & 0xff) << 8 | (k[6] & 0xff) << 16 | (k[7] & 0xff) << 24, j3 = k[8] & 0xff | (k[9] & 0xff) << 8 | (k[10] & 0xff) << 16 | (k[11] & 0xff) << 24, j4 = k[12] & 0xff | (k[13] & 0xff) << 8 | (k[14] & 0xff) << 16 | (k[15] & 0xff) << 24, j5 = c[4] & 0xff | (c[5] & 0xff) << 8 | (c[6] & 0xff) << 16 | (c[7] & 0xff) << 24, j6 = p[0] & 0xff | (p[1] & 0xff) << 8 | (p[2] & 0xff) << 16 | (p[3] & 0xff) << 24, j7 = p[4] & 0xff | (p[5] & 0xff) << 8 | (p[6] & 0xff) << 16 | (p[7] & 0xff) << 24, j8 = p[8] & 0xff | (p[9] & 0xff) << 8 | (p[10] & 0xff) << 16 | (p[11] & 0xff) << 24, j9 = p[12] & 0xff | (p[13] & 0xff) << 8 | (p[14] & 0xff) << 16 | (p[15] & 0xff) << 24, j10 = c[8] & 0xff | (c[9] & 0xff) << 8 | (c[10] & 0xff) << 16 | (c[11] & 0xff) << 24, j11 = k[16] & 0xff | (k[17] & 0xff) << 8 | (k[18] & 0xff) << 16 | (k[19] & 0xff) << 24, j12 = k[20] & 0xff | (k[21] & 0xff) << 8 | (k[22] & 0xff) << 16 | (k[23] & 0xff) << 24, j13 = k[24] & 0xff | (k[25] & 0xff) << 8 | (k[26] & 0xff) << 16 | (k[27] & 0xff) << 24, j14 = k[28] & 0xff | (k[29] & 0xff) << 8 | (k[30] & 0xff) << 16 | (k[31] & 0xff) << 24, j15 = c[12] & 0xff | (c[13] & 0xff) << 8 | (c[14] & 0xff) << 16 | (c[15] & 0xff) << 24;\r\n                    var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7, x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14, x15 = j15, u;\r\n                    for (var i = 0; i < 20; i += 2) {\r\n                        u = x0 + x12 | 0;\r\n                        x4 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x4 + x0 | 0;\r\n                        x8 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x8 + x4 | 0;\r\n                        x12 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x12 + x8 | 0;\r\n                        x0 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x5 + x1 | 0;\r\n                        x9 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x9 + x5 | 0;\r\n                        x13 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x13 + x9 | 0;\r\n                        x1 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x1 + x13 | 0;\r\n                        x5 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x10 + x6 | 0;\r\n                        x14 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x14 + x10 | 0;\r\n                        x2 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x2 + x14 | 0;\r\n                        x6 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x6 + x2 | 0;\r\n                        x10 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x15 + x11 | 0;\r\n                        x3 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x3 + x15 | 0;\r\n                        x7 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x7 + x3 | 0;\r\n                        x11 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x11 + x7 | 0;\r\n                        x15 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x0 + x3 | 0;\r\n                        x1 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x1 + x0 | 0;\r\n                        x2 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x2 + x1 | 0;\r\n                        x3 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x3 + x2 | 0;\r\n                        x0 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x5 + x4 | 0;\r\n                        x6 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x6 + x5 | 0;\r\n                        x7 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x7 + x6 | 0;\r\n                        x4 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x4 + x7 | 0;\r\n                        x5 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x10 + x9 | 0;\r\n                        x11 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x11 + x10 | 0;\r\n                        x8 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x8 + x11 | 0;\r\n                        x9 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x9 + x8 | 0;\r\n                        x10 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x15 + x14 | 0;\r\n                        x12 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x12 + x15 | 0;\r\n                        x13 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x13 + x12 | 0;\r\n                        x14 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x14 + x13 | 0;\r\n                        x15 ^= u << 18 | u >>> (32 - 18);\r\n                    }\r\n                    x0 = x0 + j0 | 0;\r\n                    x1 = x1 + j1 | 0;\r\n                    x2 = x2 + j2 | 0;\r\n                    x3 = x3 + j3 | 0;\r\n                    x4 = x4 + j4 | 0;\r\n                    x5 = x5 + j5 | 0;\r\n                    x6 = x6 + j6 | 0;\r\n                    x7 = x7 + j7 | 0;\r\n                    x8 = x8 + j8 | 0;\r\n                    x9 = x9 + j9 | 0;\r\n                    x10 = x10 + j10 | 0;\r\n                    x11 = x11 + j11 | 0;\r\n                    x12 = x12 + j12 | 0;\r\n                    x13 = x13 + j13 | 0;\r\n                    x14 = x14 + j14 | 0;\r\n                    x15 = x15 + j15 | 0;\r\n                    o[0] = x0 >>> 0 & 0xff;\r\n                    o[1] = x0 >>> 8 & 0xff;\r\n                    o[2] = x0 >>> 16 & 0xff;\r\n                    o[3] = x0 >>> 24 & 0xff;\r\n                    o[4] = x1 >>> 0 & 0xff;\r\n                    o[5] = x1 >>> 8 & 0xff;\r\n                    o[6] = x1 >>> 16 & 0xff;\r\n                    o[7] = x1 >>> 24 & 0xff;\r\n                    o[8] = x2 >>> 0 & 0xff;\r\n                    o[9] = x2 >>> 8 & 0xff;\r\n                    o[10] = x2 >>> 16 & 0xff;\r\n                    o[11] = x2 >>> 24 & 0xff;\r\n                    o[12] = x3 >>> 0 & 0xff;\r\n                    o[13] = x3 >>> 8 & 0xff;\r\n                    o[14] = x3 >>> 16 & 0xff;\r\n                    o[15] = x3 >>> 24 & 0xff;\r\n                    o[16] = x4 >>> 0 & 0xff;\r\n                    o[17] = x4 >>> 8 & 0xff;\r\n                    o[18] = x4 >>> 16 & 0xff;\r\n                    o[19] = x4 >>> 24 & 0xff;\r\n                    o[20] = x5 >>> 0 & 0xff;\r\n                    o[21] = x5 >>> 8 & 0xff;\r\n                    o[22] = x5 >>> 16 & 0xff;\r\n                    o[23] = x5 >>> 24 & 0xff;\r\n                    o[24] = x6 >>> 0 & 0xff;\r\n                    o[25] = x6 >>> 8 & 0xff;\r\n                    o[26] = x6 >>> 16 & 0xff;\r\n                    o[27] = x6 >>> 24 & 0xff;\r\n                    o[28] = x7 >>> 0 & 0xff;\r\n                    o[29] = x7 >>> 8 & 0xff;\r\n                    o[30] = x7 >>> 16 & 0xff;\r\n                    o[31] = x7 >>> 24 & 0xff;\r\n                    o[32] = x8 >>> 0 & 0xff;\r\n                    o[33] = x8 >>> 8 & 0xff;\r\n                    o[34] = x8 >>> 16 & 0xff;\r\n                    o[35] = x8 >>> 24 & 0xff;\r\n                    o[36] = x9 >>> 0 & 0xff;\r\n                    o[37] = x9 >>> 8 & 0xff;\r\n                    o[38] = x9 >>> 16 & 0xff;\r\n                    o[39] = x9 >>> 24 & 0xff;\r\n                    o[40] = x10 >>> 0 & 0xff;\r\n                    o[41] = x10 >>> 8 & 0xff;\r\n                    o[42] = x10 >>> 16 & 0xff;\r\n                    o[43] = x10 >>> 24 & 0xff;\r\n                    o[44] = x11 >>> 0 & 0xff;\r\n                    o[45] = x11 >>> 8 & 0xff;\r\n                    o[46] = x11 >>> 16 & 0xff;\r\n                    o[47] = x11 >>> 24 & 0xff;\r\n                    o[48] = x12 >>> 0 & 0xff;\r\n                    o[49] = x12 >>> 8 & 0xff;\r\n                    o[50] = x12 >>> 16 & 0xff;\r\n                    o[51] = x12 >>> 24 & 0xff;\r\n                    o[52] = x13 >>> 0 & 0xff;\r\n                    o[53] = x13 >>> 8 & 0xff;\r\n                    o[54] = x13 >>> 16 & 0xff;\r\n                    o[55] = x13 >>> 24 & 0xff;\r\n                    o[56] = x14 >>> 0 & 0xff;\r\n                    o[57] = x14 >>> 8 & 0xff;\r\n                    o[58] = x14 >>> 16 & 0xff;\r\n                    o[59] = x14 >>> 24 & 0xff;\r\n                    o[60] = x15 >>> 0 & 0xff;\r\n                    o[61] = x15 >>> 8 & 0xff;\r\n                    o[62] = x15 >>> 16 & 0xff;\r\n                    o[63] = x15 >>> 24 & 0xff;\r\n                }\r\n                function core_hsalsa20(o, p, k, c) {\r\n                    var j0 = c[0] & 0xff | (c[1] & 0xff) << 8 | (c[2] & 0xff) << 16 | (c[3] & 0xff) << 24, j1 = k[0] & 0xff | (k[1] & 0xff) << 8 | (k[2] & 0xff) << 16 | (k[3] & 0xff) << 24, j2 = k[4] & 0xff | (k[5] & 0xff) << 8 | (k[6] & 0xff) << 16 | (k[7] & 0xff) << 24, j3 = k[8] & 0xff | (k[9] & 0xff) << 8 | (k[10] & 0xff) << 16 | (k[11] & 0xff) << 24, j4 = k[12] & 0xff | (k[13] & 0xff) << 8 | (k[14] & 0xff) << 16 | (k[15] & 0xff) << 24, j5 = c[4] & 0xff | (c[5] & 0xff) << 8 | (c[6] & 0xff) << 16 | (c[7] & 0xff) << 24, j6 = p[0] & 0xff | (p[1] & 0xff) << 8 | (p[2] & 0xff) << 16 | (p[3] & 0xff) << 24, j7 = p[4] & 0xff | (p[5] & 0xff) << 8 | (p[6] & 0xff) << 16 | (p[7] & 0xff) << 24, j8 = p[8] & 0xff | (p[9] & 0xff) << 8 | (p[10] & 0xff) << 16 | (p[11] & 0xff) << 24, j9 = p[12] & 0xff | (p[13] & 0xff) << 8 | (p[14] & 0xff) << 16 | (p[15] & 0xff) << 24, j10 = c[8] & 0xff | (c[9] & 0xff) << 8 | (c[10] & 0xff) << 16 | (c[11] & 0xff) << 24, j11 = k[16] & 0xff | (k[17] & 0xff) << 8 | (k[18] & 0xff) << 16 | (k[19] & 0xff) << 24, j12 = k[20] & 0xff | (k[21] & 0xff) << 8 | (k[22] & 0xff) << 16 | (k[23] & 0xff) << 24, j13 = k[24] & 0xff | (k[25] & 0xff) << 8 | (k[26] & 0xff) << 16 | (k[27] & 0xff) << 24, j14 = k[28] & 0xff | (k[29] & 0xff) << 8 | (k[30] & 0xff) << 16 | (k[31] & 0xff) << 24, j15 = c[12] & 0xff | (c[13] & 0xff) << 8 | (c[14] & 0xff) << 16 | (c[15] & 0xff) << 24;\r\n                    var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7, x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14, x15 = j15, u;\r\n                    for (var i = 0; i < 20; i += 2) {\r\n                        u = x0 + x12 | 0;\r\n                        x4 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x4 + x0 | 0;\r\n                        x8 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x8 + x4 | 0;\r\n                        x12 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x12 + x8 | 0;\r\n                        x0 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x5 + x1 | 0;\r\n                        x9 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x9 + x5 | 0;\r\n                        x13 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x13 + x9 | 0;\r\n                        x1 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x1 + x13 | 0;\r\n                        x5 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x10 + x6 | 0;\r\n                        x14 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x14 + x10 | 0;\r\n                        x2 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x2 + x14 | 0;\r\n                        x6 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x6 + x2 | 0;\r\n                        x10 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x15 + x11 | 0;\r\n                        x3 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x3 + x15 | 0;\r\n                        x7 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x7 + x3 | 0;\r\n                        x11 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x11 + x7 | 0;\r\n                        x15 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x0 + x3 | 0;\r\n                        x1 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x1 + x0 | 0;\r\n                        x2 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x2 + x1 | 0;\r\n                        x3 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x3 + x2 | 0;\r\n                        x0 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x5 + x4 | 0;\r\n                        x6 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x6 + x5 | 0;\r\n                        x7 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x7 + x6 | 0;\r\n                        x4 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x4 + x7 | 0;\r\n                        x5 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x10 + x9 | 0;\r\n                        x11 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x11 + x10 | 0;\r\n                        x8 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x8 + x11 | 0;\r\n                        x9 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x9 + x8 | 0;\r\n                        x10 ^= u << 18 | u >>> (32 - 18);\r\n                        u = x15 + x14 | 0;\r\n                        x12 ^= u << 7 | u >>> (32 - 7);\r\n                        u = x12 + x15 | 0;\r\n                        x13 ^= u << 9 | u >>> (32 - 9);\r\n                        u = x13 + x12 | 0;\r\n                        x14 ^= u << 13 | u >>> (32 - 13);\r\n                        u = x14 + x13 | 0;\r\n                        x15 ^= u << 18 | u >>> (32 - 18);\r\n                    }\r\n                    o[0] = x0 >>> 0 & 0xff;\r\n                    o[1] = x0 >>> 8 & 0xff;\r\n                    o[2] = x0 >>> 16 & 0xff;\r\n                    o[3] = x0 >>> 24 & 0xff;\r\n                    o[4] = x5 >>> 0 & 0xff;\r\n                    o[5] = x5 >>> 8 & 0xff;\r\n                    o[6] = x5 >>> 16 & 0xff;\r\n                    o[7] = x5 >>> 24 & 0xff;\r\n                    o[8] = x10 >>> 0 & 0xff;\r\n                    o[9] = x10 >>> 8 & 0xff;\r\n                    o[10] = x10 >>> 16 & 0xff;\r\n                    o[11] = x10 >>> 24 & 0xff;\r\n                    o[12] = x15 >>> 0 & 0xff;\r\n                    o[13] = x15 >>> 8 & 0xff;\r\n                    o[14] = x15 >>> 16 & 0xff;\r\n                    o[15] = x15 >>> 24 & 0xff;\r\n                    o[16] = x6 >>> 0 & 0xff;\r\n                    o[17] = x6 >>> 8 & 0xff;\r\n                    o[18] = x6 >>> 16 & 0xff;\r\n                    o[19] = x6 >>> 24 & 0xff;\r\n                    o[20] = x7 >>> 0 & 0xff;\r\n                    o[21] = x7 >>> 8 & 0xff;\r\n                    o[22] = x7 >>> 16 & 0xff;\r\n                    o[23] = x7 >>> 24 & 0xff;\r\n                    o[24] = x8 >>> 0 & 0xff;\r\n                    o[25] = x8 >>> 8 & 0xff;\r\n                    o[26] = x8 >>> 16 & 0xff;\r\n                    o[27] = x8 >>> 24 & 0xff;\r\n                    o[28] = x9 >>> 0 & 0xff;\r\n                    o[29] = x9 >>> 8 & 0xff;\r\n                    o[30] = x9 >>> 16 & 0xff;\r\n                    o[31] = x9 >>> 24 & 0xff;\r\n                }\r\n                function crypto_core_salsa20(out, inp, k, c) {\r\n                    core_salsa20(out, inp, k, c);\r\n                }\r\n                function crypto_core_hsalsa20(out, inp, k, c) {\r\n                    core_hsalsa20(out, inp, k, c);\r\n                }\r\n                var sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\r\n                // \"expand 32-byte k\"\r\n                function crypto_stream_salsa20_xor(c, cpos, m, mpos, b, n, k) {\r\n                    var z = new Uint8Array(16), x = new Uint8Array(64);\r\n                    var u, i;\r\n                    for (i = 0; i < 16; i++)\r\n                        z[i] = 0;\r\n                    for (i = 0; i < 8; i++)\r\n                        z[i] = n[i];\r\n                    while (b >= 64) {\r\n                        crypto_core_salsa20(x, z, k, sigma);\r\n                        for (i = 0; i < 64; i++)\r\n                            c[cpos + i] = m[mpos + i] ^ x[i];\r\n                        u = 1;\r\n                        for (i = 8; i < 16; i++) {\r\n                            u = u + (z[i] & 0xff) | 0;\r\n                            z[i] = u & 0xff;\r\n                            u >>>= 8;\r\n                        }\r\n                        b -= 64;\r\n                        cpos += 64;\r\n                        mpos += 64;\r\n                    }\r\n                    if (b > 0) {\r\n                        crypto_core_salsa20(x, z, k, sigma);\r\n                        for (i = 0; i < b; i++)\r\n                            c[cpos + i] = m[mpos + i] ^ x[i];\r\n                    }\r\n                    return 0;\r\n                }\r\n                function crypto_stream_salsa20(c, cpos, b, n, k) {\r\n                    var z = new Uint8Array(16), x = new Uint8Array(64);\r\n                    var u, i;\r\n                    for (i = 0; i < 16; i++)\r\n                        z[i] = 0;\r\n                    for (i = 0; i < 8; i++)\r\n                        z[i] = n[i];\r\n                    while (b >= 64) {\r\n                        crypto_core_salsa20(x, z, k, sigma);\r\n                        for (i = 0; i < 64; i++)\r\n                            c[cpos + i] = x[i];\r\n                        u = 1;\r\n                        for (i = 8; i < 16; i++) {\r\n                            u = u + (z[i] & 0xff) | 0;\r\n                            z[i] = u & 0xff;\r\n                            u >>>= 8;\r\n                        }\r\n                        b -= 64;\r\n                        cpos += 64;\r\n                    }\r\n                    if (b > 0) {\r\n                        crypto_core_salsa20(x, z, k, sigma);\r\n                        for (i = 0; i < b; i++)\r\n                            c[cpos + i] = x[i];\r\n                    }\r\n                    return 0;\r\n                }\r\n                function crypto_stream(c, cpos, d, n, k) {\r\n                    var s = new Uint8Array(32);\r\n                    crypto_core_hsalsa20(s, n, k, sigma);\r\n                    var sn = new Uint8Array(8);\r\n                    for (var i = 0; i < 8; i++)\r\n                        sn[i] = n[i + 16];\r\n                    return crypto_stream_salsa20(c, cpos, d, sn, s);\r\n                }\r\n                function crypto_stream_xor(c, cpos, m, mpos, d, n, k) {\r\n                    var s = new Uint8Array(32);\r\n                    crypto_core_hsalsa20(s, n, k, sigma);\r\n                    var sn = new Uint8Array(8);\r\n                    for (var i = 0; i < 8; i++)\r\n                        sn[i] = n[i + 16];\r\n                    return crypto_stream_salsa20_xor(c, cpos, m, mpos, d, sn, s);\r\n                }\r\n                /*\r\n                * Port of Andrew Moon's Poly1305-donna-16. Public domain.\r\n                * https://github.com/floodyberry/poly1305-donna\r\n                */\r\n                var poly1305 = function (key) {\r\n                    this.buffer = new Uint8Array(16);\r\n                    this.r = new Uint16Array(10);\r\n                    this.h = new Uint16Array(10);\r\n                    this.pad = new Uint16Array(8);\r\n                    this.leftover = 0;\r\n                    this.fin = 0;\r\n                    var t0, t1, t2, t3, t4, t5, t6, t7;\r\n                    t0 = key[0] & 0xff | (key[1] & 0xff) << 8;\r\n                    this.r[0] = (t0) & 0x1fff;\r\n                    t1 = key[2] & 0xff | (key[3] & 0xff) << 8;\r\n                    this.r[1] = ((t0 >>> 13) | (t1 << 3)) & 0x1fff;\r\n                    t2 = key[4] & 0xff | (key[5] & 0xff) << 8;\r\n                    this.r[2] = ((t1 >>> 10) | (t2 << 6)) & 0x1f03;\r\n                    t3 = key[6] & 0xff | (key[7] & 0xff) << 8;\r\n                    this.r[3] = ((t2 >>> 7) | (t3 << 9)) & 0x1fff;\r\n                    t4 = key[8] & 0xff | (key[9] & 0xff) << 8;\r\n                    this.r[4] = ((t3 >>> 4) | (t4 << 12)) & 0x00ff;\r\n                    this.r[5] = ((t4 >>> 1)) & 0x1ffe;\r\n                    t5 = key[10] & 0xff | (key[11] & 0xff) << 8;\r\n                    this.r[6] = ((t4 >>> 14) | (t5 << 2)) & 0x1fff;\r\n                    t6 = key[12] & 0xff | (key[13] & 0xff) << 8;\r\n                    this.r[7] = ((t5 >>> 11) | (t6 << 5)) & 0x1f81;\r\n                    t7 = key[14] & 0xff | (key[15] & 0xff) << 8;\r\n                    this.r[8] = ((t6 >>> 8) | (t7 << 8)) & 0x1fff;\r\n                    this.r[9] = ((t7 >>> 5)) & 0x007f;\r\n                    this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\r\n                    this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\r\n                    this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\r\n                    this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\r\n                    this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\r\n                    this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\r\n                    this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\r\n                    this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\r\n                };\r\n                poly1305.prototype.blocks = function (m, mpos, bytes) {\r\n                    var hibit = this.fin ? 0 : (1 << 11);\r\n                    var t0, t1, t2, t3, t4, t5, t6, t7, c;\r\n                    var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\r\n                    var h0 = this.h[0], h1 = this.h[1], h2 = this.h[2], h3 = this.h[3], h4 = this.h[4], h5 = this.h[5], h6 = this.h[6], h7 = this.h[7], h8 = this.h[8], h9 = this.h[9];\r\n                    var r0 = this.r[0], r1 = this.r[1], r2 = this.r[2], r3 = this.r[3], r4 = this.r[4], r5 = this.r[5], r6 = this.r[6], r7 = this.r[7], r8 = this.r[8], r9 = this.r[9];\r\n                    while (bytes >= 16) {\r\n                        t0 = m[mpos + 0] & 0xff | (m[mpos + 1] & 0xff) << 8;\r\n                        h0 += (t0) & 0x1fff;\r\n                        t1 = m[mpos + 2] & 0xff | (m[mpos + 3] & 0xff) << 8;\r\n                        h1 += ((t0 >>> 13) | (t1 << 3)) & 0x1fff;\r\n                        t2 = m[mpos + 4] & 0xff | (m[mpos + 5] & 0xff) << 8;\r\n                        h2 += ((t1 >>> 10) | (t2 << 6)) & 0x1fff;\r\n                        t3 = m[mpos + 6] & 0xff | (m[mpos + 7] & 0xff) << 8;\r\n                        h3 += ((t2 >>> 7) | (t3 << 9)) & 0x1fff;\r\n                        t4 = m[mpos + 8] & 0xff | (m[mpos + 9] & 0xff) << 8;\r\n                        h4 += ((t3 >>> 4) | (t4 << 12)) & 0x1fff;\r\n                        h5 += ((t4 >>> 1)) & 0x1fff;\r\n                        t5 = m[mpos + 10] & 0xff | (m[mpos + 11] & 0xff) << 8;\r\n                        h6 += ((t4 >>> 14) | (t5 << 2)) & 0x1fff;\r\n                        t6 = m[mpos + 12] & 0xff | (m[mpos + 13] & 0xff) << 8;\r\n                        h7 += ((t5 >>> 11) | (t6 << 5)) & 0x1fff;\r\n                        t7 = m[mpos + 14] & 0xff | (m[mpos + 15] & 0xff) << 8;\r\n                        h8 += ((t6 >>> 8) | (t7 << 8)) & 0x1fff;\r\n                        h9 += ((t7 >>> 5)) | hibit;\r\n                        c = 0;\r\n                        d0 = c;\r\n                        d0 += h0 * r0;\r\n                        d0 += h1 * (5 * r9);\r\n                        d0 += h2 * (5 * r8);\r\n                        d0 += h3 * (5 * r7);\r\n                        d0 += h4 * (5 * r6);\r\n                        c = (d0 >>> 13);\r\n                        d0 &= 0x1fff;\r\n                        d0 += h5 * (5 * r5);\r\n                        d0 += h6 * (5 * r4);\r\n                        d0 += h7 * (5 * r3);\r\n                        d0 += h8 * (5 * r2);\r\n                        d0 += h9 * (5 * r1);\r\n                        c += (d0 >>> 13);\r\n                        d0 &= 0x1fff;\r\n                        d1 = c;\r\n                        d1 += h0 * r1;\r\n                        d1 += h1 * r0;\r\n                        d1 += h2 * (5 * r9);\r\n                        d1 += h3 * (5 * r8);\r\n                        d1 += h4 * (5 * r7);\r\n                        c = (d1 >>> 13);\r\n                        d1 &= 0x1fff;\r\n                        d1 += h5 * (5 * r6);\r\n                        d1 += h6 * (5 * r5);\r\n                        d1 += h7 * (5 * r4);\r\n                        d1 += h8 * (5 * r3);\r\n                        d1 += h9 * (5 * r2);\r\n                        c += (d1 >>> 13);\r\n                        d1 &= 0x1fff;\r\n                        d2 = c;\r\n                        d2 += h0 * r2;\r\n                        d2 += h1 * r1;\r\n                        d2 += h2 * r0;\r\n                        d2 += h3 * (5 * r9);\r\n                        d2 += h4 * (5 * r8);\r\n                        c = (d2 >>> 13);\r\n                        d2 &= 0x1fff;\r\n                        d2 += h5 * (5 * r7);\r\n                        d2 += h6 * (5 * r6);\r\n                        d2 += h7 * (5 * r5);\r\n                        d2 += h8 * (5 * r4);\r\n                        d2 += h9 * (5 * r3);\r\n                        c += (d2 >>> 13);\r\n                        d2 &= 0x1fff;\r\n                        d3 = c;\r\n                        d3 += h0 * r3;\r\n                        d3 += h1 * r2;\r\n                        d3 += h2 * r1;\r\n                        d3 += h3 * r0;\r\n                        d3 += h4 * (5 * r9);\r\n                        c = (d3 >>> 13);\r\n                        d3 &= 0x1fff;\r\n                        d3 += h5 * (5 * r8);\r\n                        d3 += h6 * (5 * r7);\r\n                        d3 += h7 * (5 * r6);\r\n                        d3 += h8 * (5 * r5);\r\n                        d3 += h9 * (5 * r4);\r\n                        c += (d3 >>> 13);\r\n                        d3 &= 0x1fff;\r\n                        d4 = c;\r\n                        d4 += h0 * r4;\r\n                        d4 += h1 * r3;\r\n                        d4 += h2 * r2;\r\n                        d4 += h3 * r1;\r\n                        d4 += h4 * r0;\r\n                        c = (d4 >>> 13);\r\n                        d4 &= 0x1fff;\r\n                        d4 += h5 * (5 * r9);\r\n                        d4 += h6 * (5 * r8);\r\n                        d4 += h7 * (5 * r7);\r\n                        d4 += h8 * (5 * r6);\r\n                        d4 += h9 * (5 * r5);\r\n                        c += (d4 >>> 13);\r\n                        d4 &= 0x1fff;\r\n                        d5 = c;\r\n                        d5 += h0 * r5;\r\n                        d5 += h1 * r4;\r\n                        d5 += h2 * r3;\r\n                        d5 += h3 * r2;\r\n                        d5 += h4 * r1;\r\n                        c = (d5 >>> 13);\r\n                        d5 &= 0x1fff;\r\n                        d5 += h5 * r0;\r\n                        d5 += h6 * (5 * r9);\r\n                        d5 += h7 * (5 * r8);\r\n                        d5 += h8 * (5 * r7);\r\n                        d5 += h9 * (5 * r6);\r\n                        c += (d5 >>> 13);\r\n                        d5 &= 0x1fff;\r\n                        d6 = c;\r\n                        d6 += h0 * r6;\r\n                        d6 += h1 * r5;\r\n                        d6 += h2 * r4;\r\n                        d6 += h3 * r3;\r\n                        d6 += h4 * r2;\r\n                        c = (d6 >>> 13);\r\n                        d6 &= 0x1fff;\r\n                        d6 += h5 * r1;\r\n                        d6 += h6 * r0;\r\n                        d6 += h7 * (5 * r9);\r\n                        d6 += h8 * (5 * r8);\r\n                        d6 += h9 * (5 * r7);\r\n                        c += (d6 >>> 13);\r\n                        d6 &= 0x1fff;\r\n                        d7 = c;\r\n                        d7 += h0 * r7;\r\n                        d7 += h1 * r6;\r\n                        d7 += h2 * r5;\r\n                        d7 += h3 * r4;\r\n                        d7 += h4 * r3;\r\n                        c = (d7 >>> 13);\r\n                        d7 &= 0x1fff;\r\n                        d7 += h5 * r2;\r\n                        d7 += h6 * r1;\r\n                        d7 += h7 * r0;\r\n                        d7 += h8 * (5 * r9);\r\n                        d7 += h9 * (5 * r8);\r\n                        c += (d7 >>> 13);\r\n                        d7 &= 0x1fff;\r\n                        d8 = c;\r\n                        d8 += h0 * r8;\r\n                        d8 += h1 * r7;\r\n                        d8 += h2 * r6;\r\n                        d8 += h3 * r5;\r\n                        d8 += h4 * r4;\r\n                        c = (d8 >>> 13);\r\n                        d8 &= 0x1fff;\r\n                        d8 += h5 * r3;\r\n                        d8 += h6 * r2;\r\n                        d8 += h7 * r1;\r\n                        d8 += h8 * r0;\r\n                        d8 += h9 * (5 * r9);\r\n                        c += (d8 >>> 13);\r\n                        d8 &= 0x1fff;\r\n                        d9 = c;\r\n                        d9 += h0 * r9;\r\n                        d9 += h1 * r8;\r\n                        d9 += h2 * r7;\r\n                        d9 += h3 * r6;\r\n                        d9 += h4 * r5;\r\n                        c = (d9 >>> 13);\r\n                        d9 &= 0x1fff;\r\n                        d9 += h5 * r4;\r\n                        d9 += h6 * r3;\r\n                        d9 += h7 * r2;\r\n                        d9 += h8 * r1;\r\n                        d9 += h9 * r0;\r\n                        c += (d9 >>> 13);\r\n                        d9 &= 0x1fff;\r\n                        c = (((c << 2) + c)) | 0;\r\n                        c = (c + d0) | 0;\r\n                        d0 = c & 0x1fff;\r\n                        c = (c >>> 13);\r\n                        d1 += c;\r\n                        h0 = d0;\r\n                        h1 = d1;\r\n                        h2 = d2;\r\n                        h3 = d3;\r\n                        h4 = d4;\r\n                        h5 = d5;\r\n                        h6 = d6;\r\n                        h7 = d7;\r\n                        h8 = d8;\r\n                        h9 = d9;\r\n                        mpos += 16;\r\n                        bytes -= 16;\r\n                    }\r\n                    this.h[0] = h0;\r\n                    this.h[1] = h1;\r\n                    this.h[2] = h2;\r\n                    this.h[3] = h3;\r\n                    this.h[4] = h4;\r\n                    this.h[5] = h5;\r\n                    this.h[6] = h6;\r\n                    this.h[7] = h7;\r\n                    this.h[8] = h8;\r\n                    this.h[9] = h9;\r\n                };\r\n                poly1305.prototype.finish = function (mac, macpos) {\r\n                    var g = new Uint16Array(10);\r\n                    var c, mask, f, i;\r\n                    if (this.leftover) {\r\n                        i = this.leftover;\r\n                        this.buffer[i++] = 1;\r\n                        for (; i < 16; i++)\r\n                            this.buffer[i] = 0;\r\n                        this.fin = 1;\r\n                        this.blocks(this.buffer, 0, 16);\r\n                    }\r\n                    c = this.h[1] >>> 13;\r\n                    this.h[1] &= 0x1fff;\r\n                    for (i = 2; i < 10; i++) {\r\n                        this.h[i] += c;\r\n                        c = this.h[i] >>> 13;\r\n                        this.h[i] &= 0x1fff;\r\n                    }\r\n                    this.h[0] += (c * 5);\r\n                    c = this.h[0] >>> 13;\r\n                    this.h[0] &= 0x1fff;\r\n                    this.h[1] += c;\r\n                    c = this.h[1] >>> 13;\r\n                    this.h[1] &= 0x1fff;\r\n                    this.h[2] += c;\r\n                    g[0] = this.h[0] + 5;\r\n                    c = g[0] >>> 13;\r\n                    g[0] &= 0x1fff;\r\n                    for (i = 1; i < 10; i++) {\r\n                        g[i] = this.h[i] + c;\r\n                        c = g[i] >>> 13;\r\n                        g[i] &= 0x1fff;\r\n                    }\r\n                    g[9] -= (1 << 13);\r\n                    mask = (c ^ 1) - 1;\r\n                    for (i = 0; i < 10; i++)\r\n                        g[i] &= mask;\r\n                    mask = ~mask;\r\n                    for (i = 0; i < 10; i++)\r\n                        this.h[i] = (this.h[i] & mask) | g[i];\r\n                    this.h[0] = ((this.h[0]) | (this.h[1] << 13)) & 0xffff;\r\n                    this.h[1] = ((this.h[1] >>> 3) | (this.h[2] << 10)) & 0xffff;\r\n                    this.h[2] = ((this.h[2] >>> 6) | (this.h[3] << 7)) & 0xffff;\r\n                    this.h[3] = ((this.h[3] >>> 9) | (this.h[4] << 4)) & 0xffff;\r\n                    this.h[4] = ((this.h[4] >>> 12) | (this.h[5] << 1) | (this.h[6] << 14)) & 0xffff;\r\n                    this.h[5] = ((this.h[6] >>> 2) | (this.h[7] << 11)) & 0xffff;\r\n                    this.h[6] = ((this.h[7] >>> 5) | (this.h[8] << 8)) & 0xffff;\r\n                    this.h[7] = ((this.h[8] >>> 8) | (this.h[9] << 5)) & 0xffff;\r\n                    f = this.h[0] + this.pad[0];\r\n                    this.h[0] = f & 0xffff;\r\n                    for (i = 1; i < 8; i++) {\r\n                        f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\r\n                        this.h[i] = f & 0xffff;\r\n                    }\r\n                    mac[macpos + 0] = (this.h[0] >>> 0) & 0xff;\r\n                    mac[macpos + 1] = (this.h[0] >>> 8) & 0xff;\r\n                    mac[macpos + 2] = (this.h[1] >>> 0) & 0xff;\r\n                    mac[macpos + 3] = (this.h[1] >>> 8) & 0xff;\r\n                    mac[macpos + 4] = (this.h[2] >>> 0) & 0xff;\r\n                    mac[macpos + 5] = (this.h[2] >>> 8) & 0xff;\r\n                    mac[macpos + 6] = (this.h[3] >>> 0) & 0xff;\r\n                    mac[macpos + 7] = (this.h[3] >>> 8) & 0xff;\r\n                    mac[macpos + 8] = (this.h[4] >>> 0) & 0xff;\r\n                    mac[macpos + 9] = (this.h[4] >>> 8) & 0xff;\r\n                    mac[macpos + 10] = (this.h[5] >>> 0) & 0xff;\r\n                    mac[macpos + 11] = (this.h[5] >>> 8) & 0xff;\r\n                    mac[macpos + 12] = (this.h[6] >>> 0) & 0xff;\r\n                    mac[macpos + 13] = (this.h[6] >>> 8) & 0xff;\r\n                    mac[macpos + 14] = (this.h[7] >>> 0) & 0xff;\r\n                    mac[macpos + 15] = (this.h[7] >>> 8) & 0xff;\r\n                };\r\n                poly1305.prototype.update = function (m, mpos, bytes) {\r\n                    var i, want;\r\n                    if (this.leftover) {\r\n                        want = (16 - this.leftover);\r\n                        if (want > bytes)\r\n                            want = bytes;\r\n                        for (i = 0; i < want; i++)\r\n                            this.buffer[this.leftover + i] = m[mpos + i];\r\n                        bytes -= want;\r\n                        mpos += want;\r\n                        this.leftover += want;\r\n                        if (this.leftover < 16)\r\n                            return;\r\n                        this.blocks(this.buffer, 0, 16);\r\n                        this.leftover = 0;\r\n                    }\r\n                    if (bytes >= 16) {\r\n                        want = bytes - (bytes % 16);\r\n                        this.blocks(m, mpos, want);\r\n                        mpos += want;\r\n                        bytes -= want;\r\n                    }\r\n                    if (bytes) {\r\n                        for (i = 0; i < bytes; i++)\r\n                            this.buffer[this.leftover + i] = m[mpos + i];\r\n                        this.leftover += bytes;\r\n                    }\r\n                };\r\n                function crypto_onetimeauth(out, outpos, m, mpos, n, k) {\r\n                    var s = new poly1305(k);\r\n                    s.update(m, mpos, n);\r\n                    s.finish(out, outpos);\r\n                    return 0;\r\n                }\r\n                function crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\r\n                    var x = new Uint8Array(16);\r\n                    crypto_onetimeauth(x, 0, m, mpos, n, k);\r\n                    return crypto_verify_16(h, hpos, x, 0);\r\n                }\r\n                function crypto_secretbox(c, m, d, n, k) {\r\n                    var i;\r\n                    if (d < 32)\r\n                        return -1;\r\n                    crypto_stream_xor(c, 0, m, 0, d, n, k);\r\n                    crypto_onetimeauth(c, 16, c, 32, d - 32, c);\r\n                    for (i = 0; i < 16; i++)\r\n                        c[i] = 0;\r\n                    return 0;\r\n                }\r\n                function crypto_secretbox_open(m, c, d, n, k) {\r\n                    var i;\r\n                    var x = new Uint8Array(32);\r\n                    if (d < 32)\r\n                        return -1;\r\n                    crypto_stream(x, 0, 32, n, k);\r\n                    if (crypto_onetimeauth_verify(c, 16, c, 32, d - 32, x) !== 0)\r\n                        return -1;\r\n                    crypto_stream_xor(m, 0, c, 0, d, n, k);\r\n                    for (i = 0; i < 32; i++)\r\n                        m[i] = 0;\r\n                    return 0;\r\n                }\r\n                function set25519(r, a) {\r\n                    var i;\r\n                    for (i = 0; i < 16; i++)\r\n                        r[i] = a[i] | 0;\r\n                }\r\n                function car25519(o) {\r\n                    var i, v, c = 1;\r\n                    for (i = 0; i < 16; i++) {\r\n                        v = o[i] + c + 65535;\r\n                        c = Math.floor(v / 65536);\r\n                        o[i] = v - c * 65536;\r\n                    }\r\n                    o[0] += c - 1 + 37 * (c - 1);\r\n                }\r\n                function sel25519(p, q, b) {\r\n                    var t, c = ~(b - 1);\r\n                    for (var i = 0; i < 16; i++) {\r\n                        t = c & (p[i] ^ q[i]);\r\n                        p[i] ^= t;\r\n                        q[i] ^= t;\r\n                    }\r\n                }\r\n                function pack25519(o, n) {\r\n                    var i, j, b;\r\n                    var m = gf(), t = gf();\r\n                    for (i = 0; i < 16; i++)\r\n                        t[i] = n[i];\r\n                    car25519(t);\r\n                    car25519(t);\r\n                    car25519(t);\r\n                    for (j = 0; j < 2; j++) {\r\n                        m[0] = t[0] - 0xffed;\r\n                        for (i = 1; i < 15; i++) {\r\n                            m[i] = t[i] - 0xffff - ((m[i - 1] >> 16) & 1);\r\n                            m[i - 1] &= 0xffff;\r\n                        }\r\n                        m[15] = t[15] - 0x7fff - ((m[14] >> 16) & 1);\r\n                        b = (m[15] >> 16) & 1;\r\n                        m[14] &= 0xffff;\r\n                        sel25519(t, m, 1 - b);\r\n                    }\r\n                    for (i = 0; i < 16; i++) {\r\n                        o[2 * i] = t[i] & 0xff;\r\n                        o[2 * i + 1] = t[i] >> 8;\r\n                    }\r\n                }\r\n                function neq25519(a, b) {\r\n                    var c = new Uint8Array(32), d = new Uint8Array(32);\r\n                    pack25519(c, a);\r\n                    pack25519(d, b);\r\n                    return crypto_verify_32(c, 0, d, 0);\r\n                }\r\n                function par25519(a) {\r\n                    var d = new Uint8Array(32);\r\n                    pack25519(d, a);\r\n                    return d[0] & 1;\r\n                }\r\n                function unpack25519(o, n) {\r\n                    var i;\r\n                    for (i = 0; i < 16; i++)\r\n                        o[i] = n[2 * i] + (n[2 * i + 1] << 8);\r\n                    o[15] &= 0x7fff;\r\n                }\r\n                function A(o, a, b) {\r\n                    for (var i = 0; i < 16; i++)\r\n                        o[i] = a[i] + b[i];\r\n                }\r\n                function Z(o, a, b) {\r\n                    for (var i = 0; i < 16; i++)\r\n                        o[i] = a[i] - b[i];\r\n                }\r\n                function M(o, a, b) {\r\n                    var v, c, t0 = 0, t1 = 0, t2 = 0, t3 = 0, t4 = 0, t5 = 0, t6 = 0, t7 = 0, t8 = 0, t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0, t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0, t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0, b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7], b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11], b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];\r\n                    v = a[0];\r\n                    t0 += v * b0;\r\n                    t1 += v * b1;\r\n                    t2 += v * b2;\r\n                    t3 += v * b3;\r\n                    t4 += v * b4;\r\n                    t5 += v * b5;\r\n                    t6 += v * b6;\r\n                    t7 += v * b7;\r\n                    t8 += v * b8;\r\n                    t9 += v * b9;\r\n                    t10 += v * b10;\r\n                    t11 += v * b11;\r\n                    t12 += v * b12;\r\n                    t13 += v * b13;\r\n                    t14 += v * b14;\r\n                    t15 += v * b15;\r\n                    v = a[1];\r\n                    t1 += v * b0;\r\n                    t2 += v * b1;\r\n                    t3 += v * b2;\r\n                    t4 += v * b3;\r\n                    t5 += v * b4;\r\n                    t6 += v * b5;\r\n                    t7 += v * b6;\r\n                    t8 += v * b7;\r\n                    t9 += v * b8;\r\n                    t10 += v * b9;\r\n                    t11 += v * b10;\r\n                    t12 += v * b11;\r\n                    t13 += v * b12;\r\n                    t14 += v * b13;\r\n                    t15 += v * b14;\r\n                    t16 += v * b15;\r\n                    v = a[2];\r\n                    t2 += v * b0;\r\n                    t3 += v * b1;\r\n                    t4 += v * b2;\r\n                    t5 += v * b3;\r\n                    t6 += v * b4;\r\n                    t7 += v * b5;\r\n                    t8 += v * b6;\r\n                    t9 += v * b7;\r\n                    t10 += v * b8;\r\n                    t11 += v * b9;\r\n                    t12 += v * b10;\r\n                    t13 += v * b11;\r\n                    t14 += v * b12;\r\n                    t15 += v * b13;\r\n                    t16 += v * b14;\r\n                    t17 += v * b15;\r\n                    v = a[3];\r\n                    t3 += v * b0;\r\n                    t4 += v * b1;\r\n                    t5 += v * b2;\r\n                    t6 += v * b3;\r\n                    t7 += v * b4;\r\n                    t8 += v * b5;\r\n                    t9 += v * b6;\r\n                    t10 += v * b7;\r\n                    t11 += v * b8;\r\n                    t12 += v * b9;\r\n                    t13 += v * b10;\r\n                    t14 += v * b11;\r\n                    t15 += v * b12;\r\n                    t16 += v * b13;\r\n                    t17 += v * b14;\r\n                    t18 += v * b15;\r\n                    v = a[4];\r\n                    t4 += v * b0;\r\n                    t5 += v * b1;\r\n                    t6 += v * b2;\r\n                    t7 += v * b3;\r\n                    t8 += v * b4;\r\n                    t9 += v * b5;\r\n                    t10 += v * b6;\r\n                    t11 += v * b7;\r\n                    t12 += v * b8;\r\n                    t13 += v * b9;\r\n                    t14 += v * b10;\r\n                    t15 += v * b11;\r\n                    t16 += v * b12;\r\n                    t17 += v * b13;\r\n                    t18 += v * b14;\r\n                    t19 += v * b15;\r\n                    v = a[5];\r\n                    t5 += v * b0;\r\n                    t6 += v * b1;\r\n                    t7 += v * b2;\r\n                    t8 += v * b3;\r\n                    t9 += v * b4;\r\n                    t10 += v * b5;\r\n                    t11 += v * b6;\r\n                    t12 += v * b7;\r\n                    t13 += v * b8;\r\n                    t14 += v * b9;\r\n                    t15 += v * b10;\r\n                    t16 += v * b11;\r\n                    t17 += v * b12;\r\n                    t18 += v * b13;\r\n                    t19 += v * b14;\r\n                    t20 += v * b15;\r\n                    v = a[6];\r\n                    t6 += v * b0;\r\n                    t7 += v * b1;\r\n                    t8 += v * b2;\r\n                    t9 += v * b3;\r\n                    t10 += v * b4;\r\n                    t11 += v * b5;\r\n                    t12 += v * b6;\r\n                    t13 += v * b7;\r\n                    t14 += v * b8;\r\n                    t15 += v * b9;\r\n                    t16 += v * b10;\r\n                    t17 += v * b11;\r\n                    t18 += v * b12;\r\n                    t19 += v * b13;\r\n                    t20 += v * b14;\r\n                    t21 += v * b15;\r\n                    v = a[7];\r\n                    t7 += v * b0;\r\n                    t8 += v * b1;\r\n                    t9 += v * b2;\r\n                    t10 += v * b3;\r\n                    t11 += v * b4;\r\n                    t12 += v * b5;\r\n                    t13 += v * b6;\r\n                    t14 += v * b7;\r\n                    t15 += v * b8;\r\n                    t16 += v * b9;\r\n                    t17 += v * b10;\r\n                    t18 += v * b11;\r\n                    t19 += v * b12;\r\n                    t20 += v * b13;\r\n                    t21 += v * b14;\r\n                    t22 += v * b15;\r\n                    v = a[8];\r\n                    t8 += v * b0;\r\n                    t9 += v * b1;\r\n                    t10 += v * b2;\r\n                    t11 += v * b3;\r\n                    t12 += v * b4;\r\n                    t13 += v * b5;\r\n                    t14 += v * b6;\r\n                    t15 += v * b7;\r\n                    t16 += v * b8;\r\n                    t17 += v * b9;\r\n                    t18 += v * b10;\r\n                    t19 += v * b11;\r\n                    t20 += v * b12;\r\n                    t21 += v * b13;\r\n                    t22 += v * b14;\r\n                    t23 += v * b15;\r\n                    v = a[9];\r\n                    t9 += v * b0;\r\n                    t10 += v * b1;\r\n                    t11 += v * b2;\r\n                    t12 += v * b3;\r\n                    t13 += v * b4;\r\n                    t14 += v * b5;\r\n                    t15 += v * b6;\r\n                    t16 += v * b7;\r\n                    t17 += v * b8;\r\n                    t18 += v * b9;\r\n                    t19 += v * b10;\r\n                    t20 += v * b11;\r\n                    t21 += v * b12;\r\n                    t22 += v * b13;\r\n                    t23 += v * b14;\r\n                    t24 += v * b15;\r\n                    v = a[10];\r\n                    t10 += v * b0;\r\n                    t11 += v * b1;\r\n                    t12 += v * b2;\r\n                    t13 += v * b3;\r\n                    t14 += v * b4;\r\n                    t15 += v * b5;\r\n                    t16 += v * b6;\r\n                    t17 += v * b7;\r\n                    t18 += v * b8;\r\n                    t19 += v * b9;\r\n                    t20 += v * b10;\r\n                    t21 += v * b11;\r\n                    t22 += v * b12;\r\n                    t23 += v * b13;\r\n                    t24 += v * b14;\r\n                    t25 += v * b15;\r\n                    v = a[11];\r\n                    t11 += v * b0;\r\n                    t12 += v * b1;\r\n                    t13 += v * b2;\r\n                    t14 += v * b3;\r\n                    t15 += v * b4;\r\n                    t16 += v * b5;\r\n                    t17 += v * b6;\r\n                    t18 += v * b7;\r\n                    t19 += v * b8;\r\n                    t20 += v * b9;\r\n                    t21 += v * b10;\r\n                    t22 += v * b11;\r\n                    t23 += v * b12;\r\n                    t24 += v * b13;\r\n                    t25 += v * b14;\r\n                    t26 += v * b15;\r\n                    v = a[12];\r\n                    t12 += v * b0;\r\n                    t13 += v * b1;\r\n                    t14 += v * b2;\r\n                    t15 += v * b3;\r\n                    t16 += v * b4;\r\n                    t17 += v * b5;\r\n                    t18 += v * b6;\r\n                    t19 += v * b7;\r\n                    t20 += v * b8;\r\n                    t21 += v * b9;\r\n                    t22 += v * b10;\r\n                    t23 += v * b11;\r\n                    t24 += v * b12;\r\n                    t25 += v * b13;\r\n                    t26 += v * b14;\r\n                    t27 += v * b15;\r\n                    v = a[13];\r\n                    t13 += v * b0;\r\n                    t14 += v * b1;\r\n                    t15 += v * b2;\r\n                    t16 += v * b3;\r\n                    t17 += v * b4;\r\n                    t18 += v * b5;\r\n                    t19 += v * b6;\r\n                    t20 += v * b7;\r\n                    t21 += v * b8;\r\n                    t22 += v * b9;\r\n                    t23 += v * b10;\r\n                    t24 += v * b11;\r\n                    t25 += v * b12;\r\n                    t26 += v * b13;\r\n                    t27 += v * b14;\r\n                    t28 += v * b15;\r\n                    v = a[14];\r\n                    t14 += v * b0;\r\n                    t15 += v * b1;\r\n                    t16 += v * b2;\r\n                    t17 += v * b3;\r\n                    t18 += v * b4;\r\n                    t19 += v * b5;\r\n                    t20 += v * b6;\r\n                    t21 += v * b7;\r\n                    t22 += v * b8;\r\n                    t23 += v * b9;\r\n                    t24 += v * b10;\r\n                    t25 += v * b11;\r\n                    t26 += v * b12;\r\n                    t27 += v * b13;\r\n                    t28 += v * b14;\r\n                    t29 += v * b15;\r\n                    v = a[15];\r\n                    t15 += v * b0;\r\n                    t16 += v * b1;\r\n                    t17 += v * b2;\r\n                    t18 += v * b3;\r\n                    t19 += v * b4;\r\n                    t20 += v * b5;\r\n                    t21 += v * b6;\r\n                    t22 += v * b7;\r\n                    t23 += v * b8;\r\n                    t24 += v * b9;\r\n                    t25 += v * b10;\r\n                    t26 += v * b11;\r\n                    t27 += v * b12;\r\n                    t28 += v * b13;\r\n                    t29 += v * b14;\r\n                    t30 += v * b15;\r\n                    t0 += 38 * t16;\r\n                    t1 += 38 * t17;\r\n                    t2 += 38 * t18;\r\n                    t3 += 38 * t19;\r\n                    t4 += 38 * t20;\r\n                    t5 += 38 * t21;\r\n                    t6 += 38 * t22;\r\n                    t7 += 38 * t23;\r\n                    t8 += 38 * t24;\r\n                    t9 += 38 * t25;\r\n                    t10 += 38 * t26;\r\n                    t11 += 38 * t27;\r\n                    t12 += 38 * t28;\r\n                    t13 += 38 * t29;\r\n                    t14 += 38 * t30;\r\n                    // t15 left as is\r\n                    // first car\r\n                    c = 1;\r\n                    v = t0 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t0 = v - c * 65536;\r\n                    v = t1 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t1 = v - c * 65536;\r\n                    v = t2 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t2 = v - c * 65536;\r\n                    v = t3 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t3 = v - c * 65536;\r\n                    v = t4 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t4 = v - c * 65536;\r\n                    v = t5 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t5 = v - c * 65536;\r\n                    v = t6 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t6 = v - c * 65536;\r\n                    v = t7 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t7 = v - c * 65536;\r\n                    v = t8 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t8 = v - c * 65536;\r\n                    v = t9 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t9 = v - c * 65536;\r\n                    v = t10 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t10 = v - c * 65536;\r\n                    v = t11 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t11 = v - c * 65536;\r\n                    v = t12 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t12 = v - c * 65536;\r\n                    v = t13 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t13 = v - c * 65536;\r\n                    v = t14 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t14 = v - c * 65536;\r\n                    v = t15 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t15 = v - c * 65536;\r\n                    t0 += c - 1 + 37 * (c - 1);\r\n                    // second car\r\n                    c = 1;\r\n                    v = t0 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t0 = v - c * 65536;\r\n                    v = t1 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t1 = v - c * 65536;\r\n                    v = t2 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t2 = v - c * 65536;\r\n                    v = t3 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t3 = v - c * 65536;\r\n                    v = t4 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t4 = v - c * 65536;\r\n                    v = t5 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t5 = v - c * 65536;\r\n                    v = t6 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t6 = v - c * 65536;\r\n                    v = t7 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t7 = v - c * 65536;\r\n                    v = t8 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t8 = v - c * 65536;\r\n                    v = t9 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t9 = v - c * 65536;\r\n                    v = t10 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t10 = v - c * 65536;\r\n                    v = t11 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t11 = v - c * 65536;\r\n                    v = t12 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t12 = v - c * 65536;\r\n                    v = t13 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t13 = v - c * 65536;\r\n                    v = t14 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t14 = v - c * 65536;\r\n                    v = t15 + c + 65535;\r\n                    c = Math.floor(v / 65536);\r\n                    t15 = v - c * 65536;\r\n                    t0 += c - 1 + 37 * (c - 1);\r\n                    o[0] = t0;\r\n                    o[1] = t1;\r\n                    o[2] = t2;\r\n                    o[3] = t3;\r\n                    o[4] = t4;\r\n                    o[5] = t5;\r\n                    o[6] = t6;\r\n                    o[7] = t7;\r\n                    o[8] = t8;\r\n                    o[9] = t9;\r\n                    o[10] = t10;\r\n                    o[11] = t11;\r\n                    o[12] = t12;\r\n                    o[13] = t13;\r\n                    o[14] = t14;\r\n                    o[15] = t15;\r\n                }\r\n                function S(o, a) {\r\n                    M(o, a, a);\r\n                }\r\n                function inv25519(o, i) {\r\n                    var c = gf();\r\n                    var a;\r\n                    for (a = 0; a < 16; a++)\r\n                        c[a] = i[a];\r\n                    for (a = 253; a >= 0; a--) {\r\n                        S(c, c);\r\n                        if (a !== 2 && a !== 4)\r\n                            M(c, c, i);\r\n                    }\r\n                    for (a = 0; a < 16; a++)\r\n                        o[a] = c[a];\r\n                }\r\n                function pow2523(o, i) {\r\n                    var c = gf();\r\n                    var a;\r\n                    for (a = 0; a < 16; a++)\r\n                        c[a] = i[a];\r\n                    for (a = 250; a >= 0; a--) {\r\n                        S(c, c);\r\n                        if (a !== 1)\r\n                            M(c, c, i);\r\n                    }\r\n                    for (a = 0; a < 16; a++)\r\n                        o[a] = c[a];\r\n                }\r\n                function crypto_scalarmult(q, n, p) {\r\n                    var z = new Uint8Array(32);\r\n                    var x = new Float64Array(80), r, i;\r\n                    var a = gf(), b = gf(), c = gf(), d = gf(), e = gf(), f = gf();\r\n                    for (i = 0; i < 31; i++)\r\n                        z[i] = n[i];\r\n                    z[31] = (n[31] & 127) | 64;\r\n                    z[0] &= 248;\r\n                    unpack25519(x, p);\r\n                    for (i = 0; i < 16; i++) {\r\n                        b[i] = x[i];\r\n                        d[i] = a[i] = c[i] = 0;\r\n                    }\r\n                    a[0] = d[0] = 1;\r\n                    for (i = 254; i >= 0; --i) {\r\n                        r = (z[i >>> 3] >>> (i & 7)) & 1;\r\n                        sel25519(a, b, r);\r\n                        sel25519(c, d, r);\r\n                        A(e, a, c);\r\n                        Z(a, a, c);\r\n                        A(c, b, d);\r\n                        Z(b, b, d);\r\n                        S(d, e);\r\n                        S(f, a);\r\n                        M(a, c, a);\r\n                        M(c, b, e);\r\n                        A(e, a, c);\r\n                        Z(a, a, c);\r\n                        S(b, a);\r\n                        Z(c, d, f);\r\n                        M(a, c, _121665);\r\n                        A(a, a, d);\r\n                        M(c, c, a);\r\n                        M(a, d, f);\r\n                        M(d, b, x);\r\n                        S(b, e);\r\n                        sel25519(a, b, r);\r\n                        sel25519(c, d, r);\r\n                    }\r\n                    for (i = 0; i < 16; i++) {\r\n                        x[i + 16] = a[i];\r\n                        x[i + 32] = c[i];\r\n                        x[i + 48] = b[i];\r\n                        x[i + 64] = d[i];\r\n                    }\r\n                    var x32 = x.subarray(32);\r\n                    var x16 = x.subarray(16);\r\n                    inv25519(x32, x32);\r\n                    M(x16, x16, x32);\r\n                    pack25519(q, x16);\r\n                    return 0;\r\n                }\r\n                function crypto_scalarmult_base(q, n) {\r\n                    return crypto_scalarmult(q, n, _9);\r\n                }\r\n                function crypto_box_keypair(y, x) {\r\n                    randombytes(x, 32);\r\n                    return crypto_scalarmult_base(y, x);\r\n                }\r\n                function crypto_box_beforenm(k, y, x) {\r\n                    var s = new Uint8Array(32);\r\n                    crypto_scalarmult(s, x, y);\r\n                    return crypto_core_hsalsa20(k, _0, s, sigma);\r\n                }\r\n                var crypto_box_afternm = crypto_secretbox;\r\n                var crypto_box_open_afternm = crypto_secretbox_open;\r\n                function crypto_box(c, m, d, n, y, x) {\r\n                    var k = new Uint8Array(32);\r\n                    crypto_box_beforenm(k, y, x);\r\n                    return crypto_box_afternm(c, m, d, n, k);\r\n                }\r\n                function crypto_box_open(m, c, d, n, y, x) {\r\n                    var k = new Uint8Array(32);\r\n                    crypto_box_beforenm(k, y, x);\r\n                    return crypto_box_open_afternm(m, c, d, n, k);\r\n                }\r\n                var K = [\r\n                    0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\r\n                    0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\r\n                    0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\r\n                    0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\r\n                    0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\r\n                    0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\r\n                    0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\r\n                    0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\r\n                    0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\r\n                    0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\r\n                    0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\r\n                    0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\r\n                    0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\r\n                    0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\r\n                    0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\r\n                    0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\r\n                    0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\r\n                    0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\r\n                    0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\r\n                    0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\r\n                    0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\r\n                    0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\r\n                    0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\r\n                    0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\r\n                    0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\r\n                    0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\r\n                    0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\r\n                    0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\r\n                    0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\r\n                    0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\r\n                    0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\r\n                    0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\r\n                    0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\r\n                    0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\r\n                    0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\r\n                    0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\r\n                    0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\r\n                    0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\r\n                    0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\r\n                    0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\r\n                ];\r\n                function crypto_hashblocks_hl(hh, hl, m, n) {\r\n                    var wh = new Int32Array(16), wl = new Int32Array(16), bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7, bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7, th, tl, i, j, h, l, a, b, c, d;\r\n                    var ah0 = hh[0], ah1 = hh[1], ah2 = hh[2], ah3 = hh[3], ah4 = hh[4], ah5 = hh[5], ah6 = hh[6], ah7 = hh[7], al0 = hl[0], al1 = hl[1], al2 = hl[2], al3 = hl[3], al4 = hl[4], al5 = hl[5], al6 = hl[6], al7 = hl[7];\r\n                    var pos = 0;\r\n                    while (n >= 128) {\r\n                        for (i = 0; i < 16; i++) {\r\n                            j = 8 * i + pos;\r\n                            wh[i] = (m[j + 0] << 24) | (m[j + 1] << 16) | (m[j + 2] << 8) | m[j + 3];\r\n                            wl[i] = (m[j + 4] << 24) | (m[j + 5] << 16) | (m[j + 6] << 8) | m[j + 7];\r\n                        }\r\n                        for (i = 0; i < 80; i++) {\r\n                            bh0 = ah0;\r\n                            bh1 = ah1;\r\n                            bh2 = ah2;\r\n                            bh3 = ah3;\r\n                            bh4 = ah4;\r\n                            bh5 = ah5;\r\n                            bh6 = ah6;\r\n                            bh7 = ah7;\r\n                            bl0 = al0;\r\n                            bl1 = al1;\r\n                            bl2 = al2;\r\n                            bl3 = al3;\r\n                            bl4 = al4;\r\n                            bl5 = al5;\r\n                            bl6 = al6;\r\n                            bl7 = al7;\r\n                            // add\r\n                            h = ah7;\r\n                            l = al7;\r\n                            a = l & 0xffff;\r\n                            b = l >>> 16;\r\n                            c = h & 0xffff;\r\n                            d = h >>> 16;\r\n                            // Sigma1\r\n                            h = ((ah4 >>> 14) | (al4 << (32 - 14))) ^ ((ah4 >>> 18) | (al4 << (32 - 18))) ^ ((al4 >>> (41 - 32)) | (ah4 << (32 - (41 - 32))));\r\n                            l = ((al4 >>> 14) | (ah4 << (32 - 14))) ^ ((al4 >>> 18) | (ah4 << (32 - 18))) ^ ((ah4 >>> (41 - 32)) | (al4 << (32 - (41 - 32))));\r\n                            a += l & 0xffff;\r\n                            b += l >>> 16;\r\n                            c += h & 0xffff;\r\n                            d += h >>> 16;\r\n                            // Ch\r\n                            h = (ah4 & ah5) ^ (~ah4 & ah6);\r\n                            l = (al4 & al5) ^ (~al4 & al6);\r\n                            a += l & 0xffff;\r\n                            b += l >>> 16;\r\n                            c += h & 0xffff;\r\n                            d += h >>> 16;\r\n                            // K\r\n                            h = K[i * 2];\r\n                            l = K[i * 2 + 1];\r\n                            a += l & 0xffff;\r\n                            b += l >>> 16;\r\n                            c += h & 0xffff;\r\n                            d += h >>> 16;\r\n                            // w\r\n                            h = wh[i % 16];\r\n                            l = wl[i % 16];\r\n                            a += l & 0xffff;\r\n                            b += l >>> 16;\r\n                            c += h & 0xffff;\r\n                            d += h >>> 16;\r\n                            b += a >>> 16;\r\n                            c += b >>> 16;\r\n                            d += c >>> 16;\r\n                            th = c & 0xffff | d << 16;\r\n                            tl = a & 0xffff | b << 16;\r\n                            // add\r\n                            h = th;\r\n                            l = tl;\r\n                            a = l & 0xffff;\r\n                            b = l >>> 16;\r\n                            c = h & 0xffff;\r\n                            d = h >>> 16;\r\n                            // Sigma0\r\n                            h = ((ah0 >>> 28) | (al0 << (32 - 28))) ^ ((al0 >>> (34 - 32)) | (ah0 << (32 - (34 - 32)))) ^ ((al0 >>> (39 - 32)) | (ah0 << (32 - (39 - 32))));\r\n                            l = ((al0 >>> 28) | (ah0 << (32 - 28))) ^ ((ah0 >>> (34 - 32)) | (al0 << (32 - (34 - 32)))) ^ ((ah0 >>> (39 - 32)) | (al0 << (32 - (39 - 32))));\r\n                            a += l & 0xffff;\r\n                            b += l >>> 16;\r\n                            c += h & 0xffff;\r\n                            d += h >>> 16;\r\n                            // Maj\r\n                            h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\r\n                            l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\r\n                            a += l & 0xffff;\r\n                            b += l >>> 16;\r\n                            c += h & 0xffff;\r\n                            d += h >>> 16;\r\n                            b += a >>> 16;\r\n                            c += b >>> 16;\r\n                            d += c >>> 16;\r\n                            bh7 = (c & 0xffff) | (d << 16);\r\n                            bl7 = (a & 0xffff) | (b << 16);\r\n                            // add\r\n                            h = bh3;\r\n                            l = bl3;\r\n                            a = l & 0xffff;\r\n                            b = l >>> 16;\r\n                            c = h & 0xffff;\r\n                            d = h >>> 16;\r\n                            h = th;\r\n                            l = tl;\r\n                            a += l & 0xffff;\r\n                            b += l >>> 16;\r\n                            c += h & 0xffff;\r\n                            d += h >>> 16;\r\n                            b += a >>> 16;\r\n                            c += b >>> 16;\r\n                            d += c >>> 16;\r\n                            bh3 = (c & 0xffff) | (d << 16);\r\n                            bl3 = (a & 0xffff) | (b << 16);\r\n                            ah1 = bh0;\r\n                            ah2 = bh1;\r\n                            ah3 = bh2;\r\n                            ah4 = bh3;\r\n                            ah5 = bh4;\r\n                            ah6 = bh5;\r\n                            ah7 = bh6;\r\n                            ah0 = bh7;\r\n                            al1 = bl0;\r\n                            al2 = bl1;\r\n                            al3 = bl2;\r\n                            al4 = bl3;\r\n                            al5 = bl4;\r\n                            al6 = bl5;\r\n                            al7 = bl6;\r\n                            al0 = bl7;\r\n                            if (i % 16 === 15) {\r\n                                for (j = 0; j < 16; j++) {\r\n                                    // add\r\n                                    h = wh[j];\r\n                                    l = wl[j];\r\n                                    a = l & 0xffff;\r\n                                    b = l >>> 16;\r\n                                    c = h & 0xffff;\r\n                                    d = h >>> 16;\r\n                                    h = wh[(j + 9) % 16];\r\n                                    l = wl[(j + 9) % 16];\r\n                                    a += l & 0xffff;\r\n                                    b += l >>> 16;\r\n                                    c += h & 0xffff;\r\n                                    d += h >>> 16;\r\n                                    // sigma0\r\n                                    th = wh[(j + 1) % 16];\r\n                                    tl = wl[(j + 1) % 16];\r\n                                    h = ((th >>> 1) | (tl << (32 - 1))) ^ ((th >>> 8) | (tl << (32 - 8))) ^ (th >>> 7);\r\n                                    l = ((tl >>> 1) | (th << (32 - 1))) ^ ((tl >>> 8) | (th << (32 - 8))) ^ ((tl >>> 7) | (th << (32 - 7)));\r\n                                    a += l & 0xffff;\r\n                                    b += l >>> 16;\r\n                                    c += h & 0xffff;\r\n                                    d += h >>> 16;\r\n                                    // sigma1\r\n                                    th = wh[(j + 14) % 16];\r\n                                    tl = wl[(j + 14) % 16];\r\n                                    h = ((th >>> 19) | (tl << (32 - 19))) ^ ((tl >>> (61 - 32)) | (th << (32 - (61 - 32)))) ^ (th >>> 6);\r\n                                    l = ((tl >>> 19) | (th << (32 - 19))) ^ ((th >>> (61 - 32)) | (tl << (32 - (61 - 32)))) ^ ((tl >>> 6) | (th << (32 - 6)));\r\n                                    a += l & 0xffff;\r\n                                    b += l >>> 16;\r\n                                    c += h & 0xffff;\r\n                                    d += h >>> 16;\r\n                                    b += a >>> 16;\r\n                                    c += b >>> 16;\r\n                                    d += c >>> 16;\r\n                                    wh[j] = (c & 0xffff) | (d << 16);\r\n                                    wl[j] = (a & 0xffff) | (b << 16);\r\n                                }\r\n                            }\r\n                        }\r\n                        // add\r\n                        h = ah0;\r\n                        l = al0;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[0];\r\n                        l = hl[0];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[0] = ah0 = (c & 0xffff) | (d << 16);\r\n                        hl[0] = al0 = (a & 0xffff) | (b << 16);\r\n                        h = ah1;\r\n                        l = al1;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[1];\r\n                        l = hl[1];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[1] = ah1 = (c & 0xffff) | (d << 16);\r\n                        hl[1] = al1 = (a & 0xffff) | (b << 16);\r\n                        h = ah2;\r\n                        l = al2;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[2];\r\n                        l = hl[2];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[2] = ah2 = (c & 0xffff) | (d << 16);\r\n                        hl[2] = al2 = (a & 0xffff) | (b << 16);\r\n                        h = ah3;\r\n                        l = al3;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[3];\r\n                        l = hl[3];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[3] = ah3 = (c & 0xffff) | (d << 16);\r\n                        hl[3] = al3 = (a & 0xffff) | (b << 16);\r\n                        h = ah4;\r\n                        l = al4;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[4];\r\n                        l = hl[4];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[4] = ah4 = (c & 0xffff) | (d << 16);\r\n                        hl[4] = al4 = (a & 0xffff) | (b << 16);\r\n                        h = ah5;\r\n                        l = al5;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[5];\r\n                        l = hl[5];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[5] = ah5 = (c & 0xffff) | (d << 16);\r\n                        hl[5] = al5 = (a & 0xffff) | (b << 16);\r\n                        h = ah6;\r\n                        l = al6;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[6];\r\n                        l = hl[6];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[6] = ah6 = (c & 0xffff) | (d << 16);\r\n                        hl[6] = al6 = (a & 0xffff) | (b << 16);\r\n                        h = ah7;\r\n                        l = al7;\r\n                        a = l & 0xffff;\r\n                        b = l >>> 16;\r\n                        c = h & 0xffff;\r\n                        d = h >>> 16;\r\n                        h = hh[7];\r\n                        l = hl[7];\r\n                        a += l & 0xffff;\r\n                        b += l >>> 16;\r\n                        c += h & 0xffff;\r\n                        d += h >>> 16;\r\n                        b += a >>> 16;\r\n                        c += b >>> 16;\r\n                        d += c >>> 16;\r\n                        hh[7] = ah7 = (c & 0xffff) | (d << 16);\r\n                        hl[7] = al7 = (a & 0xffff) | (b << 16);\r\n                        pos += 128;\r\n                        n -= 128;\r\n                    }\r\n                    return n;\r\n                }\r\n                function crypto_hash(out, m, n) {\r\n                    var hh = new Int32Array(8), hl = new Int32Array(8), x = new Uint8Array(256), i, b = n;\r\n                    hh[0] = 0x6a09e667;\r\n                    hh[1] = 0xbb67ae85;\r\n                    hh[2] = 0x3c6ef372;\r\n                    hh[3] = 0xa54ff53a;\r\n                    hh[4] = 0x510e527f;\r\n                    hh[5] = 0x9b05688c;\r\n                    hh[6] = 0x1f83d9ab;\r\n                    hh[7] = 0x5be0cd19;\r\n                    hl[0] = 0xf3bcc908;\r\n                    hl[1] = 0x84caa73b;\r\n                    hl[2] = 0xfe94f82b;\r\n                    hl[3] = 0x5f1d36f1;\r\n                    hl[4] = 0xade682d1;\r\n                    hl[5] = 0x2b3e6c1f;\r\n                    hl[6] = 0xfb41bd6b;\r\n                    hl[7] = 0x137e2179;\r\n                    crypto_hashblocks_hl(hh, hl, m, n);\r\n                    n %= 128;\r\n                    for (i = 0; i < n; i++)\r\n                        x[i] = m[b - n + i];\r\n                    x[n] = 128;\r\n                    n = 256 - 128 * (n < 112 ? 1 : 0);\r\n                    x[n - 9] = 0;\r\n                    ts64(x, n - 8, (b / 0x20000000) | 0, b << 3);\r\n                    crypto_hashblocks_hl(hh, hl, x, n);\r\n                    for (i = 0; i < 8; i++)\r\n                        ts64(out, 8 * i, hh[i], hl[i]);\r\n                    return 0;\r\n                }\r\n                function add(p, q) {\r\n                    var a = gf(), b = gf(), c = gf(), d = gf(), e = gf(), f = gf(), g = gf(), h = gf(), t = gf();\r\n                    Z(a, p[1], p[0]);\r\n                    Z(t, q[1], q[0]);\r\n                    M(a, a, t);\r\n                    A(b, p[0], p[1]);\r\n                    A(t, q[0], q[1]);\r\n                    M(b, b, t);\r\n                    M(c, p[3], q[3]);\r\n                    M(c, c, D2);\r\n                    M(d, p[2], q[2]);\r\n                    A(d, d, d);\r\n                    Z(e, b, a);\r\n                    Z(f, d, c);\r\n                    A(g, d, c);\r\n                    A(h, b, a);\r\n                    M(p[0], e, f);\r\n                    M(p[1], h, g);\r\n                    M(p[2], g, f);\r\n                    M(p[3], e, h);\r\n                }\r\n                function cswap(p, q, b) {\r\n                    var i;\r\n                    for (i = 0; i < 4; i++) {\r\n                        sel25519(p[i], q[i], b);\r\n                    }\r\n                }\r\n                function pack(r, p) {\r\n                    var tx = gf(), ty = gf(), zi = gf();\r\n                    inv25519(zi, p[2]);\r\n                    M(tx, p[0], zi);\r\n                    M(ty, p[1], zi);\r\n                    pack25519(r, ty);\r\n                    r[31] ^= par25519(tx) << 7;\r\n                }\r\n                function scalarmult(p, q, s) {\r\n                    var b, i;\r\n                    set25519(p[0], gf0);\r\n                    set25519(p[1], gf1);\r\n                    set25519(p[2], gf1);\r\n                    set25519(p[3], gf0);\r\n                    for (i = 255; i >= 0; --i) {\r\n                        b = (s[(i / 8) | 0] >> (i & 7)) & 1;\r\n                        cswap(p, q, b);\r\n                        add(q, p);\r\n                        add(p, p);\r\n                        cswap(p, q, b);\r\n                    }\r\n                }\r\n                function scalarbase(p, s) {\r\n                    var q = [gf(), gf(), gf(), gf()];\r\n                    set25519(q[0], X);\r\n                    set25519(q[1], Y);\r\n                    set25519(q[2], gf1);\r\n                    M(q[3], X, Y);\r\n                    scalarmult(p, q, s);\r\n                }\r\n                function crypto_sign_keypair(pk, sk, seeded) {\r\n                    var d = new Uint8Array(64);\r\n                    var p = [gf(), gf(), gf(), gf()];\r\n                    var i;\r\n                    if (!seeded)\r\n                        randombytes(sk, 32);\r\n                    crypto_hash(d, sk, 32);\r\n                    d[0] &= 248;\r\n                    d[31] &= 127;\r\n                    d[31] |= 64;\r\n                    scalarbase(p, d);\r\n                    pack(pk, p);\r\n                    for (i = 0; i < 32; i++)\r\n                        sk[i + 32] = pk[i];\r\n                    return 0;\r\n                }\r\n                var L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\r\n                function modL(r, x) {\r\n                    var carry, i, j, k;\r\n                    for (i = 63; i >= 32; --i) {\r\n                        carry = 0;\r\n                        for (j = i - 32, k = i - 12; j < k; ++j) {\r\n                            x[j] += carry - 16 * x[i] * L[j - (i - 32)];\r\n                            carry = (x[j] + 128) >> 8;\r\n                            x[j] -= carry * 256;\r\n                        }\r\n                        x[j] += carry;\r\n                        x[i] = 0;\r\n                    }\r\n                    carry = 0;\r\n                    for (j = 0; j < 32; j++) {\r\n                        x[j] += carry - (x[31] >> 4) * L[j];\r\n                        carry = x[j] >> 8;\r\n                        x[j] &= 255;\r\n                    }\r\n                    for (j = 0; j < 32; j++)\r\n                        x[j] -= carry * L[j];\r\n                    for (i = 0; i < 32; i++) {\r\n                        x[i + 1] += x[i] >> 8;\r\n                        r[i] = x[i] & 255;\r\n                    }\r\n                }\r\n                function reduce(r) {\r\n                    var x = new Float64Array(64), i;\r\n                    for (i = 0; i < 64; i++)\r\n                        x[i] = r[i];\r\n                    for (i = 0; i < 64; i++)\r\n                        r[i] = 0;\r\n                    modL(r, x);\r\n                }\r\n                // Note: difference from C - smlen returned, not passed as argument.\r\n                function crypto_sign(sm, m, n, sk) {\r\n                    var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\r\n                    var i, j, x = new Float64Array(64);\r\n                    var p = [gf(), gf(), gf(), gf()];\r\n                    crypto_hash(d, sk, 32);\r\n                    d[0] &= 248;\r\n                    d[31] &= 127;\r\n                    d[31] |= 64;\r\n                    var smlen = n + 64;\r\n                    for (i = 0; i < n; i++)\r\n                        sm[64 + i] = m[i];\r\n                    for (i = 0; i < 32; i++)\r\n                        sm[32 + i] = d[32 + i];\r\n                    crypto_hash(r, sm.subarray(32), n + 32);\r\n                    reduce(r);\r\n                    scalarbase(p, r);\r\n                    pack(sm, p);\r\n                    for (i = 32; i < 64; i++)\r\n                        sm[i] = sk[i];\r\n                    crypto_hash(h, sm, n + 64);\r\n                    reduce(h);\r\n                    for (i = 0; i < 64; i++)\r\n                        x[i] = 0;\r\n                    for (i = 0; i < 32; i++)\r\n                        x[i] = r[i];\r\n                    for (i = 0; i < 32; i++) {\r\n                        for (j = 0; j < 32; j++) {\r\n                            x[i + j] += h[i] * d[j];\r\n                        }\r\n                    }\r\n                    modL(sm.subarray(32), x);\r\n                    return smlen;\r\n                }\r\n                function unpackneg(r, p) {\r\n                    var t = gf(), chk = gf(), num = gf(), den = gf(), den2 = gf(), den4 = gf(), den6 = gf();\r\n                    set25519(r[2], gf1);\r\n                    unpack25519(r[1], p);\r\n                    S(num, r[1]);\r\n                    M(den, num, D);\r\n                    Z(num, num, r[2]);\r\n                    A(den, r[2], den);\r\n                    S(den2, den);\r\n                    S(den4, den2);\r\n                    M(den6, den4, den2);\r\n                    M(t, den6, num);\r\n                    M(t, t, den);\r\n                    pow2523(t, t);\r\n                    M(t, t, num);\r\n                    M(t, t, den);\r\n                    M(t, t, den);\r\n                    M(r[0], t, den);\r\n                    S(chk, r[0]);\r\n                    M(chk, chk, den);\r\n                    if (neq25519(chk, num))\r\n                        M(r[0], r[0], I);\r\n                    S(chk, r[0]);\r\n                    M(chk, chk, den);\r\n                    if (neq25519(chk, num))\r\n                        return -1;\r\n                    if (par25519(r[0]) === (p[31] >> 7))\r\n                        Z(r[0], gf0, r[0]);\r\n                    M(r[3], r[0], r[1]);\r\n                    return 0;\r\n                }\r\n                function crypto_sign_open(m, sm, n, pk) {\r\n                    var i, mlen;\r\n                    var t = new Uint8Array(32), h = new Uint8Array(64);\r\n                    var p = [gf(), gf(), gf(), gf()], q = [gf(), gf(), gf(), gf()];\r\n                    mlen = -1;\r\n                    if (n < 64)\r\n                        return -1;\r\n                    if (unpackneg(q, pk))\r\n                        return -1;\r\n                    for (i = 0; i < n; i++)\r\n                        m[i] = sm[i];\r\n                    for (i = 0; i < 32; i++)\r\n                        m[i + 32] = pk[i];\r\n                    crypto_hash(h, m, n);\r\n                    reduce(h);\r\n                    scalarmult(p, q, h);\r\n                    scalarbase(q, sm.subarray(32));\r\n                    add(p, q);\r\n                    pack(t, p);\r\n                    n -= 64;\r\n                    if (crypto_verify_32(sm, 0, t, 0)) {\r\n                        for (i = 0; i < n; i++)\r\n                            m[i] = 0;\r\n                        return -1;\r\n                    }\r\n                    for (i = 0; i < n; i++)\r\n                        m[i] = sm[i + 64];\r\n                    mlen = n;\r\n                    return mlen;\r\n                }\r\n                var crypto_secretbox_KEYBYTES = 32, crypto_secretbox_NONCEBYTES = 24, crypto_secretbox_ZEROBYTES = 32, crypto_secretbox_BOXZEROBYTES = 16, crypto_scalarmult_BYTES = 32, crypto_scalarmult_SCALARBYTES = 32, crypto_box_PUBLICKEYBYTES = 32, crypto_box_SECRETKEYBYTES = 32, crypto_box_BEFORENMBYTES = 32, crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES, crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES, crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES, crypto_sign_BYTES = 64, crypto_sign_PUBLICKEYBYTES = 32, crypto_sign_SECRETKEYBYTES = 64, crypto_sign_SEEDBYTES = 32, crypto_hash_BYTES = 64;\r\n                nacl.lowlevel = {\r\n                    crypto_core_hsalsa20: crypto_core_hsalsa20,\r\n                    crypto_stream_xor: crypto_stream_xor,\r\n                    crypto_stream: crypto_stream,\r\n                    crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\r\n                    crypto_stream_salsa20: crypto_stream_salsa20,\r\n                    crypto_onetimeauth: crypto_onetimeauth,\r\n                    crypto_onetimeauth_verify: crypto_onetimeauth_verify,\r\n                    crypto_verify_16: crypto_verify_16,\r\n                    crypto_verify_32: crypto_verify_32,\r\n                    crypto_secretbox: crypto_secretbox,\r\n                    crypto_secretbox_open: crypto_secretbox_open,\r\n                    crypto_scalarmult: crypto_scalarmult,\r\n                    crypto_scalarmult_base: crypto_scalarmult_base,\r\n                    crypto_box_beforenm: crypto_box_beforenm,\r\n                    crypto_box_afternm: crypto_box_afternm,\r\n                    crypto_box: crypto_box,\r\n                    crypto_box_open: crypto_box_open,\r\n                    crypto_box_keypair: crypto_box_keypair,\r\n                    crypto_hash: crypto_hash,\r\n                    crypto_sign: crypto_sign,\r\n                    crypto_sign_keypair: crypto_sign_keypair,\r\n                    crypto_sign_open: crypto_sign_open,\r\n                    crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\r\n                    crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\r\n                    crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\r\n                    crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\r\n                    crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\r\n                    crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\r\n                    crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\r\n                    crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\r\n                    crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\r\n                    crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\r\n                    crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\r\n                    crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\r\n                    crypto_sign_BYTES: crypto_sign_BYTES,\r\n                    crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\r\n                    crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\r\n                    crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\r\n                    crypto_hash_BYTES: crypto_hash_BYTES\r\n                };\r\n                /* High-level API */\r\n                function checkLengths(k, n) {\r\n                    if (k.length !== crypto_secretbox_KEYBYTES)\r\n                        throw new Error('bad key size');\r\n                    if (n.length !== crypto_secretbox_NONCEBYTES)\r\n                        throw new Error('bad nonce size');\r\n                }\r\n                function checkBoxLengths(pk, sk) {\r\n                    if (pk.length !== crypto_box_PUBLICKEYBYTES)\r\n                        throw new Error('bad public key size');\r\n                    if (sk.length !== crypto_box_SECRETKEYBYTES)\r\n                        throw new Error('bad secret key size');\r\n                }\r\n                function checkArrayTypes() {\r\n                    for (var i = 0; i < arguments.length; i++) {\r\n                        if (!(arguments[i] instanceof Uint8Array))\r\n                            throw new TypeError('unexpected type, use Uint8Array');\r\n                    }\r\n                }\r\n                function cleanup(arr) {\r\n                    for (var i = 0; i < arr.length; i++)\r\n                        arr[i] = 0;\r\n                }\r\n                nacl.randomBytes = function (n) {\r\n                    var b = new Uint8Array(n);\r\n                    randombytes(b, n);\r\n                    return b;\r\n                };\r\n                nacl.secretbox = function (msg, nonce, key) {\r\n                    checkArrayTypes(msg, nonce, key);\r\n                    checkLengths(key, nonce);\r\n                    var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\r\n                    var c = new Uint8Array(m.length);\r\n                    for (var i = 0; i < msg.length; i++)\r\n                        m[i + crypto_secretbox_ZEROBYTES] = msg[i];\r\n                    crypto_secretbox(c, m, m.length, nonce, key);\r\n                    return c.subarray(crypto_secretbox_BOXZEROBYTES);\r\n                };\r\n                nacl.secretbox.open = function (box, nonce, key) {\r\n                    checkArrayTypes(box, nonce, key);\r\n                    checkLengths(key, nonce);\r\n                    var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\r\n                    var m = new Uint8Array(c.length);\r\n                    for (var i = 0; i < box.length; i++)\r\n                        c[i + crypto_secretbox_BOXZEROBYTES] = box[i];\r\n                    if (c.length < 32)\r\n                        return null;\r\n                    if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0)\r\n                        return null;\r\n                    return m.subarray(crypto_secretbox_ZEROBYTES);\r\n                };\r\n                nacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\r\n                nacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\r\n                nacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\r\n                nacl.scalarMult = function (n, p) {\r\n                    checkArrayTypes(n, p);\r\n                    if (n.length !== crypto_scalarmult_SCALARBYTES)\r\n                        throw new Error('bad n size');\r\n                    if (p.length !== crypto_scalarmult_BYTES)\r\n                        throw new Error('bad p size');\r\n                    var q = new Uint8Array(crypto_scalarmult_BYTES);\r\n                    crypto_scalarmult(q, n, p);\r\n                    return q;\r\n                };\r\n                nacl.scalarMult.base = function (n) {\r\n                    checkArrayTypes(n);\r\n                    if (n.length !== crypto_scalarmult_SCALARBYTES)\r\n                        throw new Error('bad n size');\r\n                    var q = new Uint8Array(crypto_scalarmult_BYTES);\r\n                    crypto_scalarmult_base(q, n);\r\n                    return q;\r\n                };\r\n                nacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\r\n                nacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\r\n                nacl.box = function (msg, nonce, publicKey, secretKey) {\r\n                    var k = nacl.box.before(publicKey, secretKey);\r\n                    return nacl.secretbox(msg, nonce, k);\r\n                };\r\n                nacl.box.before = function (publicKey, secretKey) {\r\n                    checkArrayTypes(publicKey, secretKey);\r\n                    checkBoxLengths(publicKey, secretKey);\r\n                    var k = new Uint8Array(crypto_box_BEFORENMBYTES);\r\n                    crypto_box_beforenm(k, publicKey, secretKey);\r\n                    return k;\r\n                };\r\n                nacl.box.after = nacl.secretbox;\r\n                nacl.box.open = function (msg, nonce, publicKey, secretKey) {\r\n                    var k = nacl.box.before(publicKey, secretKey);\r\n                    return nacl.secretbox.open(msg, nonce, k);\r\n                };\r\n                nacl.box.open.after = nacl.secretbox.open;\r\n                nacl.box.keyPair = function () {\r\n                    var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\r\n                    var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\r\n                    crypto_box_keypair(pk, sk);\r\n                    return { publicKey: pk, secretKey: sk };\r\n                };\r\n                nacl.box.keyPair.fromSecretKey = function (secretKey) {\r\n                    checkArrayTypes(secretKey);\r\n                    if (secretKey.length !== crypto_box_SECRETKEYBYTES)\r\n                        throw new Error('bad secret key size');\r\n                    var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\r\n                    crypto_scalarmult_base(pk, secretKey);\r\n                    return { publicKey: pk, secretKey: new Uint8Array(secretKey) };\r\n                };\r\n                nacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\r\n                nacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\r\n                nacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\r\n                nacl.box.nonceLength = crypto_box_NONCEBYTES;\r\n                nacl.box.overheadLength = nacl.secretbox.overheadLength;\r\n                nacl.sign = function (msg, secretKey) {\r\n                    checkArrayTypes(msg, secretKey);\r\n                    if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\r\n                        throw new Error('bad secret key size');\r\n                    var signedMsg = new Uint8Array(crypto_sign_BYTES + msg.length);\r\n                    crypto_sign(signedMsg, msg, msg.length, secretKey);\r\n                    return signedMsg;\r\n                };\r\n                nacl.sign.open = function (signedMsg, publicKey) {\r\n                    checkArrayTypes(signedMsg, publicKey);\r\n                    if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\r\n                        throw new Error('bad public key size');\r\n                    var tmp = new Uint8Array(signedMsg.length);\r\n                    var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\r\n                    if (mlen < 0)\r\n                        return null;\r\n                    var m = new Uint8Array(mlen);\r\n                    for (var i = 0; i < m.length; i++)\r\n                        m[i] = tmp[i];\r\n                    return m;\r\n                };\r\n                nacl.sign.detached = function (msg, secretKey) {\r\n                    var signedMsg = nacl.sign(msg, secretKey);\r\n                    var sig = new Uint8Array(crypto_sign_BYTES);\r\n                    for (var i = 0; i < sig.length; i++)\r\n                        sig[i] = signedMsg[i];\r\n                    return sig;\r\n                };\r\n                nacl.sign.detached.verify = function (msg, sig, publicKey) {\r\n                    checkArrayTypes(msg, sig, publicKey);\r\n                    if (sig.length !== crypto_sign_BYTES)\r\n                        throw new Error('bad signature size');\r\n                    if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\r\n                        throw new Error('bad public key size');\r\n                    var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\r\n                    var m = new Uint8Array(crypto_sign_BYTES + msg.length);\r\n                    var i;\r\n                    for (i = 0; i < crypto_sign_BYTES; i++)\r\n                        sm[i] = sig[i];\r\n                    for (i = 0; i < msg.length; i++)\r\n                        sm[i + crypto_sign_BYTES] = msg[i];\r\n                    return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\r\n                };\r\n                nacl.sign.keyPair = function () {\r\n                    var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\r\n                    var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\r\n                    crypto_sign_keypair(pk, sk);\r\n                    return { publicKey: pk, secretKey: sk };\r\n                };\r\n                nacl.sign.keyPair.fromSecretKey = function (secretKey) {\r\n                    checkArrayTypes(secretKey);\r\n                    if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\r\n                        throw new Error('bad secret key size');\r\n                    var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\r\n                    for (var i = 0; i < pk.length; i++)\r\n                        pk[i] = secretKey[32 + i];\r\n                    return { publicKey: pk, secretKey: new Uint8Array(secretKey) };\r\n                };\r\n                nacl.sign.keyPair.fromSeed = function (seed) {\r\n                    checkArrayTypes(seed);\r\n                    if (seed.length !== crypto_sign_SEEDBYTES)\r\n                        throw new Error('bad seed size');\r\n                    var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\r\n                    var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\r\n                    for (var i = 0; i < 32; i++)\r\n                        sk[i] = seed[i];\r\n                    crypto_sign_keypair(pk, sk, true);\r\n                    return { publicKey: pk, secretKey: sk };\r\n                };\r\n                nacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\r\n                nacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\r\n                nacl.sign.seedLength = crypto_sign_SEEDBYTES;\r\n                nacl.sign.signatureLength = crypto_sign_BYTES;\r\n                nacl.hash = function (msg) {\r\n                    checkArrayTypes(msg);\r\n                    var h = new Uint8Array(crypto_hash_BYTES);\r\n                    crypto_hash(h, msg, msg.length);\r\n                    return h;\r\n                };\r\n                nacl.hash.hashLength = crypto_hash_BYTES;\r\n                nacl.verify = function (x, y) {\r\n                    checkArrayTypes(x, y);\r\n                    // Zero length arguments are considered not equal.\r\n                    if (x.length === 0 || y.length === 0)\r\n                        return false;\r\n                    if (x.length !== y.length)\r\n                        return false;\r\n                    return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\r\n                };\r\n                nacl.setPRNG = function (fn) {\r\n                    randombytes = fn;\r\n                };\r\n                (function () {\r\n                    // Initialize PRNG if environment provides CSPRNG.\r\n                    // If not, methods calling randombytes will throw.\r\n                    var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\r\n                    if (crypto && crypto.getRandomValues) {\r\n                        // Browsers.\r\n                        var QUOTA = 65536;\r\n                        nacl.setPRNG(function (x, n) {\r\n                            var i, v = new Uint8Array(n);\r\n                            for (i = 0; i < n; i += QUOTA) {\r\n                                crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\r\n                            }\r\n                            for (i = 0; i < n; i++)\r\n                                x[i] = v[i];\r\n                            cleanup(v);\r\n                        });\r\n                    }\r\n                    else if (true) {\r\n                        // Node.js.\r\n                        crypto = __webpack_require__(56);\r\n                        if (crypto && crypto.randomBytes) {\r\n                            nacl.setPRNG(function (x, n) {\r\n                                var i, v = crypto.randomBytes(n);\r\n                                for (i = 0; i < n; i++)\r\n                                    x[i] = v[i];\r\n                                cleanup(v);\r\n                            });\r\n                        }\r\n                    }\r\n                })();\r\n            })(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\r\n            /***/ \r\n        }),\r\n        /* 56 */\r\n        /***/ (function (module, exports) {\r\n            /* (ignored) */\r\n            /***/ \r\n        }),\r\n        /* 57 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            /* WEBPACK VAR INJECTION */ (function (Buffer) {\r\n                // Public domain.\r\n                (function (root, f) {\r\n                    'use strict';\r\n                    if (typeof module !== 'undefined' && module.exports)\r\n                        module.exports = f();\r\n                    else if (root.nacl)\r\n                        root.nacl.util = f();\r\n                    else {\r\n                        root.nacl = {};\r\n                        root.nacl.util = f();\r\n                    }\r\n                }(this, function () {\r\n                    'use strict';\r\n                    var util = {};\r\n                    function validateBase64(s) {\r\n                        if (!(/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(s))) {\r\n                            throw new TypeError('invalid encoding');\r\n                        }\r\n                    }\r\n                    util.decodeUTF8 = function (s) {\r\n                        if (typeof s !== 'string')\r\n                            throw new TypeError('expected string');\r\n                        var i, d = unescape(encodeURIComponent(s)), b = new Uint8Array(d.length);\r\n                        for (i = 0; i < d.length; i++)\r\n                            b[i] = d.charCodeAt(i);\r\n                        return b;\r\n                    };\r\n                    util.encodeUTF8 = function (arr) {\r\n                        var i, s = [];\r\n                        for (i = 0; i < arr.length; i++)\r\n                            s.push(String.fromCharCode(arr[i]));\r\n                        return decodeURIComponent(escape(s.join('')));\r\n                    };\r\n                    if (typeof atob === 'undefined') {\r\n                        // Node.js\r\n                        if (typeof Buffer.from !== 'undefined') {\r\n                            // Node v6 and later\r\n                            util.encodeBase64 = function (arr) {\r\n                                return Buffer.from(arr).toString('base64');\r\n                            };\r\n                            util.decodeBase64 = function (s) {\r\n                                validateBase64(s);\r\n                                return new Uint8Array(Array.prototype.slice.call(Buffer.from(s, 'base64'), 0));\r\n                            };\r\n                        }\r\n                        else {\r\n                            // Node earlier than v6\r\n                            util.encodeBase64 = function (arr) {\r\n                                return (new Buffer(arr)).toString('base64');\r\n                            };\r\n                            util.decodeBase64 = function (s) {\r\n                                validateBase64(s);\r\n                                return new Uint8Array(Array.prototype.slice.call(new Buffer(s, 'base64'), 0));\r\n                            };\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Browsers\r\n                        util.encodeBase64 = function (arr) {\r\n                            var i, s = [], len = arr.length;\r\n                            for (i = 0; i < len; i++)\r\n                                s.push(String.fromCharCode(arr[i]));\r\n                            return btoa(s.join(''));\r\n                        };\r\n                        util.decodeBase64 = function (s) {\r\n                            validateBase64(s);\r\n                            var i, d = atob(s), b = new Uint8Array(d.length);\r\n                            for (i = 0; i < d.length; i++)\r\n                                b[i] = d.charCodeAt(i);\r\n                            return b;\r\n                        };\r\n                    }\r\n                    return util;\r\n                }));\r\n                /* WEBPACK VAR INJECTION */ \r\n            }.call(exports, __webpack_require__(58).Buffer));\r\n            /***/ \r\n        }),\r\n        /* 58 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            /*!\r\n             * The buffer module from node.js, for the browser.\r\n             *\r\n             * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\r\n             * @license  MIT\r\n             */\r\n            /* eslint-disable no-proto */\r\n            'use strict';\r\n            var base64 = __webpack_require__(59);\r\n            var ieee754 = __webpack_require__(60);\r\n            var isArray = __webpack_require__(61);\r\n            exports.Buffer = Buffer;\r\n            exports.SlowBuffer = SlowBuffer;\r\n            exports.INSPECT_MAX_BYTES = 50;\r\n            /**\r\n             * If `Buffer.TYPED_ARRAY_SUPPORT`:\r\n             *   === true    Use Uint8Array implementation (fastest)\r\n             *   === false   Use Object implementation (most compatible, even IE6)\r\n             *\r\n             * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\r\n             * Opera 11.6+, iOS 4.2+.\r\n             *\r\n             * Due to various browser bugs, sometimes the Object implementation will be used even\r\n             * when the browser supports typed arrays.\r\n             *\r\n             * Note:\r\n             *\r\n             *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\r\n             *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\r\n             *\r\n             *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\r\n             *\r\n             *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\r\n             *     incorrect length in some situations.\r\n        \r\n             * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\r\n             * get the Object implementation, which is slower but behaves correctly.\r\n             */\r\n            Buffer.TYPED_ARRAY_SUPPORT = (window).TYPED_ARRAY_SUPPORT !== undefined\r\n                ? (window).TYPED_ARRAY_SUPPORT\r\n                : typedArraySupport();\r\n            /*\r\n             * Export kMaxLength after typed array support is determined.\r\n             */\r\n            exports.kMaxLength = kMaxLength();\r\n            function typedArraySupport() {\r\n                try {\r\n                    var arr = new Uint8Array(1);\r\n                    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42; } };\r\n                    return arr.foo() === 42 && // typed array instances can be augmented\r\n                        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\r\n                        arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\r\n                }\r\n                catch (e) {\r\n                    return false;\r\n                }\r\n            }\r\n            function kMaxLength() {\r\n                return Buffer.TYPED_ARRAY_SUPPORT\r\n                    ? 0x7fffffff\r\n                    : 0x3fffffff;\r\n            }\r\n            function createBuffer(that, length) {\r\n                if (kMaxLength() < length) {\r\n                    throw new RangeError('Invalid typed array length');\r\n                }\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    // Return an augmented `Uint8Array` instance, for best performance\r\n                    that = new Uint8Array(length);\r\n                    that.__proto__ = Buffer.prototype;\r\n                }\r\n                else {\r\n                    // Fallback: Return an object instance of the Buffer class\r\n                    if (that === null) {\r\n                        that = new Buffer(length);\r\n                    }\r\n                    that.length = length;\r\n                }\r\n                return that;\r\n            }\r\n            /**\r\n             * The Buffer constructor returns instances of `Uint8Array` that have their\r\n             * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\r\n             * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\r\n             * and the `Uint8Array` methods. Square bracket notation works as expected -- it\r\n             * returns a single octet.\r\n             *\r\n             * The `Uint8Array` prototype remains unmodified.\r\n             */\r\n            function Buffer(arg, encodingOrOffset, length) {\r\n                if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\r\n                    return new Buffer(arg, encodingOrOffset, length);\r\n                }\r\n                // Common case.\r\n                if (typeof arg === 'number') {\r\n                    if (typeof encodingOrOffset === 'string') {\r\n                        throw new Error('If encoding is specified then the first argument must be a string');\r\n                    }\r\n                    return allocUnsafe(this, arg);\r\n                }\r\n                return from(this, arg, encodingOrOffset, length);\r\n            }\r\n            Buffer.poolSize = 8192; // not used by this implementation\r\n            // TODO: Legacy, not needed anymore. Remove in next major version.\r\n            Buffer._augment = function (arr) {\r\n                arr.__proto__ = Buffer.prototype;\r\n                return arr;\r\n            };\r\n            function from(that, value, encodingOrOffset, length) {\r\n                if (typeof value === 'number') {\r\n                    throw new TypeError('\"value\" argument must not be a number');\r\n                }\r\n                if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\r\n                    return fromArrayBuffer(that, value, encodingOrOffset, length);\r\n                }\r\n                if (typeof value === 'string') {\r\n                    return fromString(that, value, encodingOrOffset);\r\n                }\r\n                return fromObject(that, value);\r\n            }\r\n            /**\r\n             * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\r\n             * if value is a number.\r\n             * Buffer.from(str[, encoding])\r\n             * Buffer.from(array)\r\n             * Buffer.from(buffer)\r\n             * Buffer.from(arrayBuffer[, byteOffset[, length]])\r\n             **/\r\n            Buffer.from = function (value, encodingOrOffset, length) {\r\n                return from(null, value, encodingOrOffset, length);\r\n            };\r\n            if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                Buffer.prototype.__proto__ = Uint8Array.prototype;\r\n                Buffer.__proto__ = Uint8Array;\r\n                if (typeof Symbol !== 'undefined' && Symbol.species &&\r\n                    Buffer[Symbol.species] === Buffer) {\r\n                    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\r\n                    Object.defineProperty(Buffer, Symbol.species, {\r\n                        value: null,\r\n                        configurable: true\r\n                    });\r\n                }\r\n            }\r\n            function assertSize(size) {\r\n                if (typeof size !== 'number') {\r\n                    throw new TypeError('\"size\" argument must be a number');\r\n                }\r\n                else if (size < 0) {\r\n                    throw new RangeError('\"size\" argument must not be negative');\r\n                }\r\n            }\r\n            function alloc(that, size, fill, encoding) {\r\n                assertSize(size);\r\n                if (size <= 0) {\r\n                    return createBuffer(that, size);\r\n                }\r\n                if (fill !== undefined) {\r\n                    // Only pay attention to encoding if it's a string. This\r\n                    // prevents accidentally sending in a number that would\r\n                    // be interpretted as a start offset.\r\n                    return typeof encoding === 'string'\r\n                        ? createBuffer(that, size).fill(fill, encoding)\r\n                        : createBuffer(that, size).fill(fill);\r\n                }\r\n                return createBuffer(that, size);\r\n            }\r\n            /**\r\n             * Creates a new filled Buffer instance.\r\n             * alloc(size[, fill[, encoding]])\r\n             **/\r\n            Buffer.alloc = function (size, fill, encoding) {\r\n                return alloc(null, size, fill, encoding);\r\n            };\r\n            function allocUnsafe(that, size) {\r\n                assertSize(size);\r\n                that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\r\n                if (!Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    for (var i = 0; i < size; ++i) {\r\n                        that[i] = 0;\r\n                    }\r\n                }\r\n                return that;\r\n            }\r\n            /**\r\n             * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\r\n             * */\r\n            Buffer.allocUnsafe = function (size) {\r\n                return allocUnsafe(null, size);\r\n            };\r\n            /**\r\n             * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\r\n             */\r\n            Buffer.allocUnsafeSlow = function (size) {\r\n                return allocUnsafe(null, size);\r\n            };\r\n            function fromString(that, string, encoding) {\r\n                if (typeof encoding !== 'string' || encoding === '') {\r\n                    encoding = 'utf8';\r\n                }\r\n                if (!Buffer.isEncoding(encoding)) {\r\n                    throw new TypeError('\"encoding\" must be a valid string encoding');\r\n                }\r\n                var length = byteLength(string, encoding) | 0;\r\n                that = createBuffer(that, length);\r\n                var actual = that.write(string, encoding);\r\n                if (actual !== length) {\r\n                    // Writing a hex string, for example, that contains invalid characters will\r\n                    // cause everything after the first invalid character to be ignored. (e.g.\r\n                    // 'abxxcd' will be treated as 'ab')\r\n                    that = that.slice(0, actual);\r\n                }\r\n                return that;\r\n            }\r\n            function fromArrayLike(that, array) {\r\n                var length = array.length < 0 ? 0 : checked(array.length) | 0;\r\n                that = createBuffer(that, length);\r\n                for (var i = 0; i < length; i += 1) {\r\n                    that[i] = array[i] & 255;\r\n                }\r\n                return that;\r\n            }\r\n            function fromArrayBuffer(that, array, byteOffset, length) {\r\n                array.byteLength; // this throws if `array` is not a valid ArrayBuffer\r\n                if (byteOffset < 0 || array.byteLength < byteOffset) {\r\n                    throw new RangeError('\\'offset\\' is out of bounds');\r\n                }\r\n                if (array.byteLength < byteOffset + (length || 0)) {\r\n                    throw new RangeError('\\'length\\' is out of bounds');\r\n                }\r\n                if (byteOffset === undefined && length === undefined) {\r\n                    array = new Uint8Array(array);\r\n                }\r\n                else if (length === undefined) {\r\n                    array = new Uint8Array(array, byteOffset);\r\n                }\r\n                else {\r\n                    array = new Uint8Array(array, byteOffset, length);\r\n                }\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    // Return an augmented `Uint8Array` instance, for best performance\r\n                    that = array;\r\n                    that.__proto__ = Buffer.prototype;\r\n                }\r\n                else {\r\n                    // Fallback: Return an object instance of the Buffer class\r\n                    that = fromArrayLike(that, array);\r\n                }\r\n                return that;\r\n            }\r\n            function fromObject(that, obj) {\r\n                if (Buffer.isBuffer(obj)) {\r\n                    var len = checked(obj.length) | 0;\r\n                    that = createBuffer(that, len);\r\n                    if (that.length === 0) {\r\n                        return that;\r\n                    }\r\n                    obj.copy(that, 0, 0, len);\r\n                    return that;\r\n                }\r\n                if (obj) {\r\n                    if ((typeof ArrayBuffer !== 'undefined' &&\r\n                        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\r\n                        if (typeof obj.length !== 'number' || isnan(obj.length)) {\r\n                            return createBuffer(that, 0);\r\n                        }\r\n                        return fromArrayLike(that, obj);\r\n                    }\r\n                    if (obj.type === 'Buffer' && isArray(obj.data)) {\r\n                        return fromArrayLike(that, obj.data);\r\n                    }\r\n                }\r\n                throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\r\n            }\r\n            function checked(length) {\r\n                // Note: cannot use `length < kMaxLength()` here because that fails when\r\n                // length is NaN (which is otherwise coerced to zero.)\r\n                if (length >= kMaxLength()) {\r\n                    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\r\n                        'size: 0x' + kMaxLength().toString(16) + ' bytes');\r\n                }\r\n                return length | 0;\r\n            }\r\n            function SlowBuffer(length) {\r\n                if (+length != length) { // eslint-disable-line eqeqeq\r\n                    length = 0;\r\n                }\r\n                return Buffer.alloc(+length);\r\n            }\r\n            Buffer.isBuffer = function isBuffer(b) {\r\n                return !!(b != null && b._isBuffer);\r\n            };\r\n            Buffer.compare = function compare(a, b) {\r\n                if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\r\n                    throw new TypeError('Arguments must be Buffers');\r\n                }\r\n                if (a === b)\r\n                    return 0;\r\n                var x = a.length;\r\n                var y = b.length;\r\n                for (var i = 0, len = Math.min(x, y); i < len; ++i) {\r\n                    if (a[i] !== b[i]) {\r\n                        x = a[i];\r\n                        y = b[i];\r\n                        break;\r\n                    }\r\n                }\r\n                if (x < y)\r\n                    return -1;\r\n                if (y < x)\r\n                    return 1;\r\n                return 0;\r\n            };\r\n            Buffer.isEncoding = function isEncoding(encoding) {\r\n                switch (String(encoding).toLowerCase()) {\r\n                    case 'hex':\r\n                    case 'utf8':\r\n                    case 'utf-8':\r\n                    case 'ascii':\r\n                    case 'latin1':\r\n                    case 'binary':\r\n                    case 'base64':\r\n                    case 'ucs2':\r\n                    case 'ucs-2':\r\n                    case 'utf16le':\r\n                    case 'utf-16le':\r\n                        return true;\r\n                    default:\r\n                        return false;\r\n                }\r\n            };\r\n            Buffer.concat = function concat(list, length) {\r\n                if (!isArray(list)) {\r\n                    throw new TypeError('\"list\" argument must be an Array of Buffers');\r\n                }\r\n                if (list.length === 0) {\r\n                    return Buffer.alloc(0);\r\n                }\r\n                var i;\r\n                if (length === undefined) {\r\n                    length = 0;\r\n                    for (i = 0; i < list.length; ++i) {\r\n                        length += list[i].length;\r\n                    }\r\n                }\r\n                var buffer = Buffer.allocUnsafe(length);\r\n                var pos = 0;\r\n                for (i = 0; i < list.length; ++i) {\r\n                    var buf = list[i];\r\n                    if (!Buffer.isBuffer(buf)) {\r\n                        throw new TypeError('\"list\" argument must be an Array of Buffers');\r\n                    }\r\n                    buf.copy(buffer, pos);\r\n                    pos += buf.length;\r\n                }\r\n                return buffer;\r\n            };\r\n            function byteLength(string, encoding) {\r\n                if (Buffer.isBuffer(string)) {\r\n                    return string.length;\r\n                }\r\n                if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\r\n                    (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\r\n                    return string.byteLength;\r\n                }\r\n                if (typeof string !== 'string') {\r\n                    string = '' + string;\r\n                }\r\n                var len = string.length;\r\n                if (len === 0)\r\n                    return 0;\r\n                // Use a for loop to avoid recursion\r\n                var loweredCase = false;\r\n                for (;;) {\r\n                    switch (encoding) {\r\n                        case 'ascii':\r\n                        case 'latin1':\r\n                        case 'binary':\r\n                            return len;\r\n                        case 'utf8':\r\n                        case 'utf-8':\r\n                        case undefined:\r\n                            return utf8ToBytes(string).length;\r\n                        case 'ucs2':\r\n                        case 'ucs-2':\r\n                        case 'utf16le':\r\n                        case 'utf-16le':\r\n                            return len * 2;\r\n                        case 'hex':\r\n                            return len >>> 1;\r\n                        case 'base64':\r\n                            return base64ToBytes(string).length;\r\n                        default:\r\n                            if (loweredCase)\r\n                                return utf8ToBytes(string).length; // assume utf8\r\n                            encoding = ('' + encoding).toLowerCase();\r\n                            loweredCase = true;\r\n                    }\r\n                }\r\n            }\r\n            Buffer.byteLength = byteLength;\r\n            function slowToString(encoding, start, end) {\r\n                var loweredCase = false;\r\n                // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\r\n                // property of a typed array.\r\n                // This behaves neither like String nor Uint8Array in that we set start/end\r\n                // to their upper/lower bounds if the value passed is out of range.\r\n                // undefined is handled specially as per ECMA-262 6th Edition,\r\n                // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\r\n                if (start === undefined || start < 0) {\r\n                    start = 0;\r\n                }\r\n                // Return early if start > this.length. Done here to prevent potential uint32\r\n                // coercion fail below.\r\n                if (start > this.length) {\r\n                    return '';\r\n                }\r\n                if (end === undefined || end > this.length) {\r\n                    end = this.length;\r\n                }\r\n                if (end <= 0) {\r\n                    return '';\r\n                }\r\n                // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\r\n                end >>>= 0;\r\n                start >>>= 0;\r\n                if (end <= start) {\r\n                    return '';\r\n                }\r\n                if (!encoding)\r\n                    encoding = 'utf8';\r\n                while (true) {\r\n                    switch (encoding) {\r\n                        case 'hex':\r\n                            return hexSlice(this, start, end);\r\n                        case 'utf8':\r\n                        case 'utf-8':\r\n                            return utf8Slice(this, start, end);\r\n                        case 'ascii':\r\n                            return asciiSlice(this, start, end);\r\n                        case 'latin1':\r\n                        case 'binary':\r\n                            return latin1Slice(this, start, end);\r\n                        case 'base64':\r\n                            return base64Slice(this, start, end);\r\n                        case 'ucs2':\r\n                        case 'ucs-2':\r\n                        case 'utf16le':\r\n                        case 'utf-16le':\r\n                            return utf16leSlice(this, start, end);\r\n                        default:\r\n                            if (loweredCase)\r\n                                throw new TypeError('Unknown encoding: ' + encoding);\r\n                            encoding = (encoding + '').toLowerCase();\r\n                            loweredCase = true;\r\n                    }\r\n                }\r\n            }\r\n            // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\r\n            // Buffer instances.\r\n            Buffer.prototype._isBuffer = true;\r\n            function swap(b, n, m) {\r\n                var i = b[n];\r\n                b[n] = b[m];\r\n                b[m] = i;\r\n            }\r\n            Buffer.prototype.swap16 = function swap16() {\r\n                var len = this.length;\r\n                if (len % 2 !== 0) {\r\n                    throw new RangeError('Buffer size must be a multiple of 16-bits');\r\n                }\r\n                for (var i = 0; i < len; i += 2) {\r\n                    swap(this, i, i + 1);\r\n                }\r\n                return this;\r\n            };\r\n            Buffer.prototype.swap32 = function swap32() {\r\n                var len = this.length;\r\n                if (len % 4 !== 0) {\r\n                    throw new RangeError('Buffer size must be a multiple of 32-bits');\r\n                }\r\n                for (var i = 0; i < len; i += 4) {\r\n                    swap(this, i, i + 3);\r\n                    swap(this, i + 1, i + 2);\r\n                }\r\n                return this;\r\n            };\r\n            Buffer.prototype.swap64 = function swap64() {\r\n                var len = this.length;\r\n                if (len % 8 !== 0) {\r\n                    throw new RangeError('Buffer size must be a multiple of 64-bits');\r\n                }\r\n                for (var i = 0; i < len; i += 8) {\r\n                    swap(this, i, i + 7);\r\n                    swap(this, i + 1, i + 6);\r\n                    swap(this, i + 2, i + 5);\r\n                    swap(this, i + 3, i + 4);\r\n                }\r\n                return this;\r\n            };\r\n            Buffer.prototype.toString = function toString() {\r\n                var length = this.length | 0;\r\n                if (length === 0)\r\n                    return '';\r\n                if (arguments.length === 0)\r\n                    return utf8Slice(this, 0, length);\r\n                return slowToString.apply(this, arguments);\r\n            };\r\n            Buffer.prototype.equals = function equals(b) {\r\n                if (!Buffer.isBuffer(b))\r\n                    throw new TypeError('Argument must be a Buffer');\r\n                if (this === b)\r\n                    return true;\r\n                return Buffer.compare(this, b) === 0;\r\n            };\r\n            Buffer.prototype.inspect = function inspect() {\r\n                var str = '';\r\n                var max = exports.INSPECT_MAX_BYTES;\r\n                if (this.length > 0) {\r\n                    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\r\n                    if (this.length > max)\r\n                        str += ' ... ';\r\n                }\r\n                return '<Buffer ' + str + '>';\r\n            };\r\n            Buffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\r\n                if (!Buffer.isBuffer(target)) {\r\n                    throw new TypeError('Argument must be a Buffer');\r\n                }\r\n                if (start === undefined) {\r\n                    start = 0;\r\n                }\r\n                if (end === undefined) {\r\n                    end = target ? target.length : 0;\r\n                }\r\n                if (thisStart === undefined) {\r\n                    thisStart = 0;\r\n                }\r\n                if (thisEnd === undefined) {\r\n                    thisEnd = this.length;\r\n                }\r\n                if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\r\n                    throw new RangeError('out of range index');\r\n                }\r\n                if (thisStart >= thisEnd && start >= end) {\r\n                    return 0;\r\n                }\r\n                if (thisStart >= thisEnd) {\r\n                    return -1;\r\n                }\r\n                if (start >= end) {\r\n                    return 1;\r\n                }\r\n                start >>>= 0;\r\n                end >>>= 0;\r\n                thisStart >>>= 0;\r\n                thisEnd >>>= 0;\r\n                if (this === target)\r\n                    return 0;\r\n                var x = thisEnd - thisStart;\r\n                var y = end - start;\r\n                var len = Math.min(x, y);\r\n                var thisCopy = this.slice(thisStart, thisEnd);\r\n                var targetCopy = target.slice(start, end);\r\n                for (var i = 0; i < len; ++i) {\r\n                    if (thisCopy[i] !== targetCopy[i]) {\r\n                        x = thisCopy[i];\r\n                        y = targetCopy[i];\r\n                        break;\r\n                    }\r\n                }\r\n                if (x < y)\r\n                    return -1;\r\n                if (y < x)\r\n                    return 1;\r\n                return 0;\r\n            };\r\n            // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\r\n            // OR the last index of `val` in `buffer` at offset <= `byteOffset`.\r\n            //\r\n            // Arguments:\r\n            // - buffer - a Buffer to search\r\n            // - val - a string, Buffer, or number\r\n            // - byteOffset - an index into `buffer`; will be clamped to an int32\r\n            // - encoding - an optional encoding, relevant is val is a string\r\n            // - dir - true for indexOf, false for lastIndexOf\r\n            function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\r\n                // Empty buffer means no match\r\n                if (buffer.length === 0)\r\n                    return -1;\r\n                // Normalize byteOffset\r\n                if (typeof byteOffset === 'string') {\r\n                    encoding = byteOffset;\r\n                    byteOffset = 0;\r\n                }\r\n                else if (byteOffset > 0x7fffffff) {\r\n                    byteOffset = 0x7fffffff;\r\n                }\r\n                else if (byteOffset < -0x80000000) {\r\n                    byteOffset = -0x80000000;\r\n                }\r\n                byteOffset = +byteOffset; // Coerce to Number.\r\n                if (isNaN(byteOffset)) {\r\n                    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\r\n                    byteOffset = dir ? 0 : (buffer.length - 1);\r\n                }\r\n                // Normalize byteOffset: negative offsets start from the end of the buffer\r\n                if (byteOffset < 0)\r\n                    byteOffset = buffer.length + byteOffset;\r\n                if (byteOffset >= buffer.length) {\r\n                    if (dir)\r\n                        return -1;\r\n                    else\r\n                        byteOffset = buffer.length - 1;\r\n                }\r\n                else if (byteOffset < 0) {\r\n                    if (dir)\r\n                        byteOffset = 0;\r\n                    else\r\n                        return -1;\r\n                }\r\n                // Normalize val\r\n                if (typeof val === 'string') {\r\n                    val = Buffer.from(val, encoding);\r\n                }\r\n                // Finally, search either indexOf (if dir is true) or lastIndexOf\r\n                if (Buffer.isBuffer(val)) {\r\n                    // Special case: looking for empty string/buffer always fails\r\n                    if (val.length === 0) {\r\n                        return -1;\r\n                    }\r\n                    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\r\n                }\r\n                else if (typeof val === 'number') {\r\n                    val = val & 0xFF; // Search for a byte value [0-255]\r\n                    if (Buffer.TYPED_ARRAY_SUPPORT &&\r\n                        typeof Uint8Array.prototype.indexOf === 'function') {\r\n                        if (dir) {\r\n                            return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\r\n                        }\r\n                        else {\r\n                            return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\r\n                        }\r\n                    }\r\n                    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\r\n                }\r\n                throw new TypeError('val must be string, number or Buffer');\r\n            }\r\n            function arrayIndexOf(arr, val, byteOffset, encoding, dir) {\r\n                var indexSize = 1;\r\n                var arrLength = arr.length;\r\n                var valLength = val.length;\r\n                if (encoding !== undefined) {\r\n                    encoding = String(encoding).toLowerCase();\r\n                    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\r\n                        encoding === 'utf16le' || encoding === 'utf-16le') {\r\n                        if (arr.length < 2 || val.length < 2) {\r\n                            return -1;\r\n                        }\r\n                        indexSize = 2;\r\n                        arrLength /= 2;\r\n                        valLength /= 2;\r\n                        byteOffset /= 2;\r\n                    }\r\n                }\r\n                function read(buf, i) {\r\n                    if (indexSize === 1) {\r\n                        return buf[i];\r\n                    }\r\n                    else {\r\n                        return buf.readUInt16BE(i * indexSize);\r\n                    }\r\n                }\r\n                var i;\r\n                if (dir) {\r\n                    var foundIndex = -1;\r\n                    for (i = byteOffset; i < arrLength; i++) {\r\n                        if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\r\n                            if (foundIndex === -1)\r\n                                foundIndex = i;\r\n                            if (i - foundIndex + 1 === valLength)\r\n                                return foundIndex * indexSize;\r\n                        }\r\n                        else {\r\n                            if (foundIndex !== -1)\r\n                                i -= i - foundIndex;\r\n                            foundIndex = -1;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (byteOffset + valLength > arrLength)\r\n                        byteOffset = arrLength - valLength;\r\n                    for (i = byteOffset; i >= 0; i--) {\r\n                        var found = true;\r\n                        for (var j = 0; j < valLength; j++) {\r\n                            if (read(arr, i + j) !== read(val, j)) {\r\n                                found = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (found)\r\n                            return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            }\r\n            Buffer.prototype.includes = function includes(val, byteOffset, encoding) {\r\n                return this.indexOf(val, byteOffset, encoding) !== -1;\r\n            };\r\n            Buffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\r\n                return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\r\n            };\r\n            Buffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\r\n                return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\r\n            };\r\n            function hexWrite(buf, string, offset, length) {\r\n                offset = Number(offset) || 0;\r\n                var remaining = buf.length - offset;\r\n                if (!length) {\r\n                    length = remaining;\r\n                }\r\n                else {\r\n                    length = Number(length);\r\n                    if (length > remaining) {\r\n                        length = remaining;\r\n                    }\r\n                }\r\n                // must be an even number of digits\r\n                var strLen = string.length;\r\n                if (strLen % 2 !== 0)\r\n                    throw new TypeError('Invalid hex string');\r\n                if (length > strLen / 2) {\r\n                    length = strLen / 2;\r\n                }\r\n                for (var i = 0; i < length; ++i) {\r\n                    var parsed = parseInt(string.substr(i * 2, 2), 16);\r\n                    if (isNaN(parsed))\r\n                        return i;\r\n                    buf[offset + i] = parsed;\r\n                }\r\n                return i;\r\n            }\r\n            function utf8Write(buf, string, offset, length) {\r\n                return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\r\n            }\r\n            function asciiWrite(buf, string, offset, length) {\r\n                return blitBuffer(asciiToBytes(string), buf, offset, length);\r\n            }\r\n            function latin1Write(buf, string, offset, length) {\r\n                return asciiWrite(buf, string, offset, length);\r\n            }\r\n            function base64Write(buf, string, offset, length) {\r\n                return blitBuffer(base64ToBytes(string), buf, offset, length);\r\n            }\r\n            function ucs2Write(buf, string, offset, length) {\r\n                return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\r\n            }\r\n            Buffer.prototype.write = function write(string, offset, length, encoding) {\r\n                // Buffer#write(string)\r\n                if (offset === undefined) {\r\n                    encoding = 'utf8';\r\n                    length = this.length;\r\n                    offset = 0;\r\n                    // Buffer#write(string, encoding)\r\n                }\r\n                else if (length === undefined && typeof offset === 'string') {\r\n                    encoding = offset;\r\n                    length = this.length;\r\n                    offset = 0;\r\n                    // Buffer#write(string, offset[, length][, encoding])\r\n                }\r\n                else if (isFinite(offset)) {\r\n                    offset = offset | 0;\r\n                    if (isFinite(length)) {\r\n                        length = length | 0;\r\n                        if (encoding === undefined)\r\n                            encoding = 'utf8';\r\n                    }\r\n                    else {\r\n                        encoding = length;\r\n                        length = undefined;\r\n                    }\r\n                    // legacy write(string, encoding, offset, length) - remove in v0.13\r\n                }\r\n                else {\r\n                    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\r\n                }\r\n                var remaining = this.length - offset;\r\n                if (length === undefined || length > remaining)\r\n                    length = remaining;\r\n                if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\r\n                    throw new RangeError('Attempt to write outside buffer bounds');\r\n                }\r\n                if (!encoding)\r\n                    encoding = 'utf8';\r\n                var loweredCase = false;\r\n                for (;;) {\r\n                    switch (encoding) {\r\n                        case 'hex':\r\n                            return hexWrite(this, string, offset, length);\r\n                        case 'utf8':\r\n                        case 'utf-8':\r\n                            return utf8Write(this, string, offset, length);\r\n                        case 'ascii':\r\n                            return asciiWrite(this, string, offset, length);\r\n                        case 'latin1':\r\n                        case 'binary':\r\n                            return latin1Write(this, string, offset, length);\r\n                        case 'base64':\r\n                            // Warning: maxLength not taken into account in base64Write\r\n                            return base64Write(this, string, offset, length);\r\n                        case 'ucs2':\r\n                        case 'ucs-2':\r\n                        case 'utf16le':\r\n                        case 'utf-16le':\r\n                            return ucs2Write(this, string, offset, length);\r\n                        default:\r\n                            if (loweredCase)\r\n                                throw new TypeError('Unknown encoding: ' + encoding);\r\n                            encoding = ('' + encoding).toLowerCase();\r\n                            loweredCase = true;\r\n                    }\r\n                }\r\n            };\r\n            Buffer.prototype.toJSON = function toJSON() {\r\n                return {\r\n                    type: 'Buffer',\r\n                    data: Array.prototype.slice.call(this._arr || this, 0)\r\n                };\r\n            };\r\n            function base64Slice(buf, start, end) {\r\n                if (start === 0 && end === buf.length) {\r\n                    return base64.fromByteArray(buf);\r\n                }\r\n                else {\r\n                    return base64.fromByteArray(buf.slice(start, end));\r\n                }\r\n            }\r\n            function utf8Slice(buf, start, end) {\r\n                end = Math.min(buf.length, end);\r\n                var res = [];\r\n                var i = start;\r\n                while (i < end) {\r\n                    var firstByte = buf[i];\r\n                    var codePoint = null;\r\n                    var bytesPerSequence = (firstByte > 0xEF) ? 4\r\n                        : (firstByte > 0xDF) ? 3\r\n                            : (firstByte > 0xBF) ? 2\r\n                                : 1;\r\n                    if (i + bytesPerSequence <= end) {\r\n                        var secondByte, thirdByte, fourthByte, tempCodePoint;\r\n                        switch (bytesPerSequence) {\r\n                            case 1:\r\n                                if (firstByte < 0x80) {\r\n                                    codePoint = firstByte;\r\n                                }\r\n                                break;\r\n                            case 2:\r\n                                secondByte = buf[i + 1];\r\n                                if ((secondByte & 0xC0) === 0x80) {\r\n                                    tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F);\r\n                                    if (tempCodePoint > 0x7F) {\r\n                                        codePoint = tempCodePoint;\r\n                                    }\r\n                                }\r\n                                break;\r\n                            case 3:\r\n                                secondByte = buf[i + 1];\r\n                                thirdByte = buf[i + 2];\r\n                                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\r\n                                    tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F);\r\n                                    if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\r\n                                        codePoint = tempCodePoint;\r\n                                    }\r\n                                }\r\n                                break;\r\n                            case 4:\r\n                                secondByte = buf[i + 1];\r\n                                thirdByte = buf[i + 2];\r\n                                fourthByte = buf[i + 3];\r\n                                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\r\n                                    tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F);\r\n                                    if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\r\n                                        codePoint = tempCodePoint;\r\n                                    }\r\n                                }\r\n                        }\r\n                    }\r\n                    if (codePoint === null) {\r\n                        // we did not generate a valid codePoint so insert a\r\n                        // replacement char (U+FFFD) and advance only 1 byte\r\n                        codePoint = 0xFFFD;\r\n                        bytesPerSequence = 1;\r\n                    }\r\n                    else if (codePoint > 0xFFFF) {\r\n                        // encode to utf16 (surrogate pair dance)\r\n                        codePoint -= 0x10000;\r\n                        res.push(codePoint >>> 10 & 0x3FF | 0xD800);\r\n                        codePoint = 0xDC00 | codePoint & 0x3FF;\r\n                    }\r\n                    res.push(codePoint);\r\n                    i += bytesPerSequence;\r\n                }\r\n                return decodeCodePointsArray(res);\r\n            }\r\n            // Based on http://stackoverflow.com/a/22747272/680742, the browser with\r\n            // the lowest limit is Chrome, with 0x10000 args.\r\n            // We go 1 magnitude less, for safety\r\n            var MAX_ARGUMENTS_LENGTH = 0x1000;\r\n            function decodeCodePointsArray(codePoints) {\r\n                var len = codePoints.length;\r\n                if (len <= MAX_ARGUMENTS_LENGTH) {\r\n                    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\r\n                }\r\n                // Decode in chunks to avoid \"call stack size exceeded\".\r\n                var res = '';\r\n                var i = 0;\r\n                while (i < len) {\r\n                    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\r\n                }\r\n                return res;\r\n            }\r\n            function asciiSlice(buf, start, end) {\r\n                var ret = '';\r\n                end = Math.min(buf.length, end);\r\n                for (var i = start; i < end; ++i) {\r\n                    ret += String.fromCharCode(buf[i] & 0x7F);\r\n                }\r\n                return ret;\r\n            }\r\n            function latin1Slice(buf, start, end) {\r\n                var ret = '';\r\n                end = Math.min(buf.length, end);\r\n                for (var i = start; i < end; ++i) {\r\n                    ret += String.fromCharCode(buf[i]);\r\n                }\r\n                return ret;\r\n            }\r\n            function hexSlice(buf, start, end) {\r\n                var len = buf.length;\r\n                if (!start || start < 0)\r\n                    start = 0;\r\n                if (!end || end < 0 || end > len)\r\n                    end = len;\r\n                var out = '';\r\n                for (var i = start; i < end; ++i) {\r\n                    out += toHex(buf[i]);\r\n                }\r\n                return out;\r\n            }\r\n            function utf16leSlice(buf, start, end) {\r\n                var bytes = buf.slice(start, end);\r\n                var res = '';\r\n                for (var i = 0; i < bytes.length; i += 2) {\r\n                    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\r\n                }\r\n                return res;\r\n            }\r\n            Buffer.prototype.slice = function slice(start, end) {\r\n                var len = this.length;\r\n                start = ~~start;\r\n                end = end === undefined ? len : ~~end;\r\n                if (start < 0) {\r\n                    start += len;\r\n                    if (start < 0)\r\n                        start = 0;\r\n                }\r\n                else if (start > len) {\r\n                    start = len;\r\n                }\r\n                if (end < 0) {\r\n                    end += len;\r\n                    if (end < 0)\r\n                        end = 0;\r\n                }\r\n                else if (end > len) {\r\n                    end = len;\r\n                }\r\n                if (end < start)\r\n                    end = start;\r\n                var newBuf;\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    newBuf = this.subarray(start, end);\r\n                    newBuf.__proto__ = Buffer.prototype;\r\n                }\r\n                else {\r\n                    var sliceLen = end - start;\r\n                    newBuf = new Buffer(sliceLen, undefined);\r\n                    for (var i = 0; i < sliceLen; ++i) {\r\n                        newBuf[i] = this[i + start];\r\n                    }\r\n                }\r\n                return newBuf;\r\n            };\r\n            /*\r\n             * Need to make sure that buffer isn't trying to write out of bounds.\r\n             */\r\n            function checkOffset(offset, ext, length) {\r\n                if ((offset % 1) !== 0 || offset < 0)\r\n                    throw new RangeError('offset is not uint');\r\n                if (offset + ext > length)\r\n                    throw new RangeError('Trying to access beyond buffer length');\r\n            }\r\n            Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\r\n                offset = offset | 0;\r\n                byteLength = byteLength | 0;\r\n                if (!noAssert)\r\n                    checkOffset(offset, byteLength, this.length);\r\n                var val = this[offset];\r\n                var mul = 1;\r\n                var i = 0;\r\n                while (++i < byteLength && (mul *= 0x100)) {\r\n                    val += this[offset + i] * mul;\r\n                }\r\n                return val;\r\n            };\r\n            Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\r\n                offset = offset | 0;\r\n                byteLength = byteLength | 0;\r\n                if (!noAssert) {\r\n                    checkOffset(offset, byteLength, this.length);\r\n                }\r\n                var val = this[offset + --byteLength];\r\n                var mul = 1;\r\n                while (byteLength > 0 && (mul *= 0x100)) {\r\n                    val += this[offset + --byteLength] * mul;\r\n                }\r\n                return val;\r\n            };\r\n            Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 1, this.length);\r\n                return this[offset];\r\n            };\r\n            Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 2, this.length);\r\n                return this[offset] | (this[offset + 1] << 8);\r\n            };\r\n            Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 2, this.length);\r\n                return (this[offset] << 8) | this[offset + 1];\r\n            };\r\n            Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 4, this.length);\r\n                return ((this[offset]) |\r\n                    (this[offset + 1] << 8) |\r\n                    (this[offset + 2] << 16)) +\r\n                    (this[offset + 3] * 0x1000000);\r\n            };\r\n            Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 4, this.length);\r\n                return (this[offset] * 0x1000000) +\r\n                    ((this[offset + 1] << 16) |\r\n                        (this[offset + 2] << 8) |\r\n                        this[offset + 3]);\r\n            };\r\n            Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\r\n                offset = offset | 0;\r\n                byteLength = byteLength | 0;\r\n                if (!noAssert)\r\n                    checkOffset(offset, byteLength, this.length);\r\n                var val = this[offset];\r\n                var mul = 1;\r\n                var i = 0;\r\n                while (++i < byteLength && (mul *= 0x100)) {\r\n                    val += this[offset + i] * mul;\r\n                }\r\n                mul *= 0x80;\r\n                if (val >= mul)\r\n                    val -= Math.pow(2, 8 * byteLength);\r\n                return val;\r\n            };\r\n            Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\r\n                offset = offset | 0;\r\n                byteLength = byteLength | 0;\r\n                if (!noAssert)\r\n                    checkOffset(offset, byteLength, this.length);\r\n                var i = byteLength;\r\n                var mul = 1;\r\n                var val = this[offset + --i];\r\n                while (i > 0 && (mul *= 0x100)) {\r\n                    val += this[offset + --i] * mul;\r\n                }\r\n                mul *= 0x80;\r\n                if (val >= mul)\r\n                    val -= Math.pow(2, 8 * byteLength);\r\n                return val;\r\n            };\r\n            Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 1, this.length);\r\n                if (!(this[offset] & 0x80))\r\n                    return (this[offset]);\r\n                return ((0xff - this[offset] + 1) * -1);\r\n            };\r\n            Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 2, this.length);\r\n                var val = this[offset] | (this[offset + 1] << 8);\r\n                return (val & 0x8000) ? val | 0xFFFF0000 : val;\r\n            };\r\n            Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 2, this.length);\r\n                var val = this[offset + 1] | (this[offset] << 8);\r\n                return (val & 0x8000) ? val | 0xFFFF0000 : val;\r\n            };\r\n            Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 4, this.length);\r\n                return (this[offset]) |\r\n                    (this[offset + 1] << 8) |\r\n                    (this[offset + 2] << 16) |\r\n                    (this[offset + 3] << 24);\r\n            };\r\n            Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 4, this.length);\r\n                return (this[offset] << 24) |\r\n                    (this[offset + 1] << 16) |\r\n                    (this[offset + 2] << 8) |\r\n                    (this[offset + 3]);\r\n            };\r\n            Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 4, this.length);\r\n                return ieee754.read(this, offset, true, 23, 4);\r\n            };\r\n            Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 4, this.length);\r\n                return ieee754.read(this, offset, false, 23, 4);\r\n            };\r\n            Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 8, this.length);\r\n                return ieee754.read(this, offset, true, 52, 8);\r\n            };\r\n            Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\r\n                if (!noAssert)\r\n                    checkOffset(offset, 8, this.length);\r\n                return ieee754.read(this, offset, false, 52, 8);\r\n            };\r\n            function checkInt(buf, value, offset, ext, max, min) {\r\n                if (!Buffer.isBuffer(buf))\r\n                    throw new TypeError('\"buffer\" argument must be a Buffer instance');\r\n                if (value > max || value < min)\r\n                    throw new RangeError('\"value\" argument is out of bounds');\r\n                if (offset + ext > buf.length)\r\n                    throw new RangeError('Index out of range');\r\n            }\r\n            Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                byteLength = byteLength | 0;\r\n                if (!noAssert) {\r\n                    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\r\n                    checkInt(this, value, offset, byteLength, maxBytes, 0);\r\n                }\r\n                var mul = 1;\r\n                var i = 0;\r\n                this[offset] = value & 0xFF;\r\n                while (++i < byteLength && (mul *= 0x100)) {\r\n                    this[offset + i] = (value / mul) & 0xFF;\r\n                }\r\n                return offset + byteLength;\r\n            };\r\n            Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                byteLength = byteLength | 0;\r\n                if (!noAssert) {\r\n                    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\r\n                    checkInt(this, value, offset, byteLength, maxBytes, 0);\r\n                }\r\n                var i = byteLength - 1;\r\n                var mul = 1;\r\n                this[offset + i] = value & 0xFF;\r\n                while (--i >= 0 && (mul *= 0x100)) {\r\n                    this[offset + i] = (value / mul) & 0xFF;\r\n                }\r\n                return offset + byteLength;\r\n            };\r\n            Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 1, 0xff, 0);\r\n                if (!Buffer.TYPED_ARRAY_SUPPORT)\r\n                    value = Math.floor(value);\r\n                this[offset] = (value & 0xff);\r\n                return offset + 1;\r\n            };\r\n            function objectWriteUInt16(buf, value, offset, littleEndian) {\r\n                if (value < 0)\r\n                    value = 0xffff + value + 1;\r\n                for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\r\n                    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\r\n                        (littleEndian ? i : 1 - i) * 8;\r\n                }\r\n            }\r\n            Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 2, 0xffff, 0);\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset] = (value & 0xff);\r\n                    this[offset + 1] = (value >>> 8);\r\n                }\r\n                else {\r\n                    objectWriteUInt16(this, value, offset, true);\r\n                }\r\n                return offset + 2;\r\n            };\r\n            Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 2, 0xffff, 0);\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset] = (value >>> 8);\r\n                    this[offset + 1] = (value & 0xff);\r\n                }\r\n                else {\r\n                    objectWriteUInt16(this, value, offset, false);\r\n                }\r\n                return offset + 2;\r\n            };\r\n            function objectWriteUInt32(buf, value, offset, littleEndian) {\r\n                if (value < 0)\r\n                    value = 0xffffffff + value + 1;\r\n                for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\r\n                    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff;\r\n                }\r\n            }\r\n            Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 4, 0xffffffff, 0);\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset + 3] = (value >>> 24);\r\n                    this[offset + 2] = (value >>> 16);\r\n                    this[offset + 1] = (value >>> 8);\r\n                    this[offset] = (value & 0xff);\r\n                }\r\n                else {\r\n                    objectWriteUInt32(this, value, offset, true);\r\n                }\r\n                return offset + 4;\r\n            };\r\n            Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 4, 0xffffffff, 0);\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset] = (value >>> 24);\r\n                    this[offset + 1] = (value >>> 16);\r\n                    this[offset + 2] = (value >>> 8);\r\n                    this[offset + 3] = (value & 0xff);\r\n                }\r\n                else {\r\n                    objectWriteUInt32(this, value, offset, false);\r\n                }\r\n                return offset + 4;\r\n            };\r\n            Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert) {\r\n                    var limit = Math.pow(2, 8 * byteLength - 1);\r\n                    checkInt(this, value, offset, byteLength, limit - 1, -limit);\r\n                }\r\n                var i = 0;\r\n                var mul = 1;\r\n                var sub = 0;\r\n                this[offset] = value & 0xFF;\r\n                while (++i < byteLength && (mul *= 0x100)) {\r\n                    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\r\n                        sub = 1;\r\n                    }\r\n                    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\r\n                }\r\n                return offset + byteLength;\r\n            };\r\n            Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert) {\r\n                    var limit = Math.pow(2, 8 * byteLength - 1);\r\n                    checkInt(this, value, offset, byteLength, limit - 1, -limit);\r\n                }\r\n                var i = byteLength - 1;\r\n                var mul = 1;\r\n                var sub = 0;\r\n                this[offset + i] = value & 0xFF;\r\n                while (--i >= 0 && (mul *= 0x100)) {\r\n                    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\r\n                        sub = 1;\r\n                    }\r\n                    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\r\n                }\r\n                return offset + byteLength;\r\n            };\r\n            Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 1, 0x7f, -0x80);\r\n                if (!Buffer.TYPED_ARRAY_SUPPORT)\r\n                    value = Math.floor(value);\r\n                if (value < 0)\r\n                    value = 0xff + value + 1;\r\n                this[offset] = (value & 0xff);\r\n                return offset + 1;\r\n            };\r\n            Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 2, 0x7fff, -0x8000);\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset] = (value & 0xff);\r\n                    this[offset + 1] = (value >>> 8);\r\n                }\r\n                else {\r\n                    objectWriteUInt16(this, value, offset, true);\r\n                }\r\n                return offset + 2;\r\n            };\r\n            Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 2, 0x7fff, -0x8000);\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset] = (value >>> 8);\r\n                    this[offset + 1] = (value & 0xff);\r\n                }\r\n                else {\r\n                    objectWriteUInt16(this, value, offset, false);\r\n                }\r\n                return offset + 2;\r\n            };\r\n            Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset] = (value & 0xff);\r\n                    this[offset + 1] = (value >>> 8);\r\n                    this[offset + 2] = (value >>> 16);\r\n                    this[offset + 3] = (value >>> 24);\r\n                }\r\n                else {\r\n                    objectWriteUInt32(this, value, offset, true);\r\n                }\r\n                return offset + 4;\r\n            };\r\n            Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\r\n                value = +value;\r\n                offset = offset | 0;\r\n                if (!noAssert)\r\n                    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\r\n                if (value < 0)\r\n                    value = 0xffffffff + value + 1;\r\n                if (Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    this[offset] = (value >>> 24);\r\n                    this[offset + 1] = (value >>> 16);\r\n                    this[offset + 2] = (value >>> 8);\r\n                    this[offset + 3] = (value & 0xff);\r\n                }\r\n                else {\r\n                    objectWriteUInt32(this, value, offset, false);\r\n                }\r\n                return offset + 4;\r\n            };\r\n            function checkIEEE754(buf, value, offset, ext, max, min) {\r\n                if (offset + ext > buf.length)\r\n                    throw new RangeError('Index out of range');\r\n                if (offset < 0)\r\n                    throw new RangeError('Index out of range');\r\n            }\r\n            function writeFloat(buf, value, offset, littleEndian, noAssert) {\r\n                if (!noAssert) {\r\n                    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\r\n                }\r\n                ieee754.write(buf, value, offset, littleEndian, 23, 4);\r\n                return offset + 4;\r\n            }\r\n            Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\r\n                return writeFloat(this, value, offset, true, noAssert);\r\n            };\r\n            Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\r\n                return writeFloat(this, value, offset, false, noAssert);\r\n            };\r\n            function writeDouble(buf, value, offset, littleEndian, noAssert) {\r\n                if (!noAssert) {\r\n                    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\r\n                }\r\n                ieee754.write(buf, value, offset, littleEndian, 52, 8);\r\n                return offset + 8;\r\n            }\r\n            Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\r\n                return writeDouble(this, value, offset, true, noAssert);\r\n            };\r\n            Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\r\n                return writeDouble(this, value, offset, false, noAssert);\r\n            };\r\n            // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\r\n            Buffer.prototype.copy = function copy(target, targetStart, start, end) {\r\n                if (!start)\r\n                    start = 0;\r\n                if (!end && end !== 0)\r\n                    end = this.length;\r\n                if (targetStart >= target.length)\r\n                    targetStart = target.length;\r\n                if (!targetStart)\r\n                    targetStart = 0;\r\n                if (end > 0 && end < start)\r\n                    end = start;\r\n                // Copy 0 bytes; we're done\r\n                if (end === start)\r\n                    return 0;\r\n                if (target.length === 0 || this.length === 0)\r\n                    return 0;\r\n                // Fatal error conditions\r\n                if (targetStart < 0) {\r\n                    throw new RangeError('targetStart out of bounds');\r\n                }\r\n                if (start < 0 || start >= this.length)\r\n                    throw new RangeError('sourceStart out of bounds');\r\n                if (end < 0)\r\n                    throw new RangeError('sourceEnd out of bounds');\r\n                // Are we oob?\r\n                if (end > this.length)\r\n                    end = this.length;\r\n                if (target.length - targetStart < end - start) {\r\n                    end = target.length - targetStart + start;\r\n                }\r\n                var len = end - start;\r\n                var i;\r\n                if (this === target && start < targetStart && targetStart < end) {\r\n                    // descending copy from end\r\n                    for (i = len - 1; i >= 0; --i) {\r\n                        target[i + targetStart] = this[i + start];\r\n                    }\r\n                }\r\n                else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\r\n                    // ascending copy from start\r\n                    for (i = 0; i < len; ++i) {\r\n                        target[i + targetStart] = this[i + start];\r\n                    }\r\n                }\r\n                else {\r\n                    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\r\n                }\r\n                return len;\r\n            };\r\n            // Usage:\r\n            //    buffer.fill(number[, offset[, end]])\r\n            //    buffer.fill(buffer[, offset[, end]])\r\n            //    buffer.fill(string[, offset[, end]][, encoding])\r\n            Buffer.prototype.fill = function fill(val, start, end, encoding) {\r\n                // Handle string cases:\r\n                if (typeof val === 'string') {\r\n                    if (typeof start === 'string') {\r\n                        encoding = start;\r\n                        start = 0;\r\n                        end = this.length;\r\n                    }\r\n                    else if (typeof end === 'string') {\r\n                        encoding = end;\r\n                        end = this.length;\r\n                    }\r\n                    if (val.length === 1) {\r\n                        var code = val.charCodeAt(0);\r\n                        if (code < 256) {\r\n                            val = code;\r\n                        }\r\n                    }\r\n                    if (encoding !== undefined && typeof encoding !== 'string') {\r\n                        throw new TypeError('encoding must be a string');\r\n                    }\r\n                    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\r\n                        throw new TypeError('Unknown encoding: ' + encoding);\r\n                    }\r\n                }\r\n                else if (typeof val === 'number') {\r\n                    val = val & 255;\r\n                }\r\n                // Invalid ranges are not set to a default, so can range check early.\r\n                if (start < 0 || this.length < start || this.length < end) {\r\n                    throw new RangeError('Out of range index');\r\n                }\r\n                if (end <= start) {\r\n                    return this;\r\n                }\r\n                start = start >>> 0;\r\n                end = end === undefined ? this.length : end >>> 0;\r\n                if (!val)\r\n                    val = 0;\r\n                var i;\r\n                if (typeof val === 'number') {\r\n                    for (i = start; i < end; ++i) {\r\n                        this[i] = val;\r\n                    }\r\n                }\r\n                else {\r\n                    var bytes = Buffer.isBuffer(val)\r\n                        ? val\r\n                        : utf8ToBytes(new Buffer(val, encoding).toString());\r\n                    var len = bytes.length;\r\n                    for (i = 0; i < end - start; ++i) {\r\n                        this[i + start] = bytes[i % len];\r\n                    }\r\n                }\r\n                return this;\r\n            };\r\n            // HELPER FUNCTIONS\r\n            // ================\r\n            var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\r\n            function base64clean(str) {\r\n                // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\r\n                str = stringtrim(str).replace(INVALID_BASE64_RE, '');\r\n                // Node converts strings with length < 2 to ''\r\n                if (str.length < 2)\r\n                    return '';\r\n                // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\r\n                while (str.length % 4 !== 0) {\r\n                    str = str + '=';\r\n                }\r\n                return str;\r\n            }\r\n            function stringtrim(str) {\r\n                if (str.trim)\r\n                    return str.trim();\r\n                return str.replace(/^\\s+|\\s+$/g, '');\r\n            }\r\n            function toHex(n) {\r\n                if (n < 16)\r\n                    return '0' + n.toString(16);\r\n                return n.toString(16);\r\n            }\r\n            function utf8ToBytes(string, units) {\r\n                units = units || Infinity;\r\n                var codePoint;\r\n                var length = string.length;\r\n                var leadSurrogate = null;\r\n                var bytes = [];\r\n                for (var i = 0; i < length; ++i) {\r\n                    codePoint = string.charCodeAt(i);\r\n                    // is surrogate component\r\n                    if (codePoint > 0xD7FF && codePoint < 0xE000) {\r\n                        // last char was a lead\r\n                        if (!leadSurrogate) {\r\n                            // no lead yet\r\n                            if (codePoint > 0xDBFF) {\r\n                                // unexpected trail\r\n                                if ((units -= 3) > -1)\r\n                                    bytes.push(0xEF, 0xBF, 0xBD);\r\n                                continue;\r\n                            }\r\n                            else if (i + 1 === length) {\r\n                                // unpaired lead\r\n                                if ((units -= 3) > -1)\r\n                                    bytes.push(0xEF, 0xBF, 0xBD);\r\n                                continue;\r\n                            }\r\n                            // valid lead\r\n                            leadSurrogate = codePoint;\r\n                            continue;\r\n                        }\r\n                        // 2 leads in a row\r\n                        if (codePoint < 0xDC00) {\r\n                            if ((units -= 3) > -1)\r\n                                bytes.push(0xEF, 0xBF, 0xBD);\r\n                            leadSurrogate = codePoint;\r\n                            continue;\r\n                        }\r\n                        // valid surrogate pair\r\n                        codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\r\n                    }\r\n                    else if (leadSurrogate) {\r\n                        // valid bmp char, but last char was a lead\r\n                        if ((units -= 3) > -1)\r\n                            bytes.push(0xEF, 0xBF, 0xBD);\r\n                    }\r\n                    leadSurrogate = null;\r\n                    // encode utf8\r\n                    if (codePoint < 0x80) {\r\n                        if ((units -= 1) < 0)\r\n                            break;\r\n                        bytes.push(codePoint);\r\n                    }\r\n                    else if (codePoint < 0x800) {\r\n                        if ((units -= 2) < 0)\r\n                            break;\r\n                        bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\r\n                    }\r\n                    else if (codePoint < 0x10000) {\r\n                        if ((units -= 3) < 0)\r\n                            break;\r\n                        bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\r\n                    }\r\n                    else if (codePoint < 0x110000) {\r\n                        if ((units -= 4) < 0)\r\n                            break;\r\n                        bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\r\n                    }\r\n                    else {\r\n                        throw new Error('Invalid code point');\r\n                    }\r\n                }\r\n                return bytes;\r\n            }\r\n            function asciiToBytes(str) {\r\n                var byteArray = [];\r\n                for (var i = 0; i < str.length; ++i) {\r\n                    // Node's code seems to be doing this and not & 0x7F..\r\n                    byteArray.push(str.charCodeAt(i) & 0xFF);\r\n                }\r\n                return byteArray;\r\n            }\r\n            function utf16leToBytes(str, units) {\r\n                var c, hi, lo;\r\n                var byteArray = [];\r\n                for (var i = 0; i < str.length; ++i) {\r\n                    if ((units -= 2) < 0)\r\n                        break;\r\n                    c = str.charCodeAt(i);\r\n                    hi = c >> 8;\r\n                    lo = c % 256;\r\n                    byteArray.push(lo);\r\n                    byteArray.push(hi);\r\n                }\r\n                return byteArray;\r\n            }\r\n            function base64ToBytes(str) {\r\n                return base64.toByteArray(base64clean(str));\r\n            }\r\n            function blitBuffer(src, dst, offset, length) {\r\n                for (var i = 0; i < length; ++i) {\r\n                    if ((i + offset >= dst.length) || (i >= src.length))\r\n                        break;\r\n                    dst[i + offset] = src[i];\r\n                }\r\n                return i;\r\n            }\r\n            function isnan(val) {\r\n                return val !== val; // eslint-disable-line no-self-compare\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 59 */\r\n        /***/ (function (module, exports) {\r\n            'use strict';\r\n            exports.byteLength = byteLength;\r\n            exports.toByteArray = toByteArray;\r\n            exports.fromByteArray = fromByteArray;\r\n            var lookup = [];\r\n            var revLookup = [];\r\n            var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\r\n            var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n            for (var i = 0, len = code.length; i < len; ++i) {\r\n                lookup[i] = code[i];\r\n                revLookup[code.charCodeAt(i)] = i;\r\n            }\r\n            // Support decoding URL-safe base64 strings, as Node.js does.\r\n            // See: https://en.wikipedia.org/wiki/Base64#URL_applications\r\n            revLookup['-'.charCodeAt(0)] = 62;\r\n            revLookup['_'.charCodeAt(0)] = 63;\r\n            function getLens(b64) {\r\n                var len = b64.length;\r\n                if (len % 4 > 0) {\r\n                    throw new Error('Invalid string. Length must be a multiple of 4');\r\n                }\r\n                // Trim off extra bytes after placeholder bytes are found\r\n                // See: https://github.com/beatgammit/base64-js/issues/42\r\n                var validLen = b64.indexOf('=');\r\n                if (validLen === -1)\r\n                    validLen = len;\r\n                var placeHoldersLen = validLen === len\r\n                    ? 0\r\n                    : 4 - (validLen % 4);\r\n                return [validLen, placeHoldersLen];\r\n            }\r\n            // base64 is 4/3 + up to two characters of the original data\r\n            function byteLength(b64) {\r\n                var lens = getLens(b64);\r\n                var validLen = lens[0];\r\n                var placeHoldersLen = lens[1];\r\n                return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen;\r\n            }\r\n            function _byteLength(b64, validLen, placeHoldersLen) {\r\n                return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen;\r\n            }\r\n            function toByteArray(b64) {\r\n                var tmp;\r\n                var lens = getLens(b64);\r\n                var validLen = lens[0];\r\n                var placeHoldersLen = lens[1];\r\n                var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\r\n                var curByte = 0;\r\n                // if there are placeholders, only get up to the last complete 4 chars\r\n                var len = placeHoldersLen > 0\r\n                    ? validLen - 4\r\n                    : validLen;\r\n                for (var i = 0; i < len; i += 4) {\r\n                    tmp =\r\n                        (revLookup[b64.charCodeAt(i)] << 18) |\r\n                            (revLookup[b64.charCodeAt(i + 1)] << 12) |\r\n                            (revLookup[b64.charCodeAt(i + 2)] << 6) |\r\n                            revLookup[b64.charCodeAt(i + 3)];\r\n                    arr[curByte++] = (tmp >> 16) & 0xFF;\r\n                    arr[curByte++] = (tmp >> 8) & 0xFF;\r\n                    arr[curByte++] = tmp & 0xFF;\r\n                }\r\n                if (placeHoldersLen === 2) {\r\n                    tmp =\r\n                        (revLookup[b64.charCodeAt(i)] << 2) |\r\n                            (revLookup[b64.charCodeAt(i + 1)] >> 4);\r\n                    arr[curByte++] = tmp & 0xFF;\r\n                }\r\n                if (placeHoldersLen === 1) {\r\n                    tmp =\r\n                        (revLookup[b64.charCodeAt(i)] << 10) |\r\n                            (revLookup[b64.charCodeAt(i + 1)] << 4) |\r\n                            (revLookup[b64.charCodeAt(i + 2)] >> 2);\r\n                    arr[curByte++] = (tmp >> 8) & 0xFF;\r\n                    arr[curByte++] = tmp & 0xFF;\r\n                }\r\n                return arr;\r\n            }\r\n            function tripletToBase64(num) {\r\n                return lookup[num >> 18 & 0x3F] +\r\n                    lookup[num >> 12 & 0x3F] +\r\n                    lookup[num >> 6 & 0x3F] +\r\n                    lookup[num & 0x3F];\r\n            }\r\n            function encodeChunk(uint8, start, end) {\r\n                var tmp;\r\n                var output = [];\r\n                for (var i = start; i < end; i += 3) {\r\n                    tmp =\r\n                        ((uint8[i] << 16) & 0xFF0000) +\r\n                            ((uint8[i + 1] << 8) & 0xFF00) +\r\n                            (uint8[i + 2] & 0xFF);\r\n                    output.push(tripletToBase64(tmp));\r\n                }\r\n                return output.join('');\r\n            }\r\n            function fromByteArray(uint8) {\r\n                var tmp;\r\n                var len = uint8.length;\r\n                var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\r\n                var parts = [];\r\n                var maxChunkLength = 16383; // must be multiple of 3\r\n                // go through the array every three bytes, we'll deal with trailing stuff later\r\n                for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\r\n                    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)));\r\n                }\r\n                // pad the end with zeros, but make sure to not forget the extra bytes\r\n                if (extraBytes === 1) {\r\n                    tmp = uint8[len - 1];\r\n                    parts.push(lookup[tmp >> 2] +\r\n                        lookup[(tmp << 4) & 0x3F] +\r\n                        '==');\r\n                }\r\n                else if (extraBytes === 2) {\r\n                    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\r\n                    parts.push(lookup[tmp >> 10] +\r\n                        lookup[(tmp >> 4) & 0x3F] +\r\n                        lookup[(tmp << 2) & 0x3F] +\r\n                        '=');\r\n                }\r\n                return parts.join('');\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 60 */\r\n        /***/ (function (module, exports) {\r\n            exports.read = function (buffer, offset, isLE, mLen, nBytes) {\r\n                var e, m;\r\n                var eLen = (nBytes * 8) - mLen - 1;\r\n                var eMax = (1 << eLen) - 1;\r\n                var eBias = eMax >> 1;\r\n                var nBits = -7;\r\n                var i = isLE ? (nBytes - 1) : 0;\r\n                var d = isLE ? -1 : 1;\r\n                var s = buffer[offset + i];\r\n                i += d;\r\n                e = s & ((1 << (-nBits)) - 1);\r\n                s >>= (-nBits);\r\n                nBits += eLen;\r\n                for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) { }\r\n                m = e & ((1 << (-nBits)) - 1);\r\n                e >>= (-nBits);\r\n                nBits += mLen;\r\n                for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) { }\r\n                if (e === 0) {\r\n                    e = 1 - eBias;\r\n                }\r\n                else if (e === eMax) {\r\n                    return m ? NaN : ((s ? -1 : 1) * Infinity);\r\n                }\r\n                else {\r\n                    m = m + Math.pow(2, mLen);\r\n                    e = e - eBias;\r\n                }\r\n                return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\r\n            };\r\n            exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\r\n                var e, m, c;\r\n                var eLen = (nBytes * 8) - mLen - 1;\r\n                var eMax = (1 << eLen) - 1;\r\n                var eBias = eMax >> 1;\r\n                var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0);\r\n                var i = isLE ? 0 : (nBytes - 1);\r\n                var d = isLE ? 1 : -1;\r\n                var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\r\n                value = Math.abs(value);\r\n                if (isNaN(value) || value === Infinity) {\r\n                    m = isNaN(value) ? 1 : 0;\r\n                    e = eMax;\r\n                }\r\n                else {\r\n                    e = Math.floor(Math.log(value) / Math.LN2);\r\n                    if (value * (c = Math.pow(2, -e)) < 1) {\r\n                        e--;\r\n                        c *= 2;\r\n                    }\r\n                    if (e + eBias >= 1) {\r\n                        value += rt / c;\r\n                    }\r\n                    else {\r\n                        value += rt * Math.pow(2, 1 - eBias);\r\n                    }\r\n                    if (value * c >= 2) {\r\n                        e++;\r\n                        c /= 2;\r\n                    }\r\n                    if (e + eBias >= eMax) {\r\n                        m = 0;\r\n                        e = eMax;\r\n                    }\r\n                    else if (e + eBias >= 1) {\r\n                        m = ((value * c) - 1) * Math.pow(2, mLen);\r\n                        e = e + eBias;\r\n                    }\r\n                    else {\r\n                        m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\r\n                        e = 0;\r\n                    }\r\n                }\r\n                for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) { }\r\n                e = (e << mLen) | m;\r\n                eLen += mLen;\r\n                for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) { }\r\n                buffer[offset + i - d] |= s * 128;\r\n            };\r\n            /***/ \r\n        }),\r\n        /* 61 */\r\n        /***/ (function (module, exports) {\r\n            var toString = {}.toString;\r\n            module.exports = Array.isArray || function (arr) {\r\n                return toString.call(arr) == '[object Array]';\r\n            };\r\n            /***/ \r\n        }),\r\n        /* 62 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var __extends = (this && this.__extends) || function (d, b) {\r\n                for (var p in b)\r\n                    if (b.hasOwnProperty(p))\r\n                        d[p] = b[p];\r\n                function __() { this.constructor = d; }\r\n                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n            };\r\n            var dispatcher_1 = __webpack_require__(24);\r\n            var timers_1 = __webpack_require__(12);\r\n            var logger_1 = __webpack_require__(8);\r\n            var Collections = __webpack_require__(9);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var ConnectionManager = (function (_super) {\r\n                __extends(ConnectionManager, _super);\r\n                function ConnectionManager(key, options) {\r\n                    var _this = this;\r\n                    _super.call(this);\r\n                    this.key = key;\r\n                    this.options = options || {};\r\n                    this.state = \"initialized\";\r\n                    this.connection = null;\r\n                    this.usingTLS = !!options.useTLS;\r\n                    this.timeline = this.options.timeline;\r\n                    this.errorCallbacks = this.buildErrorCallbacks();\r\n                    this.connectionCallbacks = this.buildConnectionCallbacks(this.errorCallbacks);\r\n                    this.handshakeCallbacks = this.buildHandshakeCallbacks(this.errorCallbacks);\r\n                    var Network = runtime_1[\"default\"].getNetwork();\r\n                    Network.bind(\"online\", function () {\r\n                        _this.timeline.info({ netinfo: \"online\" });\r\n                        if (_this.state === \"connecting\" || _this.state === \"unavailable\") {\r\n                            _this.retryIn(0);\r\n                        }\r\n                    });\r\n                    Network.bind(\"offline\", function () {\r\n                        _this.timeline.info({ netinfo: \"offline\" });\r\n                        if (_this.connection) {\r\n                            _this.sendActivityCheck();\r\n                        }\r\n                    });\r\n                    this.updateStrategy();\r\n                }\r\n                ConnectionManager.prototype.connect = function () {\r\n                    if (this.connection || this.runner) {\r\n                        return;\r\n                    }\r\n                    if (!this.strategy.isSupported()) {\r\n                        this.updateState(\"failed\");\r\n                        return;\r\n                    }\r\n                    this.updateState(\"connecting\");\r\n                    this.startConnecting();\r\n                    this.setUnavailableTimer();\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.send = function (data) {\r\n                    if (this.connection) {\r\n                        return this.connection.send(data);\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.send_event = function (name, data, channel) {\r\n                    if (this.connection) {\r\n                        return this.connection.send_event(name, data, channel);\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.disconnect = function () {\r\n                    this.disconnectInternally();\r\n                    this.updateState(\"disconnected\");\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.isUsingTLS = function () {\r\n                    return this.usingTLS;\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.startConnecting = function () {\r\n                    var _this = this;\r\n                    var callback = function (error, handshake) {\r\n                        if (error) {\r\n                            _this.runner = _this.strategy.connect(0, callback);\r\n                        }\r\n                        else {\r\n                            if (handshake.action === \"error\") {\r\n                                _this.emit(\"error\", { type: \"HandshakeError\", error: handshake.error });\r\n                                _this.timeline.error({ handshakeError: handshake.error });\r\n                            }\r\n                            else {\r\n                                _this.abortConnecting();\r\n                                _this.handshakeCallbacks[handshake.action](handshake);\r\n                            }\r\n                        }\r\n                    };\r\n                    this.runner = this.strategy.connect(0, callback);\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.abortConnecting = function () {\r\n                    if (this.runner) {\r\n                        this.runner.abort();\r\n                        this.runner = null;\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.disconnectInternally = function () {\r\n                    this.abortConnecting();\r\n                    this.clearRetryTimer();\r\n                    this.clearUnavailableTimer();\r\n                    if (this.connection) {\r\n                        var connection = this.abandonConnection();\r\n                        connection.close();\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.updateStrategy = function () {\r\n                    this.strategy = this.options.getStrategy({\r\n                        key: this.key,\r\n                        timeline: this.timeline,\r\n                        useTLS: this.usingTLS\r\n                    });\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.retryIn = function (delay) {\r\n                    var _this = this;\r\n                    this.timeline.info({ action: \"retry\", delay: delay });\r\n                    if (delay > 0) {\r\n                        this.emit(\"connecting_in\", Math.round(delay / 1000));\r\n                    }\r\n                    this.retryTimer = new timers_1.OneOffTimer(delay || 0, function () {\r\n                        _this.disconnectInternally();\r\n                        _this.connect();\r\n                    });\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.clearRetryTimer = function () {\r\n                    if (this.retryTimer) {\r\n                        this.retryTimer.ensureAborted();\r\n                        this.retryTimer = null;\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.setUnavailableTimer = function () {\r\n                    var _this = this;\r\n                    this.unavailableTimer = new timers_1.OneOffTimer(this.options.unavailableTimeout, function () {\r\n                        _this.updateState(\"unavailable\");\r\n                    });\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.clearUnavailableTimer = function () {\r\n                    if (this.unavailableTimer) {\r\n                        this.unavailableTimer.ensureAborted();\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.sendActivityCheck = function () {\r\n                    var _this = this;\r\n                    this.stopActivityCheck();\r\n                    this.connection.ping();\r\n                    this.activityTimer = new timers_1.OneOffTimer(this.options.pongTimeout, function () {\r\n                        _this.timeline.error({ pong_timed_out: _this.options.pongTimeout });\r\n                        _this.retryIn(0);\r\n                    });\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.resetActivityCheck = function () {\r\n                    var _this = this;\r\n                    this.stopActivityCheck();\r\n                    if (this.connection && !this.connection.handlesActivityChecks()) {\r\n                        this.activityTimer = new timers_1.OneOffTimer(this.activityTimeout, function () {\r\n                            _this.sendActivityCheck();\r\n                        });\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.stopActivityCheck = function () {\r\n                    if (this.activityTimer) {\r\n                        this.activityTimer.ensureAborted();\r\n                    }\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.buildConnectionCallbacks = function (errorCallbacks) {\r\n                    var _this = this;\r\n                    return Collections.extend({}, errorCallbacks, {\r\n                        message: function (message) {\r\n                            _this.resetActivityCheck();\r\n                            _this.emit('message', message);\r\n                        },\r\n                        ping: function () {\r\n                            _this.send_event('pusher:pong', {});\r\n                        },\r\n                        activity: function () {\r\n                            _this.resetActivityCheck();\r\n                        },\r\n                        error: function (error) {\r\n                            _this.emit(\"error\", { type: \"WebSocketError\", error: error });\r\n                        },\r\n                        closed: function () {\r\n                            _this.abandonConnection();\r\n                            if (_this.shouldRetry()) {\r\n                                _this.retryIn(1000);\r\n                            }\r\n                        }\r\n                    });\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.buildHandshakeCallbacks = function (errorCallbacks) {\r\n                    var _this = this;\r\n                    return Collections.extend({}, errorCallbacks, {\r\n                        connected: function (handshake) {\r\n                            _this.activityTimeout = Math.min(_this.options.activityTimeout, handshake.activityTimeout, handshake.connection.activityTimeout || Infinity);\r\n                            _this.clearUnavailableTimer();\r\n                            _this.setConnection(handshake.connection);\r\n                            _this.socket_id = _this.connection.id;\r\n                            _this.updateState(\"connected\", { socket_id: _this.socket_id });\r\n                        }\r\n                    });\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.buildErrorCallbacks = function () {\r\n                    var _this = this;\r\n                    var withErrorEmitted = function (callback) {\r\n                        return function (result) {\r\n                            if (result.error) {\r\n                                _this.emit(\"error\", { type: \"WebSocketError\", error: result.error });\r\n                            }\r\n                            callback(result);\r\n                        };\r\n                    };\r\n                    return {\r\n                        tls_only: withErrorEmitted(function () {\r\n                            _this.usingTLS = true;\r\n                            _this.updateStrategy();\r\n                            _this.retryIn(0);\r\n                        }),\r\n                        refused: withErrorEmitted(function () {\r\n                            _this.disconnect();\r\n                        }),\r\n                        backoff: withErrorEmitted(function () {\r\n                            _this.retryIn(1000);\r\n                        }),\r\n                        retry: withErrorEmitted(function () {\r\n                            _this.retryIn(0);\r\n                        })\r\n                    };\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.setConnection = function (connection) {\r\n                    this.connection = connection;\r\n                    for (var event in this.connectionCallbacks) {\r\n                        this.connection.bind(event, this.connectionCallbacks[event]);\r\n                    }\r\n                    this.resetActivityCheck();\r\n                };\r\n                ;\r\n                ConnectionManager.prototype.abandonConnection = function () {\r\n                    if (!this.connection) {\r\n                        return;\r\n                    }\r\n                    this.stopActivityCheck();\r\n                    for (var event in this.connectionCallbacks) {\r\n                        this.connection.unbind(event, this.connectionCallbacks[event]);\r\n                    }\r\n                    var connection = this.connection;\r\n                    this.connection = null;\r\n                    return connection;\r\n                };\r\n                ConnectionManager.prototype.updateState = function (newState, data) {\r\n                    var previousState = this.state;\r\n                    this.state = newState;\r\n                    if (previousState !== newState) {\r\n                        var newStateDescription = newState;\r\n                        if (newStateDescription === \"connected\") {\r\n                            newStateDescription += \" with new socket ID \" + data.socket_id;\r\n                        }\r\n                        logger_1[\"default\"].debug('State changed', previousState + ' -> ' + newStateDescription);\r\n                        this.timeline.info({ state: newState, params: data });\r\n                        this.emit('state_change', { previous: previousState, current: newState });\r\n                        this.emit(newState, data);\r\n                    }\r\n                };\r\n                ConnectionManager.prototype.shouldRetry = function () {\r\n                    return this.state === \"connecting\" || this.state === \"connected\";\r\n                };\r\n                return ConnectionManager;\r\n            }(dispatcher_1[\"default\"]));\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = ConnectionManager;\r\n            /***/ \r\n        }),\r\n        /* 63 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var factory_1 = __webpack_require__(43);\r\n            var Errors = __webpack_require__(31);\r\n            var Channels = (function () {\r\n                function Channels() {\r\n                    this.channels = {};\r\n                }\r\n                Channels.prototype.add = function (name, pusher) {\r\n                    if (!this.channels[name]) {\r\n                        this.channels[name] = createChannel(name, pusher);\r\n                    }\r\n                    return this.channels[name];\r\n                };\r\n                Channels.prototype.all = function () {\r\n                    return Collections.values(this.channels);\r\n                };\r\n                Channels.prototype.find = function (name) {\r\n                    return this.channels[name];\r\n                };\r\n                Channels.prototype.remove = function (name) {\r\n                    var channel = this.channels[name];\r\n                    delete this.channels[name];\r\n                    return channel;\r\n                };\r\n                Channels.prototype.disconnect = function () {\r\n                    Collections.objectApply(this.channels, function (channel) {\r\n                        channel.disconnect();\r\n                    });\r\n                };\r\n                return Channels;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = Channels;\r\n            function createChannel(name, pusher) {\r\n                if (name.indexOf('private-encrypted-') === 0) {\r\n                    if (navigator.product == \"ReactNative\") {\r\n                        var errorMsg = \"Encrypted channels are not yet supported when using React Native builds.\";\r\n                        throw new Errors.UnsupportedFeature(errorMsg);\r\n                    }\r\n                    return factory_1[\"default\"].createEncryptedChannel(name, pusher);\r\n                }\r\n                else if (name.indexOf('private-') === 0) {\r\n                    return factory_1[\"default\"].createPrivateChannel(name, pusher);\r\n                }\r\n                else if (name.indexOf('presence-') === 0) {\r\n                    return factory_1[\"default\"].createPresenceChannel(name, pusher);\r\n                }\r\n                else {\r\n                    return factory_1[\"default\"].createChannel(name, pusher);\r\n                }\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 64 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var factory_1 = __webpack_require__(43);\r\n            var util_1 = __webpack_require__(11);\r\n            var Errors = __webpack_require__(31);\r\n            var Collections = __webpack_require__(9);\r\n            var TransportStrategy = (function () {\r\n                function TransportStrategy(name, priority, transport, options) {\r\n                    this.name = name;\r\n                    this.priority = priority;\r\n                    this.transport = transport;\r\n                    this.options = options || {};\r\n                }\r\n                TransportStrategy.prototype.isSupported = function () {\r\n                    return this.transport.isSupported({\r\n                        useTLS: this.options.useTLS\r\n                    });\r\n                };\r\n                TransportStrategy.prototype.connect = function (minPriority, callback) {\r\n                    var _this = this;\r\n                    if (!this.isSupported()) {\r\n                        return failAttempt(new Errors.UnsupportedStrategy(), callback);\r\n                    }\r\n                    else if (this.priority < minPriority) {\r\n                        return failAttempt(new Errors.TransportPriorityTooLow(), callback);\r\n                    }\r\n                    var connected = false;\r\n                    var transport = this.transport.createConnection(this.name, this.priority, this.options.key, this.options);\r\n                    var handshake = null;\r\n                    var onInitialized = function () {\r\n                        transport.unbind(\"initialized\", onInitialized);\r\n                        transport.connect();\r\n                    };\r\n                    var onOpen = function () {\r\n                        handshake = factory_1[\"default\"].createHandshake(transport, function (result) {\r\n                            connected = true;\r\n                            unbindListeners();\r\n                            callback(null, result);\r\n                        });\r\n                    };\r\n                    var onError = function (error) {\r\n                        unbindListeners();\r\n                        callback(error);\r\n                    };\r\n                    var onClosed = function () {\r\n                        unbindListeners();\r\n                        var serializedTransport;\r\n                        serializedTransport = Collections.safeJSONStringify(transport);\r\n                        callback(new Errors.TransportClosed(serializedTransport));\r\n                    };\r\n                    var unbindListeners = function () {\r\n                        transport.unbind(\"initialized\", onInitialized);\r\n                        transport.unbind(\"open\", onOpen);\r\n                        transport.unbind(\"error\", onError);\r\n                        transport.unbind(\"closed\", onClosed);\r\n                    };\r\n                    transport.bind(\"initialized\", onInitialized);\r\n                    transport.bind(\"open\", onOpen);\r\n                    transport.bind(\"error\", onError);\r\n                    transport.bind(\"closed\", onClosed);\r\n                    transport.initialize();\r\n                    return {\r\n                        abort: function () {\r\n                            if (connected) {\r\n                                return;\r\n                            }\r\n                            unbindListeners();\r\n                            if (handshake) {\r\n                                handshake.close();\r\n                            }\r\n                            else {\r\n                                transport.close();\r\n                            }\r\n                        },\r\n                        forceMinPriority: function (p) {\r\n                            if (connected) {\r\n                                return;\r\n                            }\r\n                            if (_this.priority < p) {\r\n                                if (handshake) {\r\n                                    handshake.close();\r\n                                }\r\n                                else {\r\n                                    transport.close();\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                };\r\n                return TransportStrategy;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = TransportStrategy;\r\n            function failAttempt(error, callback) {\r\n                util_1[\"default\"].defer(function () {\r\n                    callback(error);\r\n                });\r\n                return {\r\n                    abort: function () { },\r\n                    forceMinPriority: function () { }\r\n                };\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 65 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var util_1 = __webpack_require__(11);\r\n            var timers_1 = __webpack_require__(12);\r\n            var SequentialStrategy = (function () {\r\n                function SequentialStrategy(strategies, options) {\r\n                    this.strategies = strategies;\r\n                    this.loop = Boolean(options.loop);\r\n                    this.failFast = Boolean(options.failFast);\r\n                    this.timeout = options.timeout;\r\n                    this.timeoutLimit = options.timeoutLimit;\r\n                }\r\n                SequentialStrategy.prototype.isSupported = function () {\r\n                    return Collections.any(this.strategies, util_1[\"default\"].method(\"isSupported\"));\r\n                };\r\n                SequentialStrategy.prototype.connect = function (minPriority, callback) {\r\n                    var _this = this;\r\n                    var strategies = this.strategies;\r\n                    var current = 0;\r\n                    var timeout = this.timeout;\r\n                    var runner = null;\r\n                    var tryNextStrategy = function (error, handshake) {\r\n                        if (handshake) {\r\n                            callback(null, handshake);\r\n                        }\r\n                        else {\r\n                            current = current + 1;\r\n                            if (_this.loop) {\r\n                                current = current % strategies.length;\r\n                            }\r\n                            if (current < strategies.length) {\r\n                                if (timeout) {\r\n                                    timeout = timeout * 2;\r\n                                    if (_this.timeoutLimit) {\r\n                                        timeout = Math.min(timeout, _this.timeoutLimit);\r\n                                    }\r\n                                }\r\n                                runner = _this.tryStrategy(strategies[current], minPriority, { timeout: timeout, failFast: _this.failFast }, tryNextStrategy);\r\n                            }\r\n                            else {\r\n                                callback(true);\r\n                            }\r\n                        }\r\n                    };\r\n                    runner = this.tryStrategy(strategies[current], minPriority, { timeout: timeout, failFast: this.failFast }, tryNextStrategy);\r\n                    return {\r\n                        abort: function () {\r\n                            runner.abort();\r\n                        },\r\n                        forceMinPriority: function (p) {\r\n                            minPriority = p;\r\n                            if (runner) {\r\n                                runner.forceMinPriority(p);\r\n                            }\r\n                        }\r\n                    };\r\n                };\r\n                SequentialStrategy.prototype.tryStrategy = function (strategy, minPriority, options, callback) {\r\n                    var timer = null;\r\n                    var runner = null;\r\n                    if (options.timeout > 0) {\r\n                        timer = new timers_1.OneOffTimer(options.timeout, function () {\r\n                            runner.abort();\r\n                            callback(true);\r\n                        });\r\n                    }\r\n                    runner = strategy.connect(minPriority, function (error, handshake) {\r\n                        if (error && timer && timer.isRunning() && !options.failFast) {\r\n                            return;\r\n                        }\r\n                        if (timer) {\r\n                            timer.ensureAborted();\r\n                        }\r\n                        callback(error, handshake);\r\n                    });\r\n                    return {\r\n                        abort: function () {\r\n                            if (timer) {\r\n                                timer.ensureAborted();\r\n                            }\r\n                            runner.abort();\r\n                        },\r\n                        forceMinPriority: function (p) {\r\n                            runner.forceMinPriority(p);\r\n                        }\r\n                    };\r\n                };\r\n                return SequentialStrategy;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = SequentialStrategy;\r\n            /***/ \r\n        }),\r\n        /* 66 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var Collections = __webpack_require__(9);\r\n            var util_1 = __webpack_require__(11);\r\n            var BestConnectedEverStrategy = (function () {\r\n                function BestConnectedEverStrategy(strategies) {\r\n                    this.strategies = strategies;\r\n                }\r\n                BestConnectedEverStrategy.prototype.isSupported = function () {\r\n                    return Collections.any(this.strategies, util_1[\"default\"].method(\"isSupported\"));\r\n                };\r\n                BestConnectedEverStrategy.prototype.connect = function (minPriority, callback) {\r\n                    return connect(this.strategies, minPriority, function (i, runners) {\r\n                        return function (error, handshake) {\r\n                            runners[i].error = error;\r\n                            if (error) {\r\n                                if (allRunnersFailed(runners)) {\r\n                                    callback(true);\r\n                                }\r\n                                return;\r\n                            }\r\n                            Collections.apply(runners, function (runner) {\r\n                                runner.forceMinPriority(handshake.transport.priority);\r\n                            });\r\n                            callback(null, handshake);\r\n                        };\r\n                    });\r\n                };\r\n                return BestConnectedEverStrategy;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = BestConnectedEverStrategy;\r\n            function connect(strategies, minPriority, callbackBuilder) {\r\n                var runners = Collections.map(strategies, function (strategy, i, _, rs) {\r\n                    return strategy.connect(minPriority, callbackBuilder(i, rs));\r\n                });\r\n                return {\r\n                    abort: function () {\r\n                        Collections.apply(runners, abortRunner);\r\n                    },\r\n                    forceMinPriority: function (p) {\r\n                        Collections.apply(runners, function (runner) {\r\n                            runner.forceMinPriority(p);\r\n                        });\r\n                    }\r\n                };\r\n            }\r\n            function allRunnersFailed(runners) {\r\n                return Collections.all(runners, function (runner) {\r\n                    return Boolean(runner.error);\r\n                });\r\n            }\r\n            function abortRunner(runner) {\r\n                if (!runner.error && !runner.aborted) {\r\n                    runner.abort();\r\n                    runner.aborted = true;\r\n                }\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 67 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var util_1 = __webpack_require__(11);\r\n            var runtime_1 = __webpack_require__(2);\r\n            var sequential_strategy_1 = __webpack_require__(65);\r\n            var Collections = __webpack_require__(9);\r\n            var CachedStrategy = (function () {\r\n                function CachedStrategy(strategy, transports, options) {\r\n                    this.strategy = strategy;\r\n                    this.transports = transports;\r\n                    this.ttl = options.ttl || 1800 * 1000;\r\n                    this.usingTLS = options.useTLS;\r\n                    this.timeline = options.timeline;\r\n                }\r\n                CachedStrategy.prototype.isSupported = function () {\r\n                    return this.strategy.isSupported();\r\n                };\r\n                CachedStrategy.prototype.connect = function (minPriority, callback) {\r\n                    var usingTLS = this.usingTLS;\r\n                    var info = fetchTransportCache(usingTLS);\r\n                    var strategies = [this.strategy];\r\n                    if (info && info.timestamp + this.ttl >= util_1[\"default\"].now()) {\r\n                        var transport = this.transports[info.transport];\r\n                        if (transport) {\r\n                            this.timeline.info({\r\n                                cached: true,\r\n                                transport: info.transport,\r\n                                latency: info.latency\r\n                            });\r\n                            strategies.push(new sequential_strategy_1[\"default\"]([transport], {\r\n                                timeout: info.latency * 2 + 1000,\r\n                                failFast: true\r\n                            }));\r\n                        }\r\n                    }\r\n                    var startTimestamp = util_1[\"default\"].now();\r\n                    var runner = strategies.pop().connect(minPriority, function cb(error, handshake) {\r\n                        if (error) {\r\n                            flushTransportCache(usingTLS);\r\n                            if (strategies.length > 0) {\r\n                                startTimestamp = util_1[\"default\"].now();\r\n                                runner = strategies.pop().connect(minPriority, cb);\r\n                            }\r\n                            else {\r\n                                callback(error);\r\n                            }\r\n                        }\r\n                        else {\r\n                            storeTransportCache(usingTLS, handshake.transport.name, util_1[\"default\"].now() - startTimestamp);\r\n                            callback(null, handshake);\r\n                        }\r\n                    });\r\n                    return {\r\n                        abort: function () {\r\n                            runner.abort();\r\n                        },\r\n                        forceMinPriority: function (p) {\r\n                            minPriority = p;\r\n                            if (runner) {\r\n                                runner.forceMinPriority(p);\r\n                            }\r\n                        }\r\n                    };\r\n                };\r\n                return CachedStrategy;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = CachedStrategy;\r\n            function getTransportCacheKey(usingTLS) {\r\n                return \"pusherTransport\" + (usingTLS ? \"TLS\" : \"NonTLS\");\r\n            }\r\n            function fetchTransportCache(usingTLS) {\r\n                var storage = runtime_1[\"default\"].getLocalStorage();\r\n                if (storage) {\r\n                    try {\r\n                        var serializedCache = storage[getTransportCacheKey(usingTLS)];\r\n                        if (serializedCache) {\r\n                            return JSON.parse(serializedCache);\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                        flushTransportCache(usingTLS);\r\n                    }\r\n                }\r\n                return null;\r\n            }\r\n            function storeTransportCache(usingTLS, transport, latency) {\r\n                var storage = runtime_1[\"default\"].getLocalStorage();\r\n                if (storage) {\r\n                    try {\r\n                        storage[getTransportCacheKey(usingTLS)] = Collections.safeJSONStringify({\r\n                            timestamp: util_1[\"default\"].now(),\r\n                            transport: transport,\r\n                            latency: latency\r\n                        });\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n            }\r\n            function flushTransportCache(usingTLS) {\r\n                var storage = runtime_1[\"default\"].getLocalStorage();\r\n                if (storage) {\r\n                    try {\r\n                        delete storage[getTransportCacheKey(usingTLS)];\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n            }\r\n            /***/ \r\n        }),\r\n        /* 68 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var timers_1 = __webpack_require__(12);\r\n            var DelayedStrategy = (function () {\r\n                function DelayedStrategy(strategy, _a) {\r\n                    var number = _a.delay;\r\n                    this.strategy = strategy;\r\n                    this.options = { delay: number };\r\n                }\r\n                DelayedStrategy.prototype.isSupported = function () {\r\n                    return this.strategy.isSupported();\r\n                };\r\n                DelayedStrategy.prototype.connect = function (minPriority, callback) {\r\n                    var strategy = this.strategy;\r\n                    var runner;\r\n                    var timer = new timers_1.OneOffTimer(this.options.delay, function () {\r\n                        runner = strategy.connect(minPriority, callback);\r\n                    });\r\n                    return {\r\n                        abort: function () {\r\n                            timer.ensureAborted();\r\n                            if (runner) {\r\n                                runner.abort();\r\n                            }\r\n                        },\r\n                        forceMinPriority: function (p) {\r\n                            minPriority = p;\r\n                            if (runner) {\r\n                                runner.forceMinPriority(p);\r\n                            }\r\n                        }\r\n                    };\r\n                };\r\n                return DelayedStrategy;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = DelayedStrategy;\r\n            /***/ \r\n        }),\r\n        /* 69 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var IfStrategy = (function () {\r\n                function IfStrategy(test, trueBranch, falseBranch) {\r\n                    this.test = test;\r\n                    this.trueBranch = trueBranch;\r\n                    this.falseBranch = falseBranch;\r\n                }\r\n                IfStrategy.prototype.isSupported = function () {\r\n                    var branch = this.test() ? this.trueBranch : this.falseBranch;\r\n                    return branch.isSupported();\r\n                };\r\n                IfStrategy.prototype.connect = function (minPriority, callback) {\r\n                    var branch = this.test() ? this.trueBranch : this.falseBranch;\r\n                    return branch.connect(minPriority, callback);\r\n                };\r\n                return IfStrategy;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = IfStrategy;\r\n            /***/ \r\n        }),\r\n        /* 70 */\r\n        /***/ (function (module, exports) {\r\n            \"use strict\";\r\n            var FirstConnectedStrategy = (function () {\r\n                function FirstConnectedStrategy(strategy) {\r\n                    this.strategy = strategy;\r\n                }\r\n                FirstConnectedStrategy.prototype.isSupported = function () {\r\n                    return this.strategy.isSupported();\r\n                };\r\n                FirstConnectedStrategy.prototype.connect = function (minPriority, callback) {\r\n                    var runner = this.strategy.connect(minPriority, function (error, handshake) {\r\n                        if (handshake) {\r\n                            runner.abort();\r\n                        }\r\n                        callback(error, handshake);\r\n                    });\r\n                    return runner;\r\n                };\r\n                return FirstConnectedStrategy;\r\n            }());\r\n            exports.__esModule = true;\r\n            exports[\"default\"] = FirstConnectedStrategy;\r\n            /***/ \r\n        }),\r\n        /* 71 */\r\n        /***/ (function (module, exports, __webpack_require__) {\r\n            \"use strict\";\r\n            var defaults_1 = __webpack_require__(5);\r\n            exports.getGlobalConfig = function () {\r\n                return {\r\n                    wsHost: defaults_1[\"default\"].host,\r\n                    wsPort: defaults_1[\"default\"].ws_port,\r\n                    wssPort: defaults_1[\"default\"].wss_port,\r\n                    wsPath: defaults_1[\"default\"].ws_path,\r\n                    httpHost: defaults_1[\"default\"].sockjs_host,\r\n                    httpPort: defaults_1[\"default\"].sockjs_http_port,\r\n                    httpsPort: defaults_1[\"default\"].sockjs_https_port,\r\n                    httpPath: defaults_1[\"default\"].sockjs_path,\r\n                    statsHost: defaults_1[\"default\"].stats_host,\r\n                    authEndpoint: defaults_1[\"default\"].channel_auth_endpoint,\r\n                    authTransport: defaults_1[\"default\"].channel_auth_transport,\r\n                    activity_timeout: defaults_1[\"default\"].activity_timeout,\r\n                    pong_timeout: defaults_1[\"default\"].pong_timeout,\r\n                    unavailable_timeout: defaults_1[\"default\"].unavailable_timeout\r\n                };\r\n            };\r\n            exports.getClusterConfig = function (clusterName) {\r\n                return {\r\n                    wsHost: \"ws-\" + clusterName + \".pusher.com\",\r\n                    httpHost: \"sockjs-\" + clusterName + \".pusher.com\"\r\n                };\r\n            };\r\n            /***/ \r\n        })\r\n        /******/ \r\n    ]);\r\n});\r\n;\r\n",null]}